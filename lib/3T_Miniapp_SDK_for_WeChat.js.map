{"version":3,"sources":["webpack://3T_Miniapp_SDK_for_WeChat/webpack/universalModuleDefinition","webpack://3T_Miniapp_SDK_for_WeChat/webpack/bootstrap","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/array/from.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/get-iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/is-iterable.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/json/stringify.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/map.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/number/is-nan.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/define-property.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/get-own-property-names.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/get-own-property-symbols.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/keys.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/promise.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/symbol.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/classCallCheck.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/createClass.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/inherits.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/helpers/typeof.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/babel-runtime/regenerator/index.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/array/from.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/get-iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/is-iterable.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/json/stringify.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/map.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/number/is-nan.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/define-property.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/get-own-property-names.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/get-own-property-symbols.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/keys.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/promise.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/symbol/index.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/fn/symbol/iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_a-function.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_an-instance.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_an-object.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_array-from-iterable.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_array-includes.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_array-methods.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_array-species-constructor.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_array-species-create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_classof.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_cof.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_collection-strong.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_collection-to-json.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_collection.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_core.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_create-property.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_ctx.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_defined.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_descriptors.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_dom-create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_enum-keys.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_export.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_fails.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_for-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_global.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_has.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_hide.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_html.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_invoke.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iobject.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_is-array-iter.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_is-array.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_is-object.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iter-call.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iter-create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iter-define.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iter-detect.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iter-step.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_iterators.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_library.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_meta.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_microtask.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_new-promise-capability.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-dp.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-dps.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-gopd.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-gopn.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-gops.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-gpo.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-keys.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-pie.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_object-sap.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_perform.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_promise-resolve.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_property-desc.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_redefine-all.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_redefine.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_set-collection-from.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_set-collection-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_set-proto.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_set-species.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_shared-key.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_shared.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_species-constructor.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_string-at.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_task.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_to-absolute-index.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_to-integer.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_to-iobject.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_to-length.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_to-object.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_to-primitive.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_uid.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_user-agent.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_validate-collection.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_wks-define.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_wks-ext.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/_wks.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/core.get-iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/core.is-iterable.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.array.from.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.array.iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.map.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.number.is-nan.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.object.create.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.object.define-property.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.object.get-own-property-names.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.object.keys.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.promise.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.string.iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es6.symbol.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.map.from.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.map.of.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.map.to-json.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.promise.finally.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.promise.try.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/core-js/library/modules/web.dom.iterable.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/querystring-es3/decode.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/querystring-es3/encode.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/querystring-es3/index.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/regenerator-runtime/runtime-module.js","webpack://3T_Miniapp_SDK_for_WeChat/./node_modules/regenerator-runtime/runtime.js","webpack://3T_Miniapp_SDK_for_WeChat/(webpack)/buildin/module.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/3t-miniapp.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/config.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/index.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/protoo-client/Message.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/protoo-client/Peer.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/protoo-client/protoo-client.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/protoo-client/transports/WebSocketTransport.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/retry/retry.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/retry/retry_operation.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/thirdparty/debug.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/thirdparty/events.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/thirdparty/runtime.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/thirdparty/utils.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/utils/EnhancedEventEmitter.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/utils/IPLocation.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/utils/Logger.js","webpack://3T_Miniapp_SDK_for_WeChat/./src/utils/WxWebSocket.js"],"names":["protooClient","require","Logger","guid","isURL","config","IPLocation","AUTH_INTERVAL","HB_INTERVAL","ERR_FAILED","ERR_DISCONNECTED","UR_CHAIRMAN","UR_PARTICIPANT","UR_AUDIENCE","C_SDK_STATE_IDLE","C_SDK_STATE_INITING","C_SDK_STATE_INIT","C_SDK_STATE_DESTROY","C_JOIN_STATE_IDLE","C_JOIN_STATE_JOINING","C_JOIN_STATE_ON","C_PUBLISH_STATE_IDLE","C_PUBLISH_STATE_ING","C_PUBLISH_STATE_ON","C_SS_AUTO_CONNECTING","C_SS_CONNECTED","C_SS_JOINED","C_SS_RECONNECTED","C_SS_REJOINED","C_SS_FINAL_FAILED","C_IPLOC_PORT","C_AU_PORT","TTTLog","opts","level","callback","_callback","_logLevel","Client","appId","userId","isTest","_logger","error","parseInt","_isTest","Boolean","_logClues","setParameters","roomId","logClues","debug","_sid","_auAddress","_protooUrl","_suspend","attemptAuth","authInterval","authTimeout","_authOK","_sdkState","_joinState","_publishState","_protooPeer","_customPort","_appId","_roomId","_role","_iploc","_iplocFin","_userId","_eventObserver","_connectId","_sequenceNo","_hbTimer","_lastHBRecvTick","_mapUsers","_subscribes","code","type","message","set","onSuccess","onFailure","disAppAuth","disIploc","auServer","timestamp","Date","parse","randNum","Math","round","random","wx","getSystemInfo","success","res","version","system","platform","brand","model","fail","complete","onNetworkStatusChange","isConnected","networkType","resumeProcess","suspendProcess","reason","test","authProcPromise","resolve","reject","showLoading","title","mask","doAppAuth","setInterval","authTimerPromise","tttEngine","setTimeout","race","then","hideLoading","clearTimeout","warn","resetEventObserver","doIplocation","miniauHost","host","initProtoo","catch","event","authUrl","request","url","method","authOK","data","e","sid","on","notifySessionStatus","auAccess","close","ipLocationTest","ipLocation","init","Peer","isRetry","needCB","rejoin","join","clear","stopHBTimer","notifyDisconnected","has","get","uid","err","accept","xxx","yyy","zzz","notification","getTime","userData","onUserEnter","onUserLeave","cid","connectId","isSubscribe","unsubscribe","leave","status","logLevel","port","notify","sequenceNo","currentTick","clearInterval","role","appData","joinRes","startHBTimer","Error","retry","rtmpHost","peers","pushUrl","push","peer","isUpdate","publishResp","subscribeResp","onSubscribe","rotation","onUnsubscribe","opType","sei","mixerUser","devId","delete","userdata","module","exports","logserverUrl","logserverUrl2","getVersion","logger","Message","raw","object","JSON","Array","isArray","id","response","ok","errorCode","errorReason","randomNum","EnhancedEventEmitter","WebSocketTransport","protooUrl","prefix","_closed","_transport","_connected","_data","_sents","safeEmit","_handleRequest","_handleResponse","_handleNotification","values","sent","closeTransport","reconnect","undefined","createRequest","send","timeout","size","data2","timer","createNotification","emit","createSuccessResponse","String","createErrorResponse","WxWebSocket","WST_FULL_TIMEOUT","MAX_RETRY","WST_STATE_IDLE","WST_STATE_TRYING","WST_STATE_ACT","WST_STATE_RETRYING","WST_STATE_FINAL_FAIL","DEFAULT_RETRY_OPTIONS","retries","factor","minTimeout","maxTimeout","options","_stopping","wstTimer","_wstState","_url","_options","_ws","_operation","_randomId","startTransport","closed","stop","wstProc","operation","attemptConnect","wstTimerPromise","wsTransport","result","msg","wstState","listenerCount","reset","attempt","currentAttempt","commentReason","randomId","onWsOpen","onWsMessage","onWsError","onWsClose","connect","cb","ctr","operationRetry","_attempts","_operation_attempts","RetryOperation","timeouts","forever","unref","maxRetryTime","concat","randomize","key","i","createTimeout","length","console","sort","a","b","pow","min","wrap","obj","methods","original","retryWrapper","op","args","prototype","slice","call","arguments","pop","mainError","apply","bind","_originalTimeouts","_timeouts","_maxRetryTime","Infinity","_fn","_errors","_operationTimeout","_operationTimeoutCb","_timeout","_operationStart","_cachedTimeouts","currentTime","unshift","shift","splice","self","fn","timeoutOps","try","log","start","errors","attempts","counts","mainErrorCount","count","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Object","toString","arr2","_typeof","constructor","f","define","r","n","t","o","c","u","p","s","m","h","d","w","y","val","isNaN","long","fmtLong","fmtShort","str","match","exec","parseFloat","toLowerCase","ms","msAbs","abs","plural","name","isPlural","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","len","run","nextTick","Item","array","browser","env","argv","versions","noop","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","setup","createDebug","default","coerce","disable","enable","enabled","humanize","forEach","instances","names","skips","formatters","selectColor","namespace","hash","charCodeAt","colors","prevTime","_len","_key","curr","Number","diff","prev","index","replace","format","formatter","formatArgs","logFn","useColors","color","destroy","extend","indexOf","delimiter","newDebug","namespaces","save","split","RegExp","substr","instance","map","toNamespace","regexp","substring","stack","load","storage","localstorage","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","$1","lastC","_console","setItem","removeItem","getItem","DEBUG","localStorage","j","v","R","Reflect","ReflectApply","target","receiver","Function","ReflectOwnKeys","ownKeys","ProcessEmitWarning","warning","NumberIsNaN","value","EventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","defineProperty","enumerable","arg","RangeError","setMaxListeners","$getMaxListeners","that","getMaxListeners","doError","events","er","context","handler","arrayClone","_addListener","listener","prepend","existing","newListener","warned","emitter","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","list","position","originalListener","spliceOne","keys","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","eventNames","copy","ret","regeneratorRuntime","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","displayName","defineIteratorMethods","isGeneratorFunction","genFun","ctor","mark","__proto__","awrap","__await","AsyncIterator","invoke","record","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","async","next","done","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","abrupt","return","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reverse","iterable","iteratorMethod","skipTempReset","charAt","rootEntry","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","thrown","delegateYield","generateRandomNumber","S4","s1","s2","s3","s4","s5","s6","s7","s8","strRegex","re","IP_FULL_TIMEOUT","IPL_STATE_IDLE","IPL_STATE_STARTING","IPL_STATE_ACT","IPL_STATE_RETRYING","_state","_iplocTimer","_hasGot","_isTPFinish","iplocProc","runIploc","iplocTimerPro","resp","iplocationData","eType","sSEQID","mProtocolMsg","sVersion","bLoadBalance","bReConnect","bVipUser","sIDentify","sSecret","sVerifyCode","sAppID","nUserID","sClientVer","sConnectID","mIpAddrMsg","bFec","sIp","nPort","requestId","iplocRes","miniappHome","sDomain","onMessage","APP_NAME","LOG_NONE","LOG_ERROR","LOG_WARN","LOG_INFO","LOG_DEBUG","LOG_TRACE","_prefix","_debug","_warn","_error","_logDebug","_logWarn","_logError","postLog","preMsg","element","header","WX_STATE_IDLE","WX_STATE_STARTING","WX_STATE_ACT","WX_STATE_STOPING","_connState","_socketTask","connectSocket","onClose","onSocketClose","onSocketMessage","onError","onSocketError","onOpen","onSocketOpen","closeInner","wasClean"],"mappings":"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AA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;;;;;;;;;;;AC/IA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC,WAAW,mBAAO,CAAC,8FAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACRa;AACb,aAAa,mBAAO,CAAC,oEAAW;AAChC,cAAc,mBAAO,CAAC,oEAAW;AACjC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,YAAY,mBAAO,CAAC,kEAAU;AAC9B,WAAW,mBAAO,CAAC,gEAAS;AAC5B,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,YAAY,mBAAO,CAAC,oEAAW;AAC/B,iBAAiB,mBAAO,CAAC,8EAAgB;AACzC,eAAe,mBAAO,CAAC,0EAAc;AACrC,qBAAqB,mBAAO,CAAC,0FAAsB;AACnD,SAAS,mBAAO,CAAC,0EAAc;AAC/B,WAAW,mBAAO,CAAC,kFAAkB;AACrC,kBAAkB,mBAAO,CAAC,8EAAgB;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;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CA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;ACrBA;AACA,UAAU;AACV;;;;;;;;;;;;ACFA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA,WAAW,mBAAO,CAAC,8DAAQ;AAC3B,eAAe,mBAAO,CAAC,0EAAc;AACrC,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,cAAc,mBAAO,CAAC,0EAAc;AACpC;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,kEAAU;AAChC,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpDA,aAAa,mBAAO,CAAC,oEAAW;AAChC,gBAAgB,mBAAO,CAAC,gEAAS;AACjC;AACA;AACA;AACA,aAAa,mBAAO,CAAC,8DAAQ;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;ACpEa;AACb;AACA,gBAAgB,mBAAO,CAAC,4EAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjBA;AACA,eAAe,m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AAC,4EAAe;AACvC,cAAc,mBAAO,CAAC,sEAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,aAAa,mBAAO,CAAC,oEAAW;AAChC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,UAAU,mBAAO,CAAC,4EAAe;AACjC,aAAa,mBAAO,CAAC,oEAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,8DAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnFA,gBAAgB,mBAAO,CAAC,4EAAe;AACvC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC,cAAc,mBAAO,CAAC,sEAAY;AAClC;AACA;AACA;;;;;;;;;;;;ACLA;AACA,gBAAgB,mBAAO,CAAC,4EAAe;AACvC;AACA;AACA,2DAA2D;AAC3D;;;;;;;;;;;;ACLA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC;AACA;AACA;;;;;;;;;;;;ACJA;AACA,eAAe,mBAAO,CAAC,0EAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA,aAAa,mBAAO,C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,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA,uBAAuB,mBAAO,CAAC,gFAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E,mBAAO,CAAC,0FAAsB;AAC9B,mBAAO,CAAC,8EAAgB;AACxB,UAAU,mBAAO,CAAC,gEAAS;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gDAAgD,mBAAO,CAAC,8EAAgB;AACxE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;AC7RY;AACb,UAAU,mBAAO,CAAC,0EAAc;;AAEhC;AACA,mBAAO,CAAC,8EAAgB;AACxB,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;;;;;;;AChBY;AACb;AACA,aAAa,mBAAO,CAAC,oEAAW;AAChC,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,kBAAkB,mBAAO,CAAC,8EAAgB;AAC1C,cAAc,mBAAO,CAAC,oEAAW;AACjC,eAAe,mBAAO,CAAC,wEAAa;AACpC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,aAAa,mBAAO,CAAC,kEAAU;AAC/B,aAAa,mBAAO,CAAC,oEAAW;AAChC,qBAAqB,mBAAO,CAAC,0FAAsB;AACnD,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,aAAa,mBAAO,CAAC,sEAAY;AACjC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,eAAe,mBAAO,CAAC,0EAAc;AACrC,cAAc,mBAAO,CAAC,wEAAa;AACnC,eAAe,mBAAO,CAAC,0EAAc;AACrC,eAAe,mBAAO,CAAC,0EAAc;AACrC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,iBAAiB,mBAAO,CAAC,kFAAkB;AAC3C,cAAc,mBAAO,CAAC,kFAAkB;AACxC,cAAc,mBAAO,CAAC,sFAAoB;AAC1C,YAAY,mBAAO,CAAC,8EAAgB;AACpC,UAAU,mBAAO,CAAC,0EAAc;AAChC,YAAY,mBAAO,CAAC,8EAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,8EAAgB;AAC1B,EAAE,mBAAO,CAAC,4EAAe;AACzB,EAAE,mBAAO,CAAC,8EAAgB;;AAE1B,sBAAsB,mBAAO,CAAC,sEAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,gEAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzOA;AACA,mBAAO,CAAC,8FAAwB;;;;;;;;;;;;ACDhC;AACA,mBAAO,CAAC,0FAAsB;;;;;;;;;;;;ACD9B;AACA,cAAc,mBAAO,CAAC,oEAAW;;AAEjC,uCAAuC,SAAS,mBAAO,CAAC,4FAAuB,UAAU;;;;;;;;;;;;;ACHzF;AACa;AACb,cAAc,mBAAO,CAAC,oEAAW;AACjC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,aAAa,mBAAO,CAAC,oEAAW;AAChC,yBAAyB,mBAAO,CAAC,8FAAwB;AACzD,qBAAqB,mBAAO,CAAC,sFAAoB;;AAEjD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;;;;;;ACnBU;AACb;AACA,cAAc,mBAAO,CAAC,oEAAW;AACjC,2BAA2B,mBAAO,CAAC,oGAA2B;AAC9D,cAAc,mBAAO,CAAC,sEAAY;;AAElC,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;;;;;;ACXH,mBAAO,CAAC,4EAAe;;;;;;;;;;;;ACAvB,mBAAO,CAAC,4EAAe;;;;;;;;;;;;ACAvB,mBAAO,CAAC,0FAAsB;AAC9B,aAAa,mBAAO,CAAC,oEAAW;AAChC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,gBAAgB,mBAAO,CAAC,0EAAc;AACtC,oBAAoB,mBAAO,CAAC,8DAAQ;;AAEpC;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpFa;;AAEb,iCAAiC,mBAAO,CAAC,0DAAU;AACnD,qCAAqC,mBAAO,CAAC,0DAAU;;;;;;;;;;;;ACHvD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,cAAc;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,gEAAW;;AAEpC;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,eAAe,cAAc;AAC7B;;;;;;;;;;;;ACttBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA,IAAMA,eAAeC,mBAAOA,CAAC,8EAAR,CAArB;AACA,IAAMC,SAASD,mBAAOA,CAAC,gDAAR,CAAf;;eACwBA,mBAAOA,CAAC,wDAAR,C;IAAhBE,I,YAAAA,I;IAAMC,K,YAAAA,K;;AACd,IAAMC,SAASJ,mBAAOA,CAAC,oCAAR,CAAf;;AAEA,IAAMK,aAAaL,mBAAOA,CAAC,wDAAR,CAAnB;;AAEA;AACA,IAAMM,gBAAgB,IAAtB,C,CAA4B;;AAE5B;AACA,IAAMC,cAAc,IAApB,C,CAA0B;AAC1B;;AAEA;AACA;AAC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","file":"3T_Miniapp_SDK_for_WeChat.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"3T_Miniapp_SDK_for_WeChat\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"3T_Miniapp_SDK_for_WeChat\"] = factory();\n\telse\n\t\troot[\"3T_Miniapp_SDK_for_WeChat\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/number/is-nan\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-names\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-symbols\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","module.exports = require(\"regenerator-runtime\");\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","require('../../modules/es6.number.is-nan');\nmodule.exports = require('../../modules/_core').Number.isNaN;\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","require('../../modules/es6.object.get-own-property-names');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyNames(it) {\n  return $Object.getOwnPropertyNames(it);\n};\n","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertySymbols;\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function () { /* empty */ };\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","var core = module.exports = { version: '2.6.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = true;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","module.exports = require('./_hide');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","const protooClient = require('./protoo-client/protoo-client.js');\r\nconst Logger = require('./utils/Logger.js');\r\nconst { guid, isURL } = require('./thirdparty/utils.js');\r\nconst config = require('./config.js');\r\n\r\nconst IPLocation = require('./utils/IPLocation.js');\r\n\r\n// AUTH 重试定时器\r\nconst AUTH_INTERVAL = 5000; // 5s\r\n\r\n// 心跳定时器\r\nconst HB_INTERVAL = 8000; // 8s\r\n// \r\n\r\n// Error code define\r\n// {\r\nconst ERR_FAILED = 'failed';\r\nconst ERR_DISCONNECTED = 'disconnected';\r\n// }\r\n\r\n// User role 定义\r\nconst UR_CHAIRMAN = 1; // 主席\r\nconst UR_PARTICIPANT = 2; // 普通用户\r\nconst UR_AUDIENCE = 3; // 观众\r\n// \r\n\r\n// SDK state (初始化、websocket连接状态)\r\n// {\r\nconst C_SDK_STATE_IDLE = 0; // 尚未初始化/已destroy\r\nconst C_SDK_STATE_INITING = 1; // 正在初始化中\r\nconst C_SDK_STATE_INIT = 2; // 成功初始化 -- 已成功连接到webserver\r\nconst C_SDK_STATE_DESTROY = 3; // 已 destroy\r\n// }\r\n\r\n// join 状态\r\n// {\r\nconst C_JOIN_STATE_IDLE = 0; // 空闲/注销\r\nconst C_JOIN_STATE_JOINING = 1; // join 尝试中\r\nconst C_JOIN_STATE_ON = 2; // join online\r\n// }\r\n\r\n// publish 状态\r\n// {\r\nconst C_PUBLISH_STATE_IDLE = 0; // 空闲\r\nconst C_PUBLISH_STATE_ING = 1; // 当前已发起 publish 请求，尚未最终确认\r\nconst C_PUBLISH_STATE_ON = 2; // 当前处于 publish 状态\r\n// }\r\n\r\n// session-status 取值\r\nconst C_SS_AUTO_CONNECTING = 3000; // 正在重连\r\nconst C_SS_CONNECTED = 200; // 连接成功\r\nconst C_SS_JOINED = 210; // join成功\r\nconst C_SS_RECONNECTED = 300; // 重连成功\r\nconst C_SS_REJOINED = 310; // rejoin成功 -- 在重连后自动 join ，也属于 rejoin\r\nconst C_SS_FINAL_FAILED = 1000; // 最终失败\r\n\r\n// 默认端口号\r\nconst C_IPLOC_PORT = 443;\r\nconst C_AU_PORT = 443;\r\n\r\n// log -- 将 sdk 内部日志 callback 到 app 层，由 app 层输出\r\nconst TTTLog = class TTTLog\r\n{\r\n\tconstructor(opts)\r\n\t{\r\n\t\tconst {\r\n\t\t\tlevel,\r\n\t\t\tcallback\r\n\t\t} = opts;\r\n\r\n\t\t// \r\n\t\tthis._callback = callback;\r\n\r\n\t\tthis._logLevel = level;\r\n\t}\r\n\r\n\tsetLogLevel(level)\r\n\t{\r\n\t\tthis._logLevel = level;\r\n\t}\r\n\r\n\tset onLog(callback)\r\n\t{\r\n\t\tthis._callback = callback;\r\n\t}\r\n};\r\n\r\n/**\r\n * TTT Engine core\r\n * 提供对外接口\r\n * \r\n */\r\nconst Client = class Client\r\n{\r\n\t/**\r\n\t * @param {String} appId  -- app id\r\n\t * @param {String} userId  -- user id\r\n\t * @param {String} isTest -- 是否为测试环境 -- 测试环境将使用测试环境IPLocation\r\n\t */\r\n\tconstructor(appId, userId, isTest)\r\n\t{\r\n\t\tif (!appId || !userId)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client constructor() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tuserId = parseInt(userId);\r\n\r\n\t\t// \r\n\t\tthis._isTest = Boolean(isTest);\r\n\r\n\t\t// 用于日志追踪\r\n\t\tthis._logClues = '';\r\n\t\t\r\n\t\t// \r\n\t\tthis._logger = new Logger('3t-miniapp-sdk');\r\n\t\tthis._logger.setParameters({\r\n\t\t\tappId,\r\n\t\t\troomId   : '',\r\n\t\t\tuserId,\r\n\t\t\tlogClues : this._logClues\r\n\t\t});\r\n\r\n\t\tthis._logger.debug(`Client constructor() appId: ${appId} userId: ${userId}`);\r\n\t\t/* eslint-disable no-console */\r\n\t\t// console.log(`Client constructor() appId: ${appId} userId: ${userId} server: ${server}`);\r\n\t\t/* eslint-enable no-console */\r\n\r\n\t\t// connection id\r\n\t\tthis._sid = guid();\r\n\r\n\t\t// miniapp-au's address -- IP\r\n\t\t// \r\n\t\tthis._auAddress = '';\r\n\r\n\t\tthis._protooUrl = '';\r\n\r\n\t\t// 当前系统行为是否处于 挂起/暂停 状态\r\n\t\t// 当 网络off 时，挂起行为；当 网络on 时，恢复行为\r\n\t\tthis._suspend = false;\r\n\r\n\t\t// auth尝试 计数\r\n\t\tthis.attemptAuth = 0; \r\n\t\t// \r\n\t\tthis.authInterval = null;\r\n\r\n\t\t// \r\n\t\tthis.authTimeout = null;\r\n\r\n\t\t// 是否已完成 appId 认证\r\n\t\tthis._authOK = false;\r\n\r\n\t\t// SDK 库状态\r\n\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\r\n\t\t// 当前登录状态\r\n\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\r\n\r\n\t\t// protoo-client Peer instance.\r\n\t\t// @type {protooClient.Peer}\r\n\t\tthis._protooPeer = null;\r\n\r\n\t\t// 是否自定义 wss 端口\r\n\t\tthis._customPort = 0;\r\n\r\n\t\t// mediasoup-client Device instance.\r\n\t\t// @type {mediasoupClient.Device}\r\n\t\tthis._appId = '';\r\n\r\n\t\tthis._roomId = 0;\r\n\r\n\t\tthis._role = UR_PARTICIPANT; // 默认为普通用户\r\n\r\n\t\t// IPLocation\r\n\t\tthis._iploc = null;\r\n\r\n\t\t// IPLocation 是否已完成\r\n\t\tthis._iplocFin = false;\r\n\r\n\t\t// mediasoup Transport for sending.\r\n\t\t// @type {mediasoupClient.Transport}\r\n\t\tthis._userId = 0;\r\n\r\n\t\t// event handler\r\n\t\t// map :: event --> observer_func\r\n\t\t// observer_func 被初始化为 {}\r\n\t\t// 在初始化期间，我们已在 _eventObserver 中初始化了所有支持的 event\r\n\t\t// 在整个运行生命周期内，不允许对 _eventObserver 进行增删操作\r\n\t\tthis._eventObserver = new Map();\r\n\r\n\t\t// connectId 用于描述当前会话\r\n\t\t// 注：由 gateway 统一分配\r\n\t\tthis._connectId = '';\r\n\r\n\t\t// 心跳包序列号\r\n\t\tthis._sequenceNo = 1; // 暂以 1 为起始\r\n\r\n\t\t// 定时器句柄\r\n\t\tthis._hbTimer = null;\r\n\r\n\t\t// 最近一次收到心跳包的时戳\r\n\t\tthis._lastHBRecvTick = 0;\r\n\r\n\t\tthis._mapUsers = new Map();\r\n\r\n\t\t// \r\n\t\tthis._subscribes = new Map();\r\n\t}\r\n\r\n\tget sid()\r\n\t{\r\n\t\treturn this._sid;\r\n\t}\r\n\r\n\t/**\r\n\t * 从外部将 小程序 live-player，live-pusher 的媒体传输统计信息，通过日志平台记录下来\r\n\t * @param {Number} opts.code \r\n\t * @param {String} opts.type -- 类型 player : 拉流媒体状态；pusher : 推流媒体状态\r\n\t * @param {String} opts.userId -- 用户ID \r\n\t */\r\n\tmediaStat(code, type, userId, message)\r\n\t{\r\n\t\tthis._logger.debug(`{code:${code}, userId:${userId}, type:\"${type}\", media-state:${message} }`);\r\n\t}\r\n\r\n\t// \r\n\t// 内部私有函数\r\n\tresetEventObserver()\r\n\t{\r\n\t\tif (!this._eventObserver)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// session-status : 会话状态（控制层面）\r\n\t\tthis._eventObserver.set('session-status', () => {});\r\n\t\t// media-status : 媒体传输状态\r\n\t\tthis._eventObserver.set('media-status', () => {});\r\n\t\t// stream-added : 有流加入 -- publish\r\n\t\tthis._eventObserver.set('stream-added', () => {});\r\n\t\t// stream-removed : 有流移除 -- unpublish\r\n\t\tthis._eventObserver.set('stream-removed', () => {});\r\n\t\t// disconnected : 已断开 -- 上层在收到 'disconnected' 事件后，应调用 destroy\r\n\t\tthis._eventObserver.set('disconnected', () => {});\r\n\t\t// kickout : 被踢出\r\n\t\tthis._eventObserver.set('kickout', () => {});\r\n\t\tthis._eventObserver.set('update-url', () => {});\r\n\t\t// error : 有错误发生\r\n\t\tthis._eventObserver.set('error', () => {});\r\n\t\t// user-online : 有用户上线\r\n\t\tthis._eventObserver.set('user-online', () => {});\r\n\t\t// user-offline : 有用户下线\r\n\t\tthis._eventObserver.set('user-offline', () => {});\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化 Client 库，此接口为使用SDK的第一步\r\n\t * \r\n\t * @param {String} appId     -- \r\n\t * @param {String} userId    -- 用户ID -- 外部设定的ID，可以用于日志跟踪\r\n\t * @param {String} onSuccess -- onSuccess() init调用成功，回调 onSuccess\r\n\t * @param {String} onFailure -- onFailure(event) -- init调用失败，回调 onFailure，event 为错误信息\r\n\t * @param {Boolean} disAppAuth -- \r\n\t * @param {Boolean} disIploc --\r\n\t * @param {String} auServer --\r\n\t */\r\n\tasync init(appId, userId, onSuccess, onFailure, disAppAuth, disIploc, auServer)\r\n\t{\r\n\t\tif (!appId || !userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client init() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\t\tuserId = parseInt(userId);\r\n\r\n\t\tconst timestamp = Date.parse(new Date());\r\n\t\tconst randNum = Math.round(Math.random() * 1000000000);\r\n\r\n\t\t// \r\n\t\tthis._appId = appId;\r\n\t\tthis._userId = userId;\r\n\r\n\t\tthis._logClues = `${timestamp}-${randNum}`;\r\n\r\n\t\tthis._logger.debug(`Client API init() _logClues: ${this._logClues} parameters -- appId: ${appId} userId: ${userId} disAppAuth: ${disAppAuth} disIploc: ${disIploc} auServer: ${auServer}`);\r\n\t\t// \r\n\t\ttry\r\n\t\t{\r\n\t\t\t// 获取系统信息\r\n\t\t\twx.getSystemInfo({\r\n\t\t\t\tsuccess : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug(`SYS information: \\n  version  : ${res.version}\\n  system   : ${res.system}\\n  platform : ${res.platform}\\n  brand    : ${res.brand}  model    : ${res.model}`);\r\n\t\t\t\t},\r\n\t\t\t\tfail     : () => {},\r\n\t\t\t\tcomplete : () => {}\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\twx.onNetworkStatusChange((res) =>\r\n\t\t\t{\r\n\t\t\t\tthis._logger.debug(`wx.onNetworkStatusChange isConnected: ${res.isConnected} networkType: ${res.networkType}`);\r\n\t\t\t\t// 如果网络恢复，则 -- 更新 lastHBRecvTick\r\n\t\t\t\t// TODO : reconnect immediately ??\r\n\t\t\t\tif (res.isConnected) \r\n\t\t\t\t{\r\n\t\t\t\t\t// 网络 on\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis.resumeProcess();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t// 网络 off\r\n\t\t\t\t\t// TODO : 挂起所有行为\r\n\t\t\t\t\tthis.suspendProcess();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t}\r\n\r\n\t\t// \r\n\t\t// 首先判断状态\r\n\t\tif (this._sdkState !== C_SDK_STATE_IDLE)\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API init() failed. this._sdkState(${this._sdkState}) !== C_SDK_STATE_IDLE`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : `_sdkState(${C_SDK_STATE_IDLE}) is not C_SDK_STATE_IDLE`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 判断是否 数字\r\n\t\tif (!/^\\d+$/.test(userId))\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API init() failed. userId[${userId}] is not number.`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : `userId[${userId}] is not number`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// appId 验证\r\n\t\t// \r\n\t\tconst authProcPromise = new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tif (disAppAuth)\r\n\t\t\t{\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t/* eslint-disable no-undef */\r\n\t\t\t\twx.showLoading({\r\n\t\t\t\t\ttitle : 'appId auth',\r\n\t\t\t\t\tmask  : true\r\n\t\t\t\t});\r\n\t\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t\tthis.attemptAuth = 0;\r\n\r\n\t\t\t\tthis.doAppAuth(appId, resolve, reject);\r\n\r\n\t\t\t\t// 启动 auth 重试\r\n\t\t\t\tthis.authInterval = setInterval(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.doAppAuth(appId, resolve, reject);\r\n\t\t\t\t}, AUTH_INTERVAL);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst authTimerPromise = new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tconst tttEngine = this;\r\n\r\n\t\t\tthis.authTimeout = setTimeout(() =>\r\n\t\t\t{\r\n\t\t\t\tif (!tttEngine._authOK)\r\n\t\t\t\t{\r\n\t\t\t\t\treject({\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'appId auth timeout'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, 15000); // 默认超时为 15s\r\n\t\t});\r\n\r\n\t\tPromise.race([ authProcPromise, authTimerPromise ])\r\n\t\t\t.then(() =>\r\n\t\t\t{\r\n\t\t\t\t/* eslint-disable no-undef */\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t\t// \r\n\t\t\t\tif (Boolean(this.authInterval))\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(this.authInterval);\r\n\t\t\t\t}\r\n\t\t\t\tthis.authInterval = null;\r\n\r\n\t\t\t\t// 停止 竞赛定时器\r\n\t\t\t\tif (Boolean(this.authTimeout))\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(this.authTimeout);\r\n\t\t\t\t}\r\n\t\t\t\tthis.authTimeout = null;\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis._authOK = true;\r\n\r\n\t\t\t\t// 如果认证成功，则......\r\n\t\t\t\tthis._logger.warn('Client API init() appId auth success');\r\n\r\n\t\t\t\t// TODO : 进一步的业务逻辑\r\n\t\t\t\tthis._appId = appId;\r\n\t\t\t\tthis._userId = userId;\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis.resetEventObserver();\r\n\r\n\t\t\t\t// 用于测试：外部可以指定是否启用 IPLocation\r\n\t\t\t\tif (!disIploc)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.doIplocation(appId, userId, onSuccess, onFailure);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t// TODO : \r\n\t\t\t\t\tconst miniauHost = auServer || config.miniauHost;\r\n\t\t\t\t\tconst host = (this._customPort === 0) ? `${miniauHost}` : `${miniauHost}:${this._customPort}`;\r\n\r\n\t\t\t\t\tthis._protooUrl = `wss://${host}/miniappau/?appId=${appId}&sid=${this._sid}&userId=${userId}`;\r\n\r\n\t\t\t\t\treturn this.initProtoo(appId, userId, onSuccess, onFailure);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((event) =>\r\n\t\t\t{\r\n\t\t\t\t/* eslint-disable no-undef */\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t\t// \r\n\t\t\t\tif (Boolean(this.authInterval))\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(this.authInterval);\r\n\t\t\t\t}\r\n\t\t\t\tthis.authInterval = null;\r\n\r\n\t\t\t\t// 停止 竞赛定时器\r\n\t\t\t\tif (Boolean(this.authTimeout))\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(this.authTimeout);\r\n\t\t\t\t}\r\n\t\t\t\tthis.authTimeout = null;\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis._logger.warn(`Client API init() auth failed. event: ${JSON.stringify(event)}`);\r\n\r\n\t\t\t\tthis._authOK = false;\r\n\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\treason : `appId auth failed -- ${JSON.stringify(event)}`\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\t// 内部私有函数 -- 执行 appId auth\r\n\tdoAppAuth(appId, resolve, reject)\r\n\t{\r\n\t\t/* eslint-disable no-undef */\r\n\t\twx.hideLoading();\r\n\t\t/* eslint-enable no-undef */\r\n\t\t\r\n\t\t/* eslint-disable no-undef */\r\n\t\twx.showLoading({\r\n\t\t\ttitle : 'appId auth',\r\n\t\t\tmask  : true\r\n\t\t});\r\n\t\t/* eslint-enable no-undef */\r\n\r\n\t\tconst authUrl = `${config.authUrl}?appkey=${appId}`;\r\n\r\n\t\tthis.attemptAuth++;\r\n\r\n\t\tthis._logger.warn(`Client doAppAuth() appId auth request: ${authUrl} -- attemptAuth: ${this.attemptAuth}`);\r\n\r\n\t\tconst tttEngine = this;\r\n\r\n\t\twx.request({\r\n\t\t\turl     : authUrl,\r\n\t\t\tmethod  : 'GET',\r\n\t\t\tsuccess : (res) =>\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tlet authOK = false;\r\n\r\n\t\t\t\t// \r\n\t\t\t\tif (Boolean(res) && Boolean(res.data))\r\n\t\t\t\t{\r\n\t\t\t\t\ttttEngine._logger.debug(`Client doAppAuth() auth response: ${JSON.stringify(res)} code: ${res.data.code}`);\r\n\r\n\t\t\t\t\tauthOK = (res.data.code == 0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!authOK)\r\n\t\t\t\t{\r\n\t\t\t\t\ttttEngine._logger.warn('Client doAppAuth() auth failed.');\r\n\t\t\t\t\treject();\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail : (e) =>\r\n\t\t\t{\r\n\r\n\t\t\t\t// \r\n\t\t\t\tif (this.attemptAuth >= 3)\r\n\t\t\t\t{\r\n\t\t\t\t\t// \r\n\t\t\t\t\ttttEngine._logger.warn(`Client doAppAuth() auth FINAL FAILED -- wx.request : ${JSON.stringify(e)}`);\r\n\t\t\t\t\treject();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t// \r\n\t\t\t\t\ttttEngine._logger.warn(`Client doAppAuth() auth ${this.attemptAuth} failed -- wx.request : ${JSON.stringify(e)}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\t\r\n\t// 内部私有函数 -- \r\n\tdoIplocation(appId, userId, onSuccess, onFailure)\r\n\t{\r\n\t\tthis._iploc = new IPLocation({\r\n\t\t\tlogClues : this._logClues,\r\n\t\t\tsid      : this._sid\r\n\t\t});\r\n\t\t// \r\n\r\n\t\tif (Boolean(this._iploc))\r\n\t\t{\r\n\t\t\tthis._iplocFin = false;\r\n\r\n\t\t\tthis._iploc.on('auto-reconnecting', (event) =>\r\n\t\t\t{\r\n\t\t\t\tif (event.sid !== this._sid)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// Just a notice. Do not have to do anything.\r\n\t\t\t\t\r\n\t\t\t\tthis._logger.debug('Client iplocation auto-reconnecting.');\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis.notifySessionStatus({\r\n\t\t\t\t\tcode   : C_SS_AUTO_CONNECTING,\r\n\t\t\t\t\treason : 'iplocation auto-reconnecting'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t// 彻底失败(内部不再自动重连)\r\n\t\t\tthis._iploc.on('failed', (event) =>\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tif (event.sid !== this._sid)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t\tif (this._iplocFin)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t/* eslint-disable no-undef */\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t\tthis._logger.debug('Client iplocation failed.');\r\n\t\t\t\t// \r\n\t\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\treason : 'iplocation failed'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tthis._iploc.on('close', (event) =>\r\n\t\t\t{\r\n\t\t\t\tif (event.sid !== this._sid)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t\tif (this._iplocFin)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t/* eslint-disable no-undef */\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\t/* eslint-enable no-undef */\r\n\t\t\t});\r\n\r\n\t\t\t// 注：一定要确保 initProtoo 在 this._iploc 'ok' 时才执行\r\n\t\t\tthis._iploc.on('ok', (event) =>\r\n\t\t\t{\r\n\t\t\t\tif (event.sid !== this._sid)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._iplocFin = true;\r\n\r\n\t\t\t\tconst {\r\n\t\t\t\t\tauAccess\r\n\t\t\t\t} = event;\r\n\r\n\t\t\t\t/* eslint-disable no-undef */\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis._iploc.close();\r\n\r\n\t\t\t\t// 使用 IP location 分配的 miniapp-au\r\n\t\t\t\tconst host = (this._customPort === 0) ? `${auAccess}` : `${auAccess}:${this._customPort}`;\r\n\r\n\t\t\t\tthis._protooUrl = `wss://${host}/miniappau/?appId=${appId}&sid=${this._sid}&userId=${userId}`;\r\n\r\n\t\t\t\treturn this.initProtoo(appId, userId, onSuccess, onFailure);\r\n\t\t\t});\r\n\r\n\t\t\t/* eslint-disable no-undef */\r\n\t\t\twx.showLoading({\r\n\t\t\t\ttitle : 'iplocation',\r\n\t\t\t\tmask  : true\r\n\t\t\t});\r\n\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t// \r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tconst host = this._isTest ? `${config.ipLocationTest}` : `${config.ipLocation}`;\r\n\r\n\t\t\t\tthis._iploc.init({\r\n\t\t\t\t\turl    : (this._customPort === 0) ? `wss://${host}/iplocmini/` : `wss://${host}:${this._customPort}/iplocmini/`,\r\n\t\t\t\t\tappId  : this._appId,\r\n\t\t\t\t\tuserId : this._userId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcatch (e)\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\treason : 'iplocation invalid'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// \r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : 'iplocation invalid'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 内部私有函数 -- \r\n\t// 注：一定要确保 initProtoo 在 this._iploc 'ok' 时才执行\r\n\tinitProtoo(appId, userId, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!appId || !userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client initProtoo() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// \r\n\t\tthis._logger.debug(`Client initProtoo protooUrl: ${this._protooUrl}`);\r\n\r\n\t\t// \r\n\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\t\tthis._sdkState = C_SDK_STATE_INITING;\r\n\r\n\t\t/* eslint-disable no-undef */\r\n\t\twx.showLoading({\r\n\t\t\ttitle : 'login',\r\n\t\t\tmask  : true\r\n\t\t});\r\n\t\t/* eslint-enable no-undef */\r\n\r\n\t\tthis._protooPeer = new protooClient.Peer(this._protooUrl, this._logClues, this._logger);\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tthis._protooPeer.init();\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : error.message\r\n\t\t\t});\r\n\r\n\t\t\tthis._logger.debug('Client API init() failed.');\r\n\r\n\t\t\t// eslint-disable no-undef \r\n\t\t\twx.hideLoading();\r\n\t\t\t// eslint-enable no-undef \r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// open -- 连接已建立\r\n\t\tthis._protooPeer.on('open', (event) =>\r\n\t\t{\r\n\t\t\tconst {\r\n\t\t\t\tisRetry\r\n\t\t\t} = event;\r\n\r\n\t\t\t// \r\n\t\t\t// \r\n\t\t\tconst needCB = (this._sdkState === C_SDK_STATE_INITING);\r\n\r\n\t\t\t// \r\n\t\t\tthis._logger.debug(`Client protooClient.Peer event: [open]. isRetry: ${isRetry} this._joinState: ${this._joinState}`);\r\n\r\n\t\t\tthis._sdkState = C_SDK_STATE_INIT;\r\n\r\n\t\t\t// 通知上层：当前连接成功\r\n\t\t\tthis.notifySessionStatus({\r\n\t\t\t\tcode   : isRetry ? C_SS_RECONNECTED : C_SS_CONNECTED, // 连接成功\r\n\t\t\t\treason : '连接成功'\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client initProtoo() event[open] this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\tthis.resumeProcess();\r\n\r\n\t\t\t// 如果本次是重连成功，则若当前已 join ，则应自动 rejoin -- \r\n\t\t\tif (isRetry)\r\n\t\t\t{\r\n\t\t\t\tif (this._joinState === C_JOIN_STATE_ON)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.rejoin();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\t\t\r\n\t\t\t\t\tthis.join(\r\n\t\t\t\t\t\tthis._roomId,\r\n\t\t\t\t\t\tthis._userId,\r\n\t\t\t\t\t\t() => {},\r\n\t\t\t\t\t\t() => {},\r\n\t\t\t\t\t\ttrue);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn; // 无需执行后续的动作\r\n\t\t\t}\r\n\r\n\t\t\t// 回调\r\n\t\t\tif (needCB)\r\n\t\t\t{\r\n\t\t\t\tonSuccess({\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 通知：内部正在进行自动重连\r\n\t\tthis._protooPeer.on('auto-reconnecting', () =>\r\n\t\t{\r\n\t\t\t// 清空本地暂存用户列表\r\n\t\t\tif (Boolean(this._mapUsers))\r\n\t\t\t{\r\n\t\t\t\tthis._mapUsers.clear();\r\n\t\t\t}\r\n\r\n\t\t\t// 停止 ping/pong 定时器\r\n\t\t\tthis.stopHBTimer();\r\n\r\n\t\t\t// 需要更新 joinState，以免在 重连期间 又执行任何其他请求\r\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\t\t// \r\n\t\t\tthis._logger.debug('Client protooClient.Peer event: [auto-reconnecting]');\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client initProtoo() event[auto-reconnecting] this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\tthis.notifySessionStatus({\r\n\t\t\t\tcode   : C_SS_AUTO_CONNECTING, // 正在自动重连 -- 当前网络处于未连接状态，上层调用者应根据实际情况做逻辑处理\r\n\t\t\t\treason : 'protoo session [auto-reconnecting] -- 异常离线，正在自动重连'\r\n\t\t\t});\r\n\t\t\t// \r\n\r\n\t\t\t/* eslint-disable no-undef */\r\n\t\t\twx.showLoading({\r\n\t\t\t\ttitle : '正在自动重连',\r\n\t\t\t\tmask  : true\r\n\t\t\t});\r\n\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t});\r\n\r\n\t\t// 到 服务器 的连接，已彻底失败(内部不再自动重连)\r\n\t\tthis._protooPeer.on('failed', () =>\r\n\t\t{\r\n\t\t\tthis._logger.error('Client protooClient.Peer event: [failed]');\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client initProtoo() event[failed] this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\t// \r\n\t\t\tconst needCB = (this._sdkState === C_SDK_STATE_INITING);\r\n\r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\t\t/* eslint-disable no-undef */\r\n\t\t\twx.hideLoading();\r\n\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t// \r\n\t\t\tif (needCB)\r\n\t\t\t{\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 503,\r\n\t\t\t\t\treason : 'websocket connect failed'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Notify \r\n\t\t\t// \r\n\t\t\t// TODO : \r\n\t\t\tthis.notifyDisconnected();\r\n\t\t});\r\n\r\n\t\t// 到 服务器 的连接，已彻底断开(内部不再自动重连)\r\n\t\tthis._protooPeer.on('disconnected', () =>\r\n\t\t{\r\n\t\t\tthis._logger.error('Client protooClient.Peer event: [disconnected]');\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client initProtoo() event[disconnected] this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\t// \r\n\t\t\tconst needCB = (this._sdkState === C_SDK_STATE_INITING);\r\n\r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\t\tif (needCB)\r\n\t\t\t{\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 503,\r\n\t\t\t\t\treason : 'websocket disconnected'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.notifyDisconnected();\r\n\t\t});\r\n\r\n\t\tthis._protooPeer.on('close', (e) =>\r\n\t\t{\r\n\t\t\tthis._logger.error(`Client protooClient.Peer event: [close] code: ${e.code} reason: ${e.reason}`);\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client initProtoo() event[close] this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\tif (this._sdkState === C_SDK_STATE_IDLE)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\t\t\t// \r\n\t\t\t\r\n\t\t\tif (e.code === 4100)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('kickout'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._eventObserver.get('kickout')({\r\n\t\t\t\t\t\t\tuid    : this._userId,\r\n\t\t\t\t\t\t\treason : e.reason\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (err)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [close] -- notify [kickout] EXCEPTION -- ${JSON.stringify(err)}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Notify \r\n\t\t\tthis.notifySessionStatus({\r\n\t\t\t\tcode   : C_SS_FINAL_FAILED, // 已关闭，不再尝试自动重连\r\n\t\t\t\treason : 'protoo session [close]'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.notifyDisconnected();\r\n\t\t\t// \r\n\t\t});\r\n\r\n\t\t// eslint-disable-next-line no-unused-vars\r\n\t\tthis._protooPeer.on('request', async (request, accept, reject) =>\r\n\t\t{\r\n\t\t\tthis._logger.debug(\r\n\t\t\t\t'Client protooClient.Peer event: [request] [method: ',\r\n\t\t\t\trequest.method,\r\n\t\t\t\t'] data: ]',\r\n\t\t\t\trequest.data);\r\n\r\n\t\t\tswitch (request.method)\r\n\t\t\t{\r\n\t\t\t\tcase 'xxx':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\txxx,\r\n\t\t\t\t\t\tyyy,\r\n\t\t\t\t\t\tzzz\r\n\t\t\t\t\t} = request.data;\r\n\r\n\t\t\t\t\t// We are ready. Answer the protoo request.\r\n\t\t\t\t\taccept();\r\n\t\t\t\t\t// or\r\n\t\t\t\t\t// reject(403, 'some reason');\r\n\r\n\t\t\t\t\t// TODO\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._protooPeer.on('notification', (notification) =>\r\n\t\t{\r\n\t\t\tthis._logger.debug(\r\n\t\t\t\t'Client protooClient.Peer event: [notification] [method: ',\r\n\t\t\t\tnotification.method, ' data: ', notification.data, ']');\r\n\r\n\t\t\t// 更新 lastHBRecvTick\r\n\t\t\tthis._lastHBRecvTick = new Date().getTime();\r\n\r\n\t\t\tswitch (notification.method)\r\n\t\t\t{\r\n\t\t\t\tcase 'pong':\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug('Client protooClient.Peer [pong]');\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'user-online':\r\n\t\t\t\t{\r\n\t\t\t\t\t// TODO -- 是否考虑 对 notification 的 ACK ??\r\n\t\t\t\t\tconst userData = notification.data;\r\n\r\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [user-online] userData: ${JSON.stringify(userData)}`);\r\n\r\n\t\t\t\t\tthis.onUserEnter(userData);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'user-offline':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst uid = notification.data.userId;\r\n\r\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [user-offline] userId: ${uid}`);\r\n\r\n\t\t\t\t\tthis.onUserLeave(uid);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'publish':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst cid = notification.data.connectId;\t\t\t\t\t\r\n\t\t\t\t\tconst uid = notification.data.userId;\r\n\t\t\t\t\tconst url = notification.data.url;\r\n\r\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [publish] userId: ${uid} connectId: ${cid} url: ${url}`);\r\n\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('stream-added'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._eventObserver.get('stream-added')({\r\n\t\t\t\t\t\t\t\tcid,\r\n\t\t\t\t\t\t\t\tuid\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (e)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [notification publish] -- notify [stream-added] EXCEPTION -- ${JSON.stringify(e)}`);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'unpublish':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst uid = notification.data.userId;\r\n\t\t\t\t\tconst cid = notification.data.connectId;\r\n\r\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [unpublish] userId: ${uid}`);\r\n\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('stream-removed'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._eventObserver.get('stream-removed')({\r\n\t\t\t\t\t\t\t\tcid,\r\n\t\t\t\t\t\t\t\tuid\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (e)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [notification unpublish] -- notify [stream-removed] EXCEPTION -- ${JSON.stringify(e)}`);\r\n\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t// 自动将该路流 unsubscribe 掉\r\n\t\t\t\t\tif (this.isSubscribe(uid))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.unsubscribe({\r\n\t\t\t\t\t\t\tuserId    : uid,\r\n\t\t\t\t\t\t\tonSuccess : () => {},\r\n\t\t\t\t\t\t\tonFailure : () => {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcase 'kickout':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst uid = notification.data.userId;\r\n\t\t\t\t\tconst reason = notification.data.reason;\r\n\r\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [kickout] userId: ${uid} reason: ${reason}`);\r\n\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('kickout'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._eventObserver.get('kickout')({\r\n\t\t\t\t\t\t\t\tuid,\r\n\t\t\t\t\t\t\t\treason\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (e)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [notification kickout] -- notify [kickout] EXCEPTION -- ${JSON.stringify(e)}`);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.error(\r\n\t\t\t\t\t\t'Client unknown protoo notification.method [%s]', notification.method);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}); \r\n\t}\r\n\r\n\t// 内部私有函数\r\n\t// 恢复所有行为\r\n\tresumeProcess()\r\n\t{\r\n\t\tthis._lastHBRecvTick = new Date().getTime();\r\n\r\n\t\t// TODO : 恢复所有行为\r\n\r\n\t\tthis._suspend = false;\r\n\r\n\t\t// \r\n\t\tif (Boolean(this._protooPeer))\r\n\t\t{\r\n\t\t\tthis._protooPeer.resumeProcess();\r\n\t\t}\r\n\t}\r\n\r\n\t// 内部私有函数\r\n\t// 挂起所有行为\r\n\tsuspendProcess()\r\n\t{\r\n\t\tthis._suspend = true;\r\n\r\n\t\t// \r\n\t\tif (Boolean(this._protooPeer))\r\n\t\t{\r\n\t\t\tthis._protooPeer.suspendProcess();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * TTT Engine 销毁\r\n\t */\r\n\tdestroy()\r\n\t{\r\n\t\tthis.resetEventObserver();\r\n\t\t// \r\n\t\tthis._logger.debug(`Client API destroy() ${this._logClues} this._sdkState: ${this._sdkState}`);\r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_IDLE)\r\n\t\t{\r\n\t\t\tthis.leave(() => {}, () => {});\r\n\t\t}\r\n\r\n\t\t// 停止 heartbeat 定时器\r\n\t\tthis.stopHBTimer();\r\n\r\n\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\r\n\t\t/* eslint-disable no-undef */\r\n\t\twx.hideLoading();\r\n\t\t/* eslint-enable no-undef */\r\n\r\n\t\t// Close protoo Peer\r\n\t\tif (Boolean(this._protooPeer))\r\n\t\t\tthis._protooPeer.close();\r\n\t\tthis._protooPeer = null;\r\n\r\n\t\t// \r\n\t\tif (Boolean(this._iploc))\r\n\t\t\tthis._iploc.close();\r\n\t\tthis._iploc = null;\r\n\t}\r\n\r\n\t// 内部私有函数\r\n\tnotifySessionStatus(e)\r\n\t{\r\n\t\tif (!e)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {\r\n\t\t\tcode,\r\n\t\t\treason\r\n\t\t} = e;\r\n\r\n\t\t// \r\n\t\ttry\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client notifySessionStatus() -- code: ${code} reason: ${reason}`);\r\n\r\n\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('session-status'))\r\n\t\t\t{\r\n\t\t\t\tthis._eventObserver.get('session-status')({\r\n\t\t\t\t\tcode, // 正在重连\r\n\t\t\t\t\tuid    : this._userId,\r\n\t\t\t\t\tcid    : this._connectId,\r\n\t\t\t\t\tstatus : reason\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (err)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client notifySessionStatus() -- notify [session-status] EXCEPTION -- ${JSON.stringify(err)}`);\r\n\t\t}\r\n\t}\r\n\r\n\t// 内部私有函数\r\n\t// 向上层通知\r\n\tnotifyDisconnected()\r\n\t{\r\n\t\tsetTimeout(() =>\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis._logger.debug('Client notifyDisconnected() -- event[disconnected]');\r\n\r\n\t\t\t\t// 向上层调用者通知：disconnected\r\n\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('disconnected'))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._eventObserver.get('disconnected')();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (e)\r\n\t\t\t{\r\n\t\t\t\tthis._logger.warn(`Client notifyDisconnected() -- notify [disconnected] EXCEPTION -- ${JSON.stringify(e)}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {String} logLevel -- 取值范围\r\n\t *                             'LOG_NONE','LOG_ERROR','LOG_WARN','LOG_INFO','LOG_DEBUG','LOG_TRACE'\r\n\t */\r\n\tsetLogLevel(logLevel)\r\n\t{\r\n\t\tif (!this._logger)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._logger.logLevel = logLevel;\r\n\t}\r\n\r\n\t/**\r\n\t * 设置wss服务的自定义端口号\r\n\t * 需要在调用 init 之前调用\r\n\t * @param {Number} port\r\n\t * @param {*} callback \r\n\t */\r\n\tsetPort(port)\r\n\t{\r\n\t\tif (!port)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._customPort = parseInt(port);\r\n\r\n\t\tthis._logger.debug(`Client API setPort: ${this._customPort}`);\r\n\t}\r\n\r\n\t// \r\n\t// 注：要确保 -- on 一定要在 join 之前调用，以免 join 成功后，下层触发的 事件 不能及时投递给上层\r\n\t// on bind 事件监听回调函数\r\n\t// \r\n\t// 可监听如下事件（以及其所携带参数）：\r\n\t// 'session-status' -- { cid: connectId; uid: userId; status: String }\r\n\t// 'media-status'   -- { cid: connectId; uid: userId; status: object }\r\n\t// 'stream-added'   -- { cid: connectId; uid: userId }\r\n\t// 'stream-removed' -- { cid: connectId; uid: userId }\r\n\t// 'disconnected'   -- { uid: userId; reason: 说明 }\r\n\t// 'kickout'        -- { uid: userId; reason: *** }\r\n\t// 'update-url'     -- { cid: connectId; uid: userId; url: 更新后的 url }\r\n\t// 'error'          -- { cid: connectId; uid: userId; code: 错误码; reason: 详细说明 }\r\n\t// 'user-online'    -- { userId: 用户ID; role: 用户角色; ueType: 终端类型(小程序为9) }\r\n\t// 'user-offline'   -- userId: 用户ID\r\n\t// \r\n\t/**\r\n\t * \r\n\t * @param {String} event      -- 事件名\r\n\t * @param {Function} callback -- 响应函数名 \r\n\t */\r\n\ton(event, callback)\r\n\t{\r\n\t\t// \r\n\t\tif (!(this._eventObserver) || !event || typeof event !== 'string' || !callback || typeof callback !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API on() failed. parameters invalid. [event: ${event}]`);\r\n\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\t\r\n\t\t// 在初始化期间，我们已在 _eventObserver 中初始化了所有支持的 event\r\n\t\t// 若 _eventObserver MAP 中无此节点，则表明我们不支持，直接返回\r\n\t\t// \r\n\t\tif (!this._eventObserver.has(event))\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API on() failed. unsupported [event: ${event}]`);\r\n\r\n\t\t\treturn -2;\r\n\t\t}\r\n\r\n\t\tthis._logger.debug(`Client API on() success. [event: ${event}]`);\r\n\r\n\t\tthis._eventObserver.set(event, callback);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * 停止监控指定事件 -- 该事件再发生时，将不再向应用层通知\r\n\t * \r\n\t * @param event -- 事件名\r\n\t */\r\n\toff(event)\r\n\t{\r\n\t\tif (!(this._eventObserver) || !event || typeof event !== 'string')\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API off() failed. parameters invalid. [event: ${event}]`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this._eventObserver.has(event))\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API off() failed. unsupported [event: ${event}]`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._logger.debug(`Client API off() success. [event: ${event}]`);\r\n\r\n\t\tthis._eventObserver.set(event, () => {});\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\t// 内部私有函数 -- 启动心跳定时器\r\n\tstartHBTimer()\r\n\t{\r\n\t\tthis.stopHBTimer();\r\n\r\n\t\t// \r\n\t\tPromise.resolve()\r\n\t\t\t.then(async () =>\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tthis._lastHBRecvTick = new Date().getTime();\r\n\t\t\t\t\r\n\t\t\t\t// Start the timer for heartbeat\r\n\t\t\t\tthis._hbTimer = setInterval(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\t// \r\n\t\t\t\t\tif (this._suspend)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 如果已 挂起 ，则 不再执行心跳；也不再执行 超时判断\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this._joinState === C_JOIN_STATE_ON)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis._protooPeer.notify('ping', {\r\n\t\t\t\t\t\t\tsequenceNo : (this._sequenceNo++)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// \r\n\t\t\t\t\tconst currentTick = new Date().getTime();\r\n\r\n\t\t\t\t\t// \r\n\t\t\t\t\tif (currentTick - this._lastHBRecvTick >= (HB_INTERVAL * 12))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis._logger.error(`Client startHBTimer() no response. currentTick: ${currentTick} this._lastHBRecvTick: ${this._lastHBRecvTick}`);\r\n\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis.stopHBTimer();\r\n\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\t\t\t\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\t\t\t\t\t/* 不再执行 reconnect\r\n\t\t\t\t\t\t// TODO : ;\r\n\t\t\t\t\t\tsetTimeout(() =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._protooPeer.reconnect({\r\n\t\t\t\t\t\t\t\treason : 'hb timeout -- reconnect'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\tthis.notifySessionStatus({\r\n\t\t\t\t\t\t\tcode   : C_SS_FINAL_FAILED,\r\n\t\t\t\t\t\t\treason : '超时未收到任何消息，彻底断开'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.notifyDisconnected();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// \r\n\t\t\t\t}, HB_INTERVAL);\r\n\t\t\t})\r\n\t\t\t.catch((error) =>\r\n\t\t\t{\r\n\t\t\t\tthis._logger.error('Client startHBTimer() failed');\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t// 内部私有函数 -- \r\n\tstopHBTimer()\r\n\t{\r\n\t\t// 如果定时器已经启动，则先关闭\r\n\t\tif (Boolean(this._hbTimer))\r\n\t\t{\r\n\t\t\tclearInterval(this._hbTimer);\r\n\t\t\tthis._hbTimer = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 设置用户角色，目前仅支持在 join 前设置用户角色；且在用户已登录系统期间，不可更换\r\n\t * \r\n\t * @param {Int} role -- 用户角色\r\n\t *                           > 取值范围：\r\n\t *                           UR_CHAIRMAN = 1; // 主席\r\n\t *                           UR_PARTICIPANT = 2; // 普通用户\r\n\t *                           UR_AUDIENCE = 3; // 观众\r\n\t * @param {Function} onSuccess -- 成功时回调\r\n\t * @param {Function} onFailure -- 失败时回调\r\n\t */\r\n\tasync setRole(role, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!role || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client setRole() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API setRole() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (role !== UR_CHAIRMAN && role !== UR_PARTICIPANT && role !== UR_AUDIENCE)\r\n\t\t{\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : `Invalid role: ${role}`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tthis._role = role;\r\n\r\n\t\tthis._logger.debug(`Client API setRole() userRole: ${this._role}`);\r\n\r\n\t\t// \r\n\t\tonSuccess();\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\t// 适用场景：本端已 join 期间，断链，重连成功\r\n\tasync rejoin()\r\n\t{\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API rejoin() system suspend!!!');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._logger.debug(`Client rejoin [this._appId:${this._appId} this._roomId:${this._roomId} this._userId:${this._userId}]`);\r\n\t\t// \r\n\t\ttry\r\n\t\t{\r\n\t\t\t// 状态 : Joining\r\n\t\t\t// ???\r\n\t\t\tthis._joinState = C_JOIN_STATE_JOINING;\r\n\t\t\tthis._logger.warn(`Client rejoin this._joinState: ${this._joinState}`);\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `rejoin-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client rejoin() this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\t// Join now into the room.\r\n\t\t\t// NOTE: Don't send our RTP capabilities if we don't want to consume.\r\n\t\t\t\r\n\t\t\tconst joinRes = await this._protooPeer.request(\r\n\t\t\t\t'rejoin',\r\n\t\t\t\t{\r\n\t\t\t\t\tappId     : this._appId,\r\n\t\t\t\t\troomId    : this._roomId,\r\n\t\t\t\t\tuserId    : this._userId,\r\n\t\t\t\t\tconnectId : this._connectId,\r\n\t\t\t\t\trole      : this._role,\r\n\t\t\t\t\tappData   : '',\r\n\t\t\t\t\tlogClues  : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\t// TODO : \r\n\t\t\t// peers\r\n\t\t\tconst {\r\n\t\t\t\tcode,\r\n\t\t\t\treason\r\n\t\t\t} = joinRes;\r\n\r\n\t\t\tif (code == 404) // 该用户在服务器端并不存在，故可直接 join\r\n\t\t\t{\r\n\t\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\t\r\n\t\t\t\tthis.join(\r\n\t\t\t\t\tthis._roomId,\r\n\t\t\t\t\tthis._userId,\r\n\t\t\t\t\t() => {},\r\n\t\t\t\t\t() => {},\r\n\t\t\t\t\ttrue);\r\n\t\t\t}\r\n\t\t\telse if (code == 200) // 成功\r\n\t\t\t{\r\n\t\t\t\t// 状态\r\n\t\t\t\tthis._joinState = C_JOIN_STATE_ON;\r\n\t\r\n\t\t\t\t// 进入 C_JOIN_STATE_ON 状态，向服务器请求 更新当前room内的发布流，以便本端及时订阅\r\n\t\t\t\tthis._protooPeer.request('update-media', {});\r\n\r\n\t\t\t\tthis.notifySessionStatus({\r\n\t\t\t\t\tcode   : C_SS_REJOINED, // rejoin 成功\r\n\t\t\t\t\treason : 'rejoin 成功'\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis.startHBTimer();\r\n\t\t\t}\r\n\t\t\telse // 失败\r\n\t\t\t{\r\n\t\t\t\tthrow new Error({\r\n\t\t\t\t\tcode,\r\n\t\t\t\t\treason\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client rejoin failed. error: ', error);\r\n\r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\t\t// \r\n\t\t\tthis.notifySessionStatus({\r\n\t\t\t\tcode   : C_SS_FINAL_FAILED, // \r\n\t\t\t\treason : `rejoin 失败 -- ${JSON.stringify(error.reason)}`\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tthis.notifyDisconnected();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {String} roomId      -- 房间号\r\n\t * @param {String} userId      -- 用户ID\r\n\t * @param {Function} onSuccess -- 成功后回调\r\n\t *                                     > onSuccess 函数原型如下：\r\n\t *                                     onSuccess(opts){}\r\n\t *                                     其中 opts 参数详细如下：\r\n\t *                                     opts.connectId -- 该用户对应的 connectId\r\n\t *                                     opts.pushUrl   -- 该用户的 rtmp push url\r\n\t *                                     opts.peers     -- 房间内的用户列表\r\n\t * @param {Function} onFailure -- 失败后回调\r\n\t *                                     > onFailure 函数原型如下：\r\n\t *                                     onFailure(opts){}\r\n\t *                                     其中 opts 参数详细如下：\r\n\t *                                     opts.code   -- 错误码\r\n\t *                                     opts.reason -- 详细错误信息\r\n\t * \r\n\t */\r\n\tasync join(roomId, userId, onSuccess, onFailure, retry)\r\n\t{\r\n\t\tif (!roomId || !userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client join() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\troomId = parseInt(roomId);\r\n\t\tuserId = parseInt(userId);\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API join() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\t// 首先判断状态\r\n\t\tif (this._sdkState !== C_SDK_STATE_INIT)\r\n\t\t{\r\n\t\t\tthis._logger.warn('Client API join() failed. no-init.');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'Client is no-init'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 判断是否 数字\r\n\t\tif ((!/^\\d+$/.test(userId)) || (!/^\\d+$/.test(roomId)))\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API join() failed. roomId[${roomId}] or userId[${userId}] is not number.`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : `roomId[${roomId}] or userId[${userId}] is not number`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//\r\n\t\tthis._roomId = roomId;\r\n\t\t// logger 中需要登记 相关信息，用于日志中携带\r\n\t\tthis._logger.setParameters({\r\n\t\t\tappId    : this._appId,\r\n\t\t\troomId   : this._roomId,\r\n\t\t\tuserId   : this._userId,\r\n\t\t\tlogClues : this._logClues\r\n\t\t});\r\n\r\n\t\t// \r\n\t\tif (userId !== this._userId)\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API join() failed. parameters un-match: userId(${userId}) & this._userId(${this._userId})`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : '3t-miniapp join() Parameter mismatch'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//\r\n\t\tthis._roomId = roomId;\r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_IDLE)\r\n\t\t{\r\n\t\t\tthis._logger.debug(`Client API join() failed. error-state: this._joinState(${this._joinState})`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : this._joinState === C_JOIN_STATE_ON ? 'User is online.' : 'Join is processing...'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// 状态 : Joining\r\n\t\t\tthis._joinState = C_JOIN_STATE_JOINING;\r\n\r\n\t\t\t// \r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `join-${new Date().getTime()}`,\r\n\t\t\t\tdata : `Client join() this._joinState: ${this._joinState}`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\tthis._logger.debug(`Client API join() request. this._joinState: ${this._joinState}`);\r\n\r\n\t\t\t// Join now into the room.\r\n\t\t\t// NOTE: Don't send our RTP capabilities if we don't want to consume.\r\n\t\t\t\r\n\t\t\tconst joinRes = await this._protooPeer.request(\r\n\t\t\t\t'join',\r\n\t\t\t\t{\r\n\t\t\t\t\tappId    : this._appId,\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId   : this._userId,\r\n\t\t\t\t\trole     : this._role,\r\n\t\t\t\t\tappData  : '',\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\t/* eslint-disable no-undef */\r\n\t\t\twx.hideLoading();\r\n\t\t\t/* eslint-enable no-undef */\r\n\r\n\t\t\t// 状态\r\n\t\t\tthis._joinState = C_JOIN_STATE_ON;\r\n\r\n\t\t\t// 进入 C_JOIN_STATE_ON 状态，向服务器请求 更新当前room内的发布流，以便本端及时订阅\r\n\t\t\tthis._protooPeer.request('update-media', {});\r\n\r\n\t\t\tthis._logger.debug('Client API join() success. joinRes: ', joinRes);\r\n\t\t\t// \r\n\t\t\t// 收到的 response 的 data 内容示例如下：\r\n\t\t\t// {\r\n\t\t\t//     \"roomId\":9876000,\r\n\t\t\t//     \"userId\":9876333,\r\n\t\t\t//     \"role\":2,\r\n\t\t\t//     \"uetype\":6,\r\n\t\t\t//     \"connectId\":\"3d560c8b-a2d0-4539-96d1-c3d2c62e470d\",\r\n\t\t\t//     \"sessionId\":\"7a617c050c9641f9b66d87c7b2f35c18\",\r\n\t\t\t//     \"rtmpHost\":{\r\n\t\t\t//         \"pull\":\"rtmp://pull.3ttech.cn/sdk/3d560c8b-a2d0-4539-96d1-c3d2c62e470d\",\r\n\t\t\t//         \"push\":\"rtmp://push.3ttech.cn/sdk/3d560c8b-a2d0-4539-96d1-c3d2c62e470d\"\r\n\t\t\t//     },\r\n\t\t\t//     \"peers\":[\r\n\t\t\t//         {\r\n\t\t\t//             \"userId\":938495,\r\n\t\t\t//             \"roomId\":9876000,\r\n\t\t\t//             \"role\":1,\r\n\t\t\t//             \"connectId\":\"BC83A0BA-15B7-4B77-AE61-BFB8656298D2\",\r\n\t\t\t//             \"sessionId\":\"7a617c050c9641f9b66d87c7b2f35c18\"\r\n\t\t\t//         }\r\n\t\t\t//     ]\r\n\t\t\t// }\r\n\r\n\t\t\tconst {\r\n\t\t\t\tconnectId,\r\n\t\t\t\trtmpHost,\r\n\t\t\t\tpeers\r\n\t\t\t} = joinRes;\r\n\r\n\t\t\t// connectId 取自 join response.\r\n\t\t\tthis._connectId = connectId;\r\n\r\n\t\t\t// \r\n\t\t\tthis.startHBTimer();\r\n\t\t\t// \r\n\r\n\t\t\t// TODO : with peers ???\r\n\t\t\t// \r\n\t\t\tonSuccess({\r\n\t\t\t\tconnectId : this._connectId,\r\n\t\t\t\tpushUrl   : rtmpHost.push,\r\n\t\t\t\tpeers     : peers\r\n\t\t\t\t// ...\r\n\t\t\t\t// peers\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tthis.notifySessionStatus({\r\n\t\t\t\tcode   : !retry ? C_SS_JOINED : C_SS_REJOINED, // 连接成功\r\n\t\t\t\treason : 'join 成功'\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tif (Boolean(this._mapUsers))\r\n\t\t\t{\r\n\t\t\t\tthis._mapUsers.clear();\r\n\t\t\t}\r\n\t\t\t// \r\n\t\t\tfor (const peer of peers)\r\n\t\t\t{\r\n\t\t\t\tthis.onUserEnter(peer);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API join() failed. error: ', error);\r\n\r\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\r\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : error.message\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tthis.notifySessionStatus({\r\n\t\t\t\tcode   : C_SS_FINAL_FAILED,\r\n\t\t\t\treason : `join 失败 -- ${error.message}`\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tthis.notifyDisconnected();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 用户从系统中注销/退出\r\n\t * \r\n\t * @param {Function} onSuccess -- 成功时调用\r\n\t * @param {Function} onFailure -- 失败时调用\r\n\t */\r\n\tasync leave(onSuccess, onFailure)\r\n\t{\r\n\t\tif (typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client leave() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API leave() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\t// 首先判断状态\r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\t// \r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : 'User is not online'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tawait this._protooPeer.request(\r\n\t\t\t\t'leave',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId    : this._roomId,\r\n\t\t\t\t\tuserId    : this._userId,\r\n\t\t\t\t\tconnectId : this._connectId,\r\n\t\t\t\t\tlogClues  : this._logClues\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API leave() failed. error: ', error);\r\n\t\t}\r\n\t\t//\r\n\t\tthis._joinState = C_JOIN_STATE_IDLE;\r\n\r\n\t\tthis._logger.debug('Client API leave() success.');\r\n\r\n\t\tonSuccess();\r\n\t}\r\n\r\n\t/**\r\n\t * 用户发布自身流\r\n\t * \r\n\t * @param {Function} onSuccess -- 成功时调用\r\n\t *                                     > onSuccess 函数原型如下：\r\n\t *                                     onSuccess(opts){}\r\n\t *                                     其中 opts 参数详细如下：\r\n\t *                                     opts.connectId -- 该用户对应的 connectId\r\n\t *                                     opts.url       -- 该用户的 rtmp push url\r\n\t * @param {Function} onFailure -- 失败时调用\r\n\t *                                     > onFailure 函数原型如下：\r\n\t *                                     onFailure(opts){}\r\n\t *                                     其中 opts 参数详细如下：\r\n\t *                                     opts.code   -- 错误码\r\n\t *                                     opts.reason -- 详细错误信息\r\n\t * @param {Boolen} isUpdate    -- 是否为刷新型publish\r\n\t *                                  -- 场景：当前 客户端 publish 状态下断网重连成功，此时可以 isUpdate = true\r\n\t */\r\n\tasync publish(onSuccess, onFailure, isUpdate)\r\n\t{\r\n\t\tif (typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client publish() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API publish() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API publish() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\t\t\t// \r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : 'User is not online'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// TODO : 未来再考虑进行状态判断\r\n\t\t/*\r\n\t\tif (this._publishState !== C_PUBLISH_STATE_IDLE && !isUpdate)\r\n\t\t{\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : `当前 publish 状态为 ${this._publishState}`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\t// \r\n\t\tthis._publishState = C_PUBLISH_STATE_ING;\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// request 示例如下：\r\n\t\t\t// {\r\n\t\t\t//     \"roomId\":\"1\",\r\n\t\t\t//     \"userId\":\"9876333\",\r\n\t\t\t//     \"connectId\":\"06cad4ef-afda-4429-9e8a-c7b63b7c6d77\"\r\n\t\t\t// }\r\n\t\t\t// \r\n\t\t\t// send request to server.\r\n\t\t\tconst publishResp = await this._protooPeer.request(\r\n\t\t\t\t'publish',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId   : this._userId,\r\n\t\t\t\t\tisUpdate : !isUpdate ? false : true,\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\t// 收到的 response 的 data 的内容示例如下：\r\n\t\t\t// {\r\n\t\t\t//     \"url\":\"rtmp://push.3ttech.cn/sdk/9876333\"\r\n\t\t\t// }\r\n\r\n\t\t\t// TODO : check the 'code' field. -- 200 is success\r\n\t\t\t// \r\n\t\t\t// const code = publishResp.code\r\n\r\n\t\t\tconst cid = this._connectId; // TEMP publishResp.connectId;\r\n\t\t\tconst url = publishResp.url;\r\n\r\n\t\t\t// TODO : 未来考虑 isURL 对 url 进行合法判断\r\n\t\t\tif (cid !== this._connectId/* || !isURL(url)*/)\r\n\t\t\t{\r\n\t\t\t\tthis._logger.debug(`Client API publish() failed. Response data invalid: ${cid} ${this._connectId} ${url}`);\r\n\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 400,\r\n\t\t\t\t\treason : `Response data invalid: ${cid} ${this._connectId} ${url}`\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._publishState = C_PUBLISH_STATE_ON;\r\n\r\n\t\t\t\tthis._logger.debug('Client API publish() success. publishResp: ', publishResp);\r\n\r\n\t\t\t\tonSuccess({\r\n\t\t\t\t\tconnectId : cid,\r\n\t\t\t\t\turl       : url\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API publish() failed. error: ', error);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : error.message\r\n\t\t\t});\r\n\r\n\t\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tasync unpublish(onSuccess, onFailure)\r\n\t{\r\n\t\tif (typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client unpublish() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tif (this._publishState !== C_PUBLISH_STATE_ON)\r\n\t\t{\r\n\t\t\t//\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : `当前 publish 状态为 ${this._publishState}`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\r\n\r\n\t\tonSuccess();\r\n\r\n\t\t// to server\r\n\t\t// \r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API unpublish() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\ttry\r\n\t\t{\r\n\t\t\tawait this._protooPeer.request(\r\n\t\t\t\t'unpublish',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId   : this._userId,\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\tthis._logger.debug('Client API unpublish() success.');\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API unpublish() failed. error: ', error);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 用户订阅指定用户流\r\n\t * \r\n\t * @param {String} userId      -- 媒体流源用户ID\r\n\t * @param {Function} onSuccess -- 成功时调用\r\n\t *                                     > onSuccess 函数原型如下：\r\n\t *                                     onSuccess(opts){}\r\n\t *                                     其中 opts 参数详细如下：\r\n\t *                                     opts.userId    -- 该用户的 userId\r\n\t *                                     opts.connectId -- 该用户对应的 connectId\r\n\t *                                     opts.url       -- 该用户的 rtmp push url\r\n\t *                                     opts.rotation  -- 视频旋转角度\r\n\t * @param {Function} onFailure -- 失败时调用\r\n\t *                                     > onFailure 函数原型如下：\r\n\t *                                     onFailure(opts){}\r\n\t *                                     其中 opts 参数详细如下：\r\n\t *                                     opts.code   -- 错误码\r\n\t *                                     opts.reason -- 详细错误信息\r\n\t * @param {Boolen} isUpdate    -- 是否为刷新型 subscribe\r\n\t *                                  -- 场景：当前 客户端 subscribe 状态下断网重连成功，此时可以 isUpdate = true\t */\r\n\tasync subscribe(userId, onSuccess, onFailure, isUpdate)\r\n\t{\r\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client subscribe() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API subscribe() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API subscribe() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : 'User is not online'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// \r\n\t\t\t// send request to server.\r\n\t\t\tconst subscribeResp = await this._protooPeer.request(\r\n\t\t\t\t'subscribe',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId,\r\n\t\t\t\t\tisUpdate : !isUpdate ? false : true,\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\tconst uid = subscribeResp.userId;\r\n\t\t\tconst cid = subscribeResp.connectId;\r\n\t\t\tconst url = subscribeResp.url;\r\n\r\n\t\t\t// \r\n\t\t\t// local store\r\n\t\t\tthis.onSubscribe(uid, url);\r\n\r\n\t\t\tthis._logger.debug(`Client API subscribe() success. subscribeResp: ${subscribeResp} uid: ${uid} cid: ${cid} url: ${url}`);\r\n\r\n\t\t\t/*\r\n\t\t\t// TODO : 未来考虑 isURL 对 url 进行合法判断\r\n\t\t\tif (!isURL(url))\r\n\t\t\t{\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 400,\r\n\t\t\t\t\treason : `Response data invalid: ${url}`\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse \r\n\t\t\t*/\r\n\t\t\tonSuccess({\r\n\t\t\t\tuserId    : uid,\r\n\t\t\t\tconnectId : cid,\r\n\t\t\t\turl       : url,\r\n\t\t\t\trotation  : 0\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API subscribe() failed. error: ', error);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : error.message\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 用户订阅指定用户流\r\n\t * \r\n\t * @param {String} userId      -- 媒体流源用户ID\r\n\t * @param {Function} onSuccess -- 成功时调用\r\n\t *                                     > onSuccess 函数原型如下：\r\n\t *                                     onSuccess(){} -- 无参数\r\n\t * @param {Function} onFailure -- 失败时调用\r\n\t *                                     > onFailure 函数原型如下：\r\n\t *                                     onFailure(){} -- 无参数\r\n\t */\r\n\tasync unsubscribe(userId, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client unsubscribe() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API unsubscribe() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\t// update local store\r\n\t\tthis.onUnsubscribe(userId);\r\n\r\n\t\tonSuccess();\r\n\r\n\t\t// to server\r\n\t\t// \r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API unsubscribe() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tawait this._protooPeer.request(\r\n\t\t\t\t'unsubscribe',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId   : userId,\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\tthis._logger.debug('Client API unsubscribe() success.');\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API unsubscribe() failed. error: ', error);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t// TODO : mute 为本地不再播放指定的远端流 --- 可以采用设置 live-player 标签的方式来处理\r\n\t/**\r\n\t * 停止接收指定用户的流\r\n\t * @param {String} userId   -- 停止接收该用户的流\r\n\t */\r\n\tasync mute(userId, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client mute() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API mute() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tif (!this.isSubscribe(parseInt(userId)))\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API mute() I havent subscribe ${userId}`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\t// update local store\r\n\t\t// this.onUnsubscribe(userId);\r\n\r\n\t\tonSuccess();\r\n\r\n\t\t// to server\r\n\t\t// \r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API mute() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tawait this._protooPeer.request(\r\n\t\t\t\t'unsubscribe',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId   : userId,\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\tthis._logger.debug('Client API mute() success.');\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API mute() failed. error: ', error);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tasync unmute(userId, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client unmute() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API unmute() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\t// \r\n\t\tif (!this.isSubscribe(parseInt(userId)))\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API unmute() I havent subscribe ${userId}`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API unmute() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : 'User is not online'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// \r\n\t\t\t// send request to server.\r\n\t\t\tconst subscribeResp = await this._protooPeer.request(\r\n\t\t\t\t'subscribe',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId,\r\n\t\t\t\t\tisUpdate : true,\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\tthis._logger.debug('Client API unmute() success.');\r\n\r\n\t\t\tonSuccess();\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API unmute() failed. error: ', error);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : error.message\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n     * set sei\r\n     * @param {String} userId      -- 被操作的 userId\r\n     * @param {Int} opType         -- 1 : add; 0 : remove\r\n     * @param {Any} sei            -- video layout，有上层定义，需要符合我们的 SEI 格式\r\n\t * @param {Function} onSuccess -- 成功时调用\r\n\t *                                     > onSuccess 函数原型如下：\r\n\t *                                     onSuccess(){} -- 无参数\r\n\t * @param {Function} onFailure -- 失败时调用\r\n\t *                                     > onFailure 函数原型如下：\r\n\t *                                     onFailure(){} -- 无参数\r\n     */\r\n\tasync setSEI(userId, opType, sei, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!userId || !sei || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client setSEI() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API setSEI() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// \r\n\r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API setSEI() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : 'User is not online'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._role !== UR_CHAIRMAN)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API setSEI() failed. You are not master in the room');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 403,\r\n\t\t\t\treason : 'Not Master. Forbidden.'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mixerUser = {\r\n\t\t\troomId : this._roomId,\r\n\t\t\tuserId : `${userId}`,\r\n\t\t\tdevId  : `${userId}` // 目前对于小程序而言，以 userId 作为 devId\r\n\t\t};\r\n\r\n\t\tPromise.resolve()\r\n\t\t\t.then(async () =>\r\n\t\t\t{\r\n\t\t\t\t/* TEMP\r\n\t\t\t\tlet opCode = '';\r\n\r\n\t\t\t\tif (opType === 1)\r\n\t\t\t\t{\r\n\t\t\t\t\t// add \r\n\t\t\t\t\tthis._logger.debug('add-mixer-user', mixerUser);\r\n\t\t\t\t\topCode = 'add-mixer-user';\r\n\t\t\t\t}\r\n\t\t\t\telse if (opType === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\t// remove\r\n\t\t\t\t\tthis._logger.debug('del-mixer-user', mixerUser);\r\n\t\t\t\t\topCode = 'del-mixer-user';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// \r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tawait this._protooPeer.request(opCode, mixerUser);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (error)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.error('Client API setSEI() request [', opCode, '] failed. error: ', error);\r\n\r\n\t\t\t\t\tPromise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t})\r\n\t\t\t.then(async () =>\r\n\t\t\t{\r\n\t\t\t\tthis._logger.debug('set-sei', sei);\r\n\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tawait this._protooPeer.request(\r\n\t\t\t\t\t\t'set-sei',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\t\t\tuserId   : `${userId}`,\t\t\t\t\r\n\t\t\t\t\t\t\tsei      : sei,\r\n\t\t\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t// \r\n\r\n\t\t\t\t\tonSuccess();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (error)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.error('Client API setSEI() request [set-sei] failed. error: ', error);\r\n\r\n\t\t\t\t\tPromise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) =>\r\n\t\t\t{\r\n\t\t\t\tthis._logger.error(`Client API setSEI() failed. error: ${JSON.stringify(error)}`);\r\n\r\n\t\t\t\tonFailure({\r\n\t\t\t\t\tcode   : 1009,\r\n\t\t\t\t\treason : 'setSEI failed'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n     * kickout peer.\r\n     * @param {string} peerName \r\n     */\r\n\tasync kickout(userId, onSuccess, onFailure)\r\n\t{\r\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\r\n\t\t{\r\n\t\t\tthis._logger.error('Client kickout() error. invalid parameters');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('Client API kickout() system suspend!!!');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 400,\r\n\t\t\t\treason : 'system suspend'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tif (this._role !== UR_CHAIRMAN)\r\n\t\t{\r\n\t\t\tthis._logger.warn('Client API kickout() failed. Not Master, forbidden.');\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 403,\r\n\t\t\t\treason : 'Not Master. Forbidden.'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// to server\r\n\t\t// \r\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client API kickout() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 1009,\r\n\t\t\t\treason : 'User is not online'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\ttry\r\n\t\t{\r\n\t\t\tawait this._protooPeer.request(\r\n\t\t\t\t'kickout',\r\n\t\t\t\t{\r\n\t\t\t\t\troomId   : this._roomId,\r\n\t\t\t\t\tuserId   : userId,\r\n\t\t\t\t\treason   : 'Master kickout',\r\n\t\t\t\t\tlogClues : this._logClues\r\n\t\t\t\t});\r\n\r\n\t\t\tonSuccess();\r\n\r\n\t\t\tthis._logger.warn('Client API kickout() success.');\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error('Client API kickout() failed. error: ', error);\r\n\r\n\t\t\tonFailure({\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : error.message\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t// 内部私有函数 -- 是否已订阅指定用户(userId)\r\n\t/**\r\n\t * @param {Number} userId\r\n\t */\r\n\tisSubscribe(userId)\r\n\t{\r\n\t\tif (Boolean(this._subscribes))\r\n\t\t{\r\n\t\t\treturn this._subscribes.has(userId);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// 内部私有函数 -- 用户(userId)已订阅，url\r\n\tonSubscribe(userId, url)\r\n\t{\r\n\t\tif (Boolean(this._subscribes))\r\n\t\t{\r\n\t\t\tthis._subscribes.set(userId, url);\r\n\t\t}\r\n\t}\r\n\r\n\t// 内部私有函数 -- 用户(userId)已取消订阅\r\n\tonUnsubscribe(userId)\r\n\t{\r\n\t\tif (Boolean(this._subscribes))\r\n\t\t{\r\n\t\t\tthis._subscribes.delete(userId);\r\n\t\t}\r\n\t}\r\n\r\n\t// 内部私有函数 -- 用户已进入房间\r\n\tonUserEnter(userdata)\r\n\t{\r\n\t\tif (Boolean(this._mapUsers))\r\n\t\t{\r\n\t\t\tthis._mapUsers.set(userdata.userId, userdata);\r\n\t\t}\r\n\r\n\t\t//\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// 向上层调用者通知：disconnected\r\n\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('user-online'))\r\n\t\t\t{\r\n\t\t\t\tthis._eventObserver.get('user-online')(userdata);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client onUserEnter -- notify [user-online] EXCEPTION -- ${JSON.stringify(e)}`);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// 内部私有函数 -- 用户(uerId)已离开房间\r\n\tonUserLeave(userId)\r\n\t{\r\n\t\tif (Boolean(this._mapUsers))\r\n\t\t{\r\n\t\t\tthis._mapUsers.delete(userId);\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// 向上层调用者通知：disconnected\r\n\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('user-offline'))\r\n\t\t\t{\r\n\t\t\t\tthis._eventObserver.get('user-offline')(userId);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`Client onUserLeave -- notify [user-offline] EXCEPTION -- ${JSON.stringify(e)}`);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport {\r\n\tClient,\r\n\tTTTLog\r\n};\r\n","module.exports = {\r\n\tlogserverUrl   : 'https://log4websdk.3ttech.cn/webSdk/putInfo',\r\n\tlogserverUrl2  : 'https://api3tclass.3ttech.cn/edu/exception',\r\n\t// The authorization server address. server support JSONP callback.\r\n\tauthUrl        : 'https://apiusercenter.3ttech.cn/authority.php',\r\n\tminiauHost     : 'stech.3ttech.cn',\r\n\tipLocationTest : 'stech.3ttech.cn', // 'wss://websdkv2a.3ttech.cn' // \r\n\tipLocation     : 'webdispatch.3ttech.cn'// 'shenzhen1.3ttech.cn'\r\n};\r\n","import { version } from '../package.json';\r\nimport { Client, TTTLog } from './3t-miniapp.js';\r\n\r\nfunction getVersion()\r\n{\r\n\treturn version;\r\n}\r\n\r\nexport {\r\n\tgetVersion,\r\n\tClient,\r\n\tTTTLog\r\n};\r\n","const Logger = require('../utils/Logger.js');\r\n\r\nconst logger = new Logger('Message');\r\n\r\nclass Message\r\n{\r\n\tstatic parse(raw)\r\n\t{\r\n\t\tlet object;\r\n\t\tconst message = {};\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tobject = JSON.parse(raw);\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tlogger.error('parse() raw: ', raw, ' | invalid JSON: ', error);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (typeof object !== 'object' || Array.isArray(object))\r\n\t\t{\r\n\t\t\tlogger.error('parse() raw: ', raw, ' | not an object');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Request.\r\n\t\tif (object.request)\r\n\t\t{\r\n\t\t\tmessage.request = true;\r\n\r\n\t\t\tif (typeof object.method !== 'string')\r\n\t\t\t{\r\n\t\t\t\tlogger.error('parse() | missing/invalid method field');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof object.id !== 'number')\r\n\t\t\t{\r\n\t\t\t\tlogger.error('parse() | missing/invalid id field');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmessage.id = object.id;\r\n\t\t\tmessage.method = object.method;\r\n\t\t\tmessage.data = object.data || {};\r\n\t\t}\r\n\t\t// Response.\r\n\t\telse if (object.response)\r\n\t\t{\r\n\t\t\tmessage.response = true;\r\n\r\n\t\t\tif (typeof object.id !== 'number')\r\n\t\t\t{\r\n\t\t\t\tlogger.error('parse() | missing/invalid id field');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmessage.id = object.id;\r\n\r\n\t\t\t// Success.\r\n\t\t\tif (object.ok)\r\n\t\t\t{\r\n\t\t\t\tmessage.ok = true;\r\n\t\t\t\tmessage.data = object.data || {};\r\n\t\t\t}\r\n\t\t\t// Error.\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tmessage.ok = false;\r\n\t\t\t\tmessage.errorCode = object.errorCode;\r\n\t\t\t\tmessage.errorReason = object.errorReason;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Notification.\r\n\t\telse if (object.notification)\r\n\t\t{\r\n\t\t\tmessage.notification = true;\r\n\r\n\t\t\tif (typeof object.method !== 'string')\r\n\t\t\t{\r\n\t\t\t\tlogger.error('parse() | missing/invalid method field');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmessage.method = object.method;\r\n\t\t\tmessage.data = object.data || {};\r\n\t\t}\r\n\t\t// Invalid.\r\n\t\telse\r\n\t\t{\r\n\t\t\tlogger.error('parse() | missing request/response field');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn message;\r\n\t}\r\n\r\n\tstatic randomNum()\r\n\t{\r\n\t\treturn Math.round(Math.random() * 10000000);\r\n\t}\r\n\r\n\tstatic createRequest(method, data)\r\n\t{\r\n\t\tconst request =\r\n\t\t{\r\n\t\t\trequest : true,\r\n\t\t\tid      : Message.randomNum(), // generateRandomNumber(),\r\n\t\t\tmethod  : method,\r\n\t\t\tdata    : data || {}\r\n\t\t};\r\n\r\n\t\treturn request;\r\n\t}\r\n\r\n\tstatic createSuccessResponse(request, data)\r\n\t{\r\n\t\tconst response =\r\n\t\t{\r\n\t\t\tresponse : true,\r\n\t\t\tid       : request.id,\r\n\t\t\tok       : true,\r\n\t\t\tdata     : data || {}\r\n\t\t};\r\n\r\n\t\treturn response;\r\n\t}\r\n\r\n\tstatic createErrorResponse(request, errorCode, errorReason)\r\n\t{\r\n\t\tconst response =\r\n\t\t{\r\n\t\t\tresponse    : true,\r\n\t\t\tid          : request.id,\r\n\t\t\tok          : false,\r\n\t\t\terrorCode   : errorCode,\r\n\t\t\terrorReason : errorReason\r\n\t\t};\r\n\r\n\t\treturn response;\r\n\t}\r\n\r\n\tstatic createNotification(method, data)\r\n\t{\r\n\t\tconst notification =\r\n\t\t{\r\n\t\t\tnotification : true,\r\n\t\t\tmethod       : method,\r\n\t\t\tdata         : data || {}\r\n\t\t};\r\n\r\n\t\treturn notification;\r\n\t}\r\n}\r\n\r\nmodule.exports = Message;\r\n","const Logger = require('../utils/Logger.js');\r\nconst EnhancedEventEmitter = require('../utils/EnhancedEventEmitter.js');\r\nconst Message = require('./Message.js');\r\nconst WebSocketTransport = require('./transports/WebSocketTransport.js');\r\n\r\nimport regeneratorRuntime from '../thirdparty/runtime.js';\r\nimport { stringify } from 'querystring';\r\n\r\nclass Peer extends EnhancedEventEmitter\r\n{\r\n\t/**\r\n\t * @param {String} protooUrl -- url\r\n\t * @param {String} logClues -- 日志追踪用\r\n\t *\r\n\t * @emits open\r\n\t * @emits {currentAttempt: Number} failed\r\n\t * @emits disconnected\r\n\t * @emits close\r\n\t * @emits {request: protoo.Request, accept: Function, reject: Function} request\r\n\t * @emits {notification: protoo.Notification} notification\r\n\t */\r\n\tconstructor(protooUrl, logClues, logger)\r\n\t{\r\n\t\tsuper(logger);\r\n\r\n\t\t// \r\n\t\tthis._logger = logger || new Logger('Peer');\r\n\t\tthis._logger.prefix = '-';\r\n\r\n\t\t// 日志追踪用\r\n\t\tthis._logClues = logClues;\r\n\r\n\t\t// Closed flag.\r\n\t\t// @type {Boolean}\r\n\t\tthis._closed = false;\r\n\r\n\t\t// Transport.\r\n\t\t// @type {protoo.Transport}\r\n\t\tthis._transport = null;\r\n\r\n\t\t// Connected flag.\r\n\t\t// @type {Boolean}\r\n\t\tthis._connected = false;\r\n\r\n\t\t// Custom data object.\r\n\t\t// @type {Object}\r\n\t\tthis._data = {};\r\n\r\n\t\t// Map of pending sent request objects indexed by request id.\r\n\t\t// @type {Map<Number, Object>}\r\n\t\tthis._sents = new Map();\r\n\r\n\t\t// \r\n\t\tthis._protooUrl = protooUrl;\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tthis._transport = new WebSocketTransport(\r\n\t\t\tthis._protooUrl,\r\n\t\t\tthis._logClues,\r\n\t\t\tthis._logger,\r\n\t\t\tnull);\r\n\r\n\t\tthis._transport.init();\r\n\r\n\t\t// ws 已连接\r\n\t\tthis._transport.on('open', (event) =>\r\n\t\t{\r\n\t\t\tif (this._closed)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tconst {\r\n\t\t\t\tisRetry\r\n\t\t\t} = event;\r\n\t\t\t\r\n\t\t\tthis._connected = true;\r\n\r\n\t\t\tthis.safeEmit('open', {\r\n\t\t\t\tisRetry\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// 下层正在尝试重连\r\n\t\tthis._transport.on('auto-reconnecting', () =>\r\n\t\t{\r\n\t\t\tif (this._closed)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._connected = false;\r\n\r\n\t\t\tthis.safeEmit('auto-reconnecting');\r\n\t\t});\r\n\r\n\t\t// ws 连接已失败/断开 -- 得到该事件，表明N次重连彻底失败了\r\n\t\tthis._transport.on('failed', () =>\r\n\t\t{\r\n\t\t\tif (this._closed)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// 无需在此执行 closeTransport -- 在 WebsocketTransport 内部，触发 failed 时，已经执行了close\r\n\t\t\t// this.closeTransport();\r\n\t\t\tthis._connected = false;\r\n\r\n\t\t\tthis.safeEmit('failed');\r\n\t\t});\r\n\r\n\t\t// ws 连接已断开 -- 且内部不再执行自动重连\r\n\t\tthis._transport.on('close', (e) =>\r\n\t\t{\r\n\t\t\tif (this._closed)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// 无需在此执行 closeTransport -- 在 WebsocketTransport 内部，触发 failed 时，已经执行了close\r\n\t\t\t// this.closeTransport();\r\n\t\t\tthis._connected = false;\r\n\r\n\t\t\tthis.safeEmit('close', e);\r\n\t\t});\r\n\r\n\t\t// 参数 message 为 Object 类型 -- 已 JSON.parse(raw) 处理\r\n\t\tthis._transport.on('message', (event) =>\r\n\t\t{\r\n\t\t\tconst {\r\n\t\t\t\tmessage\r\n\t\t\t} = event;\r\n\r\n\t\t\tif (message.request)\r\n\t\t\t{\r\n\t\t\t\tthis._handleRequest(message);\r\n\t\t\t}\r\n\t\t\telse if (message.response)\r\n\t\t\t{\r\n\t\t\t\tthis._handleResponse(message);\r\n\t\t\t}\r\n\t\t\telse if (message.notification)\r\n\t\t\t{\r\n\t\t\t\tthis._handleNotification(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Whether the Peer is closed.\r\n\t *\r\n\t * @returns {Boolean}\r\n\t */\r\n\tget closed()\r\n\t{\r\n\t\treturn this._closed;\r\n\t}\r\n\r\n\t/**\r\n\t * Whether the Peer is connected.\r\n\t *\r\n\t * @returns {Boolean}\r\n\t */\r\n\tget connected()\r\n\t{\r\n\t\treturn this._connected;\r\n\t}\r\n\r\n\t/**\r\n\t * App custom data.\r\n\t *\r\n\t * @returns {Object}\r\n\t */\r\n\tget data()\r\n\t{\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\t/**\r\n\t * Invalid setter.\r\n\t */\r\n\tset data(data) // eslint-disable-line no-unused-vars\r\n\t{\r\n\t\tthrow new Error('cannot override data object');\r\n\t}\r\n\r\n\t// 内部函数\r\n\tcloseTransport(e)\r\n\t{\r\n\t\tthis._connected = false;\r\n\r\n\t\t// Close Transport.\r\n\t\tthis._transport.close(e);\r\n\r\n\t\t// Close every pending sent.\r\n\t\tfor (const sent of this._sents.values())\r\n\t\t{\r\n\t\t\tsent.close();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Close this Peer and its Transport.\r\n\t */\r\n\tclose()\r\n\t{\r\n\t\tthis._logger.debug('Peer API close() OK');\r\n\r\n\t\tif (this._closed)\r\n\t\t\treturn;\r\n\r\n\t\tthis._closed = true;\r\n\r\n\t\tthis.closeTransport({\r\n\t\t\tcode   : 1000,\r\n\t\t\treason : 'client close connection normally.'\r\n\t\t});\r\n\t}\r\n\r\n\t// 恢复所有行为\r\n\tresumeProcess()\r\n\t{\r\n\t\tif (Boolean(this._transport))\r\n\t\t{\r\n\t\t\tthis._transport.resumeProcess();\r\n\t\t}\r\n\t}\r\n\r\n\t// 挂起所有行为\r\n\tsuspendProcess()\r\n\t{\r\n\t\tif (Boolean(this._transport))\r\n\t\t{\r\n\t\t\tthis._transport.suspendProcess();\r\n\t\t}\r\n\t}\r\n\r\n\t// 重连请求\r\n\treconnect(e)\r\n\t{\r\n\t\tif (Boolean(this._transport))\r\n\t\t{\r\n\t\t\tthis._transport.reconnect(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Send a protoo request to the server-side Room.\r\n\t *\r\n\t * @param {String} method\r\n\t * @param {Object} [data]\r\n\t *\r\n\t * @async\r\n\t * @returns {Object} The response data Object if a success response is received.\r\n\t */\r\n\tasync request(method, data = undefined)\r\n\t{\r\n\t\tconst request = Message.createRequest(method, data);\r\n\r\n\t\tthis._logger.debug(`Peer API request() [method: ${method} request.id: ${request.id}]`);\r\n\r\n\t\t// This may throw.\r\n\t\tthis._transport.send(request);\r\n\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tconst timeout = 1500 * (15 + (0.1 * this._sents.size));\r\n\t\t\tconst sent =\r\n\t\t\t{\r\n\t\t\t\tid      : request.id,\r\n\t\t\t\tmethod  : request.method,\r\n\t\t\t\tresolve : (data2) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug(`Peer API request() request[method: ${method} request.id: ${request.id}] <RESOLVE>`);\r\n\r\n\t\t\t\t\tif (!this._sents.delete(request.id))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tclearTimeout(sent.timer);\r\n\t\t\t\t\t\r\n\t\t\t\t\tresolve(data2);\r\n\t\t\t\t},\r\n\t\t\t\treject : (error) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug(`Peer API request() request[method: ${method} request.id: ${request.id}] <REJECT>`);\r\n\r\n\t\t\t\t\tif (!this._sents.delete(request.id))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tclearTimeout(sent.timer);\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t},\r\n\t\t\t\ttimer : setTimeout(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug(`Peer API request() request[method: ${method} request.id: ${request.id}] <TIMEOUT>`);\r\n\r\n\t\t\t\t\tif (!this._sents.delete(request.id))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\treject(new Error('Request Timeout.'));\r\n\t\t\t\t}, timeout),\r\n\t\t\t\tclose : () =>\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(sent.timer);\r\n\t\t\t\t\treject(new Error('Peer Closed'));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Add sent stuff to the map.\r\n\t\t\tthis._sents.set(request.id, sent);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Send a protoo notification to the server-side Room.\r\n\t *\r\n\t * @param {String} method\r\n\t * @param {Object} [data]\r\n\t *\r\n\t * @async\r\n\t */\r\n\tasync notify(method, data = undefined)\r\n\t{\r\n\t\tconst notification = Message.createNotification(method, data);\r\n\r\n\t\tthis._logger.debug(`Peer API notify() [method: ${method}]`);\r\n\r\n\t\t// This may throw.\r\n\t\tthis._transport.send(notification);\r\n\t}\r\n\r\n\t_handleRequest(request)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tthis.emit('request',\r\n\t\t\t\t// Request.\r\n\t\t\t\trequest,\r\n\t\t\t\t// accept() function.\r\n\t\t\t\t(data) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tconst response = Message.createSuccessResponse(request, data);\r\n\r\n\t\t\t\t\tthis._transport.send(response)\r\n\t\t\t\t\t\t.catch(() => {});\r\n\t\t\t\t},\r\n\t\t\t\t// reject() function.\r\n\t\t\t\t(errorCode, errorReason) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (errorCode instanceof Error)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\terrorCode = 500;\r\n\t\t\t\t\t\terrorReason = String(errorCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof errorCode === 'number' && errorReason instanceof Error)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\terrorReason = String(errorReason);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst response = Message.createErrorResponse(request, errorCode, errorReason);\r\n\r\n\t\t\t\t\tthis._transport.send(response)\r\n\t\t\t\t\t\t.catch(() => {});\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tconst response = Message.createErrorResponse(request, 500, String(error));\r\n\r\n\t\t\tthis._transport.send(response)\r\n\t\t\t\t.catch(() => {});\r\n\t\t}\r\n\t}\r\n\r\n\t_handleResponse(response)\r\n\t{\r\n\t\tconst sent = this._sents.get(response.id);\r\n\r\n\t\tif (!sent)\r\n\t\t{\r\n\t\t\tthis._logger.error(\r\n\t\t\t\t`Peer _handleResponse() response [id: ${response.id}] doesnot match any request`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (response.ok)\r\n\t\t{\r\n\t\t\tsent.resolve(response.data);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst error = new Error(response.errorReason);\r\n\r\n\t\t\terror.code = response.errorCode;\r\n\t\t\tsent.reject(error);\r\n\t\t}\r\n\t}\r\n\r\n\t_handleNotification(notification)\r\n\t{\r\n\t\tthis.safeEmit('notification', notification);\r\n\t}\r\n}\r\n\r\nmodule.exports = Peer;\r\n","const Peer = require('./Peer.js');\r\nconst WebSocketTransport = require('./transports/WebSocketTransport.js');\r\n\r\n/**\r\n * Expose mediasoup-client version.\r\n *\r\n * @type {String}\r\n */\r\n// exports.version = version;\r\n\r\n/**\r\n * Expose Peer class.\r\n *\r\n * @type {Class}\r\n */\r\nexports.Peer = Peer;\r\n\r\n/**\r\n * Expose WebSocketTransport class.\r\n *\r\n * @type {Class}\r\n */\r\nexports.WebSocketTransport = WebSocketTransport;\r\n","const WxWebSocket = require('../../utils/WxWebSocket.js');\r\nconst retry = require('../../retry/retry.js');\r\nconst Logger = require('../../utils/Logger.js');\r\nconst EnhancedEventEmitter = require('../../utils/EnhancedEventEmitter.js');\r\nconst Message = require('../Message.js');\r\n\r\nimport regeneratorRuntime from '../../thirdparty/runtime.js';\r\n\r\n//\r\nconst WST_FULL_TIMEOUT = 45000; // 45s\r\n\r\n// 最大重试次数\r\nconst MAX_RETRY = 4;\r\n\r\n// 状态\r\n// {\r\nconst WST_STATE_IDLE = 0; // 初始/关闭状态\r\nconst WST_STATE_TRYING = 1; // 启动中\r\nconst WST_STATE_ACT = 2; // 已连接/正常启动\r\nconst WST_STATE_RETRYING = 3; // 重试中\r\nconst WST_STATE_FINAL_FAIL = 4; // 最终失败\r\n// }\r\n\r\n// const WS_SUBPROTOCOL = 'protoo';\r\n\r\n// 定义 连接失败/断网 的相关retry参数\r\nconst DEFAULT_RETRY_OPTIONS =\r\n{\r\n\tretries    : MAX_RETRY, // 连续重试次数\r\n\tfactor     : 2, // 递增超时放大倍数\r\n\tminTimeout : 1 * 1000, // \r\n\tmaxTimeout : 4 * 1000\r\n};\r\n\r\nclass WebSocketTransport extends EnhancedEventEmitter\r\n{\r\n\t/**\r\n\t * @param {String} url       -- WebSocket URL.\r\n\t * @param {String} logClues  -- 日志追踪\r\n\t * @param {Object} [options] -- Options for WebSocket-Node.W3CWebSocket and retry.\r\n\t */\r\n\tconstructor(url, logClues, logger, options)\r\n\t{\r\n\t\tsuper(logger);\r\n\r\n\t\t// \r\n\t\tthis._logger = logger || new Logger('WebSocketTransport');\r\n\t\tthis._logger.prefix ='-';\r\n\r\n\t\t// 日志追踪用\r\n\t\tthis._logClues = logClues;\r\n\r\n\t\t// 用来标识是否调用了 close ?\r\n\t\tthis._stopping = false;\r\n\r\n\t\t// 初始链接 的 超时定时器\r\n\t\tthis.wstTimer = null;\r\n\r\n\t\t// 状态\r\n\t\tthis._wstState = WST_STATE_IDLE;\r\n\r\n\t\t// WebSocket URL.\r\n\t\t// @type {String}\r\n\t\t// 在 url 后面追加 '日志追踪标识'\r\n\t\tthis._url = `${url}&logClues=${this._logClues}`;\r\n\r\n\t\t// Options.\r\n\t\t// @type {Object}\r\n\t\tthis._options = options || {};\r\n\r\n\t\t// WebSocket instance.\r\n\t\t// @type {WebSocket}\r\n\t\tthis._ws = null;\r\n\r\n\t\tthis._operation = null;\r\n\t\t\r\n\t\t// 当前是否 挂起/暂停 所有操作\r\n\t\tthis._suspend = false;\r\n\r\n\t\t// \r\n\t\tthis._randomId = 0;\r\n\t}\r\n\r\n\tinit()\r\n\t{\r\n\t\tif (this._wstState !== WST_STATE_IDLE)\r\n\t\t{\r\n\t\t\tthis._logger.error(`WebSocketTransport init() -- error: this._wstState(${this._wstState}) !== WST_STATE_IDLE. return`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// \r\n\t\t\tthis._stopping = false;\r\n\r\n\t\t\tthis._wstState = WST_STATE_TRYING;\r\n\t\t\t\r\n\t\t\tthis.startTransport({\r\n\t\t\t\treason : 'init -- startTransport'\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error(`WebSocketTransport init() EXCEPTION!!! -- error: ${JSON.stringify(error)}`);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tget closed()\r\n\t{\r\n\t\treturn (this._wstState === WST_STATE_IDLE || this._wstState === WST_STATE_FINAL_FAIL);\r\n\t}\r\n\r\n\tclose(e)\r\n\t{\r\n\t\tlet code = 1000;\r\n\t\tlet reason = 'close -- client close connection normally';\r\n\r\n\t\tif (Boolean(e))\r\n\t\t{\r\n\t\t\tcode = e.code;\r\n\t\t\treason = e.reason;\r\n\t\t}\r\n\r\n\t\tthis._logger.debug(`WebSocketTransport close() -- this._randomId: ${this._randomId}`);\r\n\r\n\t\tif (this.closed)\r\n\t\t\treturn;\r\n\r\n\t\t// \r\n\t\tthis._stopping = true;\r\n\r\n\t\t// Don't wait for the WebSocket 'close' event, do it now.\r\n\r\n\t\tthis.closeTransport({\r\n\t\t\tcode,\r\n\t\t\treason\r\n\t\t});\r\n\r\n\t\t// \r\n\t\tthis._operation.stop();\r\n\t\t// \r\n\t\tthis._wstState = WST_STATE_IDLE;\r\n\t}\r\n\r\n\t// 恢复所有行为\r\n\tresumeProcess()\r\n\t{\r\n\t\tthis._suspend = false;\r\n\t}\r\n\r\n\t// 挂起所有行为\r\n\tsuspendProcess()\r\n\t{\r\n\t\tthis._suspend = true;\r\n\t}\r\n\r\n\t// \r\n\tstartTransport(e)\r\n\t{\r\n\t\t// \r\n\t\t/*\r\n\t\tif (this._suspend)\r\n\t\t{\r\n\t\t\tthis._logger.debug('WebSocketTransport startTransport() system suspend!!!');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\tthis._logger.debug('WebSocketTransport startTransport()');\r\n\r\n\t\t// \r\n\t\tconst wstProc = new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tthis._logger.error('WebSocketTransport startTransport() start WebSocket...');\r\n\r\n\t\t\tthis._operation = retry.operation(this._options.retry || DEFAULT_RETRY_OPTIONS);\r\n\t\r\n\t\t\tif (!this._operation)\r\n\t\t\t{\r\n\t\t\t\tthis._logger.error('WebSocketTransport startTransport() Internal error.');\r\n\t\r\n\t\t\t\treject('Internal error');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tthis.attemptConnect(e);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst wstTimerPromise = new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tconst wsTransport = this;\r\n\r\n\t\t\tthis.wstTimer = setTimeout(() =>\r\n\t\t\t{\r\n\t\t\t\tif (wsTransport._wstState !== WST_STATE_ACT)\r\n\t\t\t\t{\r\n\t\t\t\t\twsTransport._logger.debug(`WebSocketTransport wstTimerPromise TIMEOUT -- wsTransport._wstState(${wsTransport._wstState}) !== WST_STATE_ACT. reject(WebSocketTransport init timeout)`);\r\n\r\n\t\t\t\t\treject({\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'WebSocketTransport init timeout'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\twsTransport._logger.debug('WebSocketTransport wstTimerPromise TIMEOUT -- ignore');\r\n\t\t\t\t}\r\n\t\t\t}, WST_FULL_TIMEOUT);\r\n\t\t});\r\n\r\n\t\tPromise.race([ wstProc, wstTimerPromise ])\r\n\t\t\t.then((result) =>\r\n\t\t\t{\r\n\t\t\t})\r\n\t\t\t.catch((event) =>\r\n\t\t\t{\r\n\t\t\t\t// 如果当前已 进入 ACT，则直接 return\r\n\t\t\t\tif (this._wstState === WST_STATE_ACT)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t// {\r\n\t\t\t\t\tthis.closeTransport({\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'WebSocketTransport FINAL FAILED'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis._operation.stop();\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis._wstState = WST_STATE_FINAL_FAIL;\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tthis._logger.debug('WebSocketTransport startTransport() -- emit [failed] WebSocketTransport FINAL FAILED');\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'WebSocketTransport FINAL FAILED'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t// \r\n\t}\r\n\r\n\t// 内部函数\r\n\tcloseTransport(opts)\r\n\t{\r\n\t\tlet code = 1000;\r\n\t\tlet reason = 'close connection';\r\n\r\n\t\tif (Boolean(opts))\r\n\t\t{\r\n\t\t\tcode = opts.code;\r\n\t\t\treason = opts.reason;\r\n\t\t}\r\n\r\n\t\tif (Boolean(this._ws))\r\n\t\t{\r\n\t\t\tthis._logger.debug(`WebSocketTransport closeTransport() -- code: ${code} reason: ${reason}`);\r\n\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis._ws.close({\r\n\t\t\t\t\tcode,\r\n\t\t\t\t\treason\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcatch (error)\r\n\t\t\t{\r\n\t\t\t\tthis._logger.error(`WebSocketTransport closeTransport() -- _ws.close EXCEPTION: ${error.message}`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// \r\n\treconnect(e)\r\n\t{\r\n\t\tthis._logger.debug('WebSocketTransport reconnect() -- will reconnect...');\r\n\t\t// \r\n\t\tthis._operation.stop();\r\n\t\t// \r\n\t\tthis._wstState = WST_STATE_RETRYING; // 设定为：当前正在重试\r\n\r\n\t\t// 通知上层：当前正在尝试自动重连\r\n\t\tthis.safeEmit('auto-reconnecting');\r\n\r\n\t\tthis.startTransport(e);\r\n\t}\r\n\r\n\tasync send(message)\r\n\t{\r\n\t\tif (this._wstState !== WST_STATE_ACT)\r\n\t\t{\r\n\t\t\tthis._logger.warn('WebSocketTransport send() -- error: transport no-connection');\r\n\t\t\tthrow new Error('transport no-connection');\r\n\t\t}\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tconst msg = JSON.stringify(message);\r\n\r\n\t\t\tthis._logger.warn(`WebSocketTransport send() <<<<<< ${msg}`);\r\n\r\n\t\t\tif (Boolean(this._ws))\r\n\t\t\t{\r\n\t\t\t\tthis._ws.send({ msg });\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`WebSocketTransport send() -- EXCEPTION: ${error.message}`);\r\n\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t}\r\n\r\n\t// 网络状况发生变化时，回调函数\r\n\t// \r\n\tonWsOpen()\r\n\t{\r\n\t\tif (Boolean(this._operation))\r\n\t\t{\r\n\t\t\tthis._operation.stop();\r\n\t\t}\r\n\r\n\t\t// \r\n\t\t// 如果在此之前调用了 close 主动关闭，则直接 return\r\n\t\tif (this._stopping)\r\n\t\t{\r\n\t\t\tthis._logger.debug(`WebSocketTransport onWsOpen() -- this._randomId: ${this._randomId} -- this._stopping is ture, return.`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tif (this.wstState === WST_STATE_FINAL_FAIL)\r\n\t\t{\r\n\t\t\tthis._logger.warn('WebSocketTransport onWsOpen() -- This has been WST_STATE_FINAL_FAIL, so return.');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._logger.debug(`WebSocketTransport onWsOpen() -- this._randomId: ${this._randomId} -- will emit [open]`);\r\n\r\n\t\t// \r\n\t\tconst isRetry = (this._wstState === WST_STATE_RETRYING);\r\n\r\n\t\tthis._wstState = WST_STATE_ACT;\r\n\r\n\t\t// \r\n\t\tif (this.wstTimer !== null)\r\n\t\t{\r\n\t\t\tclearTimeout(this.wstTimer);\r\n\t\t\tthis.wstTimer = null;\r\n\t\t}\r\n\r\n\t\t// Emit 'open' event.\r\n\t\tthis.safeEmit('open', {\r\n\t\t\tisRetry\r\n\t\t});\r\n\t}\r\n\t\r\n\tonWsMessage(data)\r\n\t{\r\n\t\tif (this._wstState !== WST_STATE_ACT)\r\n\t\t{\r\n\t\t\tthis._logger.debug(`WebSocketTransport onWsMessage() -- message: ${data} -- this._wstState(${this._wstState}) !== WST_STATE_ACT, return.`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst message = Message.parse(data);\r\n\r\n\t\tif (!message)\r\n\t\t{\r\n\t\t\tthis._logger.debug('WebSocketTransport onWsMessage() -- message is null, return');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.listenerCount('message') === 0)\r\n\t\t{\r\n\t\t\tthis._logger.error('WebSocketTransport onWsMessage() -- no listeners for event [message], ignoring message');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._logger.warn(`WebSocketTransport onWsMessage() >>>>>> ${JSON.stringify(message)}`);\r\n\r\n\t\t// Emit 'message' event.\r\n\t\tthis.safeEmit('message', { message });\r\n\t}\r\n\t\r\n\t// 暂不对上报\r\n\tonWsError(event)\r\n\t{\r\n\t\tif (this._wstState === WST_STATE_IDLE)\r\n\t\t\treturn;\r\n\r\n\t\tthis._logger.error(`WebSocketTransport onWsError() -- this._wstState: ${this._wstState} error: ${JSON.stringify(event)}`);\r\n\t}\r\n\r\n\t// 如果当前为非人为主观断开，则会尝试一定次数的重试\r\n\t// 若需要重试，则在连续重试N次仍未成功连接，则向上层报 \"最终失败\"\r\n\t// 若无需重试，则直接向上层报 \"close\"\r\n\tonWsClose(opts)\r\n\t{\r\n\t\tconst { event } = opts;\r\n\r\n\t\t/*\r\n\t\twx.setStorage({\r\n\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\tdata : `WebSocketTransport event[onWsClose] currentAttempt: ${currentAttempt} event: ${JSON.stringify(event)}.`\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\t// 对于 IDEL、FIANL_FAIL 状态， 忽略 onWsClose 事件\r\n\t\tif (this._wstState === WST_STATE_IDLE || this._wstState === WST_STATE_FINAL_FAIL)\r\n\t\t{\r\n\t\t\tthis._logger.warn(`WebSocketTransport onWsClose -- Invalid _wstState(${this._wstState}), so return.`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tthis._logger.debug(`WebSocketTransport onWsClose() -- this._wstState: ${this._wstState} ${JSON.stringify(event)}`);\r\n\r\n\t\t// Don't retry when in the following cases:\r\n\t\t// 4000 : closed by server\r\n\t\t// 4100 : 后替前\r\n\t\t// _stopping : 上层主动关闭，故不再尝试重连，且通知上层\r\n\t\tif (event.code === 4000 || event.code === 4100 || this._stopping)\r\n\t\t{\r\n\t\t\t// \r\n\t\t\tthis._logger.debug(`WebSocketTransport onWsClose() -- [event: ${JSON.stringify(event)}]. Normally closed. No more attempt to reconnect!`);\r\n\r\n\t\t\t// \r\n\t\t\tif (Boolean(this._operation))\r\n\t\t\t{\r\n\t\t\t\tthis._operation.stop();\r\n\t\t\t}\r\n\t\t\t// \r\n\t\t\t// 在向上层投递 close 事件前，首先回收内部资源/置内部状态 -- 以免上层处理 close 事件时再次调入 close()\r\n\t\t\t/* 2019.7.18 在此wxwebsocket已断开，此处无需再执行closeTransport\r\n\t\t\tthis.closeTransport({\r\n\t\t\t\tcode   : 1000,\r\n\t\t\t\treason : `onWsClose[event: ${event.code}] -- close connection`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\tthis._wstState = WST_STATE_FINAL_FAIL;\r\n\r\n\t\t\t// 此种情况下，才直接向上层触发 'close' 事件\r\n\t\t\t// Emit 'close' event.\r\n\t\t\tthis.safeEmit('close', {\r\n\t\t\t\tcode   : event.code,\r\n\t\t\t\treason : this._stopping ? '_stopping' : `Normally closed -- code: ${JSON.stringify(event)}`\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 尝试重连\r\n\t\telse\r\n\t\t{\r\n\t\t\t// 通知上层：当前正在尝试自动重连\r\n\t\t\t// 注：对于初始断开，将由此处执行重连；对于连接过程中的连接超时重试，将由 _operation 的超时定时器自动执行 retry\r\n\t\t\tthis.safeEmit('auto-reconnecting');\r\n\r\n\t\t\t// \r\n\t\t\tif (this._wstState === WST_STATE_ACT)\r\n\t\t\t{\r\n\t\t\t\t// 如果之前为 已连接 状态，则说明这是一次 新断开 事件，需要全新开始 attemptConnect\r\n\t\t\t\tthis._logger.debug('WebSocketTransport onWsClose() -- this._wstState !== WST_STATE_RETRYING, A new beginning...');\r\n\r\n\t\t\t\t// 一次全新的重试的开始，则重置 operation ，重启 attempt\r\n\t\t\t\tif (Boolean(this._operation))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._operation.reset();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\tthis._wstState = WST_STATE_RETRYING; // 设定为：当前正在重试\r\n\r\n\t\t\t\tsetTimeout(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.attemptConnect({\r\n\t\t\t\t\t\treason : 'onWsClose -- retrying'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\telse if (this._wstState === WST_STATE_RETRYING) // 如果之前是 retying 状态，则应继续执行 retry\r\n\t\t{\r\n\t\t\tthis.operationRetry(event);\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tattemptConnect(e)\r\n\t{\r\n\t\tif (!this._operation)\r\n\t\t{\r\n\t\t\tthis._logger.error('WebSocketTransport attemptConnect() this._operation is null.');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._operation.attempt((currentAttempt) =>\r\n\t\t{\r\n\t\t\t// \r\n\t\t\tif (this._stopping)\r\n\t\t\t{\r\n\t\t\t\tif (Boolean(this._operation))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._operation.stop();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.closeTransport({\r\n\t\t\t\t\tcode   : 1000,\r\n\t\t\t\t\treason : 'attemptConnect _stopping -- client close connection normally'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._logger.debug('WebSocketTransport attemptConnect() -- _stopping is true, has closeTransport.');\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// \r\n\t\t\tconst commentReason = (!e ? '' : e.reason);\r\n\r\n\t\t\t// TODO : ??? \r\n\t\t\t// closeTransport 这件事还有没有必要做 ???\r\n\t\t\tthis.closeTransport({\r\n\t\t\t\tcode   : 3000,\r\n\t\t\t\treason : `Will retry later -- ${commentReason}`\r\n\t\t\t});\r\n\r\n\t\t\t// \r\n\t\t\tthis._logger.debug(`WebSocketTransport attemptConnect() -- [currentAttempt: ${currentAttempt}]`);\r\n\r\n\t\t\t// \r\n\t\t\tthis._randomId = Math.round(Math.random() * 10000000);\r\n\r\n\t\t\tthis._ws = new WxWebSocket(this._randomId, this._logger);\r\n\r\n\t\t\tif (Boolean(this._ws))\r\n\t\t\t{\r\n\t\t\t\t// 监听 wx websocket 模块事件\r\n\t\t\t\tthis._ws.on('open', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (event.randomId !== this._randomId)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\twx.setStorage({\r\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\t\t\t\t\tdata : `WebSocketTransport _ws event[open] randmId un-match ${event.randomId} ${this._randomId}.`\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[open] randmId un-match ${event.randomId} ${this._randomId}.`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis.onWsOpen();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._ws.on('message', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (event.randomId !== this._randomId)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[message] randmId un-match ${event.randomId} ${this._randomId}.`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.onWsMessage(event.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._ws.on('error', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (event.randomId !== this._randomId)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\twx.setStorage({\r\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\t\t\t\t\tdata : `WebSocketTransport _ws event[error] randmId un-match ${event.randomId} ${this._randomId}.`\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[error] randmId un-match ${event.randomId} ${this._randomId}.`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis.onWsError(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._ws.on('close', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (event.randomId !== this._randomId)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\twx.setStorage({\r\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\t\t\t\t\tdata : `WebSocketTransport _ws event[close] randmId un-match ${event.randomId} ${this._randomId}.`\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[close] randmId un-match ${event.randomId} ${this._randomId}.`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tthis.onWsClose({ event });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// connect server\r\n\t\t\t\tthis._ws.connect({\r\n\t\t\t\t\turl     : (this._wstState === WST_STATE_RETRYING ? (`${this._url}&retry=true`) : this._url),\r\n\t\t\t\t\tsuccess : (res) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail : (res) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\twx.setStorage({\r\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\t\t\t\t\tdata : 'WebSocketTransport _ws.connect fail.'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t*/\r\n\t\r\n\t\t\t\t\t\tthis._logger.error(`_ws.connect failed. [currentAttempt: ${currentAttempt}]`);\r\n\r\n\t\t\t\t\t\tthrow new Error('_ws.connect failed');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._logger.error(`WebSocket create failed -- _ws is null. [currentAttempt: ${currentAttempt}]`);\r\n\r\n\t\t\t\tthrow new Error('WebSocket create failed -- _ws is null');\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\ttimeout : 10 * 1000, // 8s 超时\r\n\t\t\tcb      : (ctr) =>\r\n\t\t\t{\r\n\t\t\t\tthis._logger.debug(`attemptConnect() _operation.attempt timeout!! [retry: ${ctr}]. _wstState is ${this._wstState}`);\r\n\r\n\t\t\t\tif (this._wstState === WST_STATE_ACT)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse if (this._wstState === WST_STATE_TRYING || this._wstState === WST_STATE_RETRYING)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.error(`attemptConnect() _operation.attempt timeout(10s). [retry: ${ctr}]. continue to retry...`);\r\n\t\t\t\t\t// \r\n\t\t\t\t\tsetTimeout(() =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.operationRetry({\r\n\t\t\t\t\t\t\tcode : 3100\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\toperationRetry(event)\r\n\t{\r\n\t\tif (!this._operation)\r\n\t\t{\r\n\t\t\tthis._logger.error('WebSocketTransport operationRetry() -- error: this._operation is null.');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//\r\n\r\n\t\tif (this._operation.retry(true))\r\n\t\t{\r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\t\tdata : `WebSocketTransport operationRetry() ok. event: ${JSON.stringify(event)}.`\r\n\t\t\t});\r\n\t\t\t*/\r\n\r\n\t\t\tthis._logger.debug(`WebSocketTransport operationRetry() -- _operation.retrying [retry: ${this._operation._attempts}] [event.code: ${event.code}]`);\r\n\r\n\t\t\t// 通知上层：当前正在尝试自动重连\r\n\t\t\tthis.safeEmit('auto-reconnecting');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t/*\r\n\t\t\twx.setStorage({\r\n\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\r\n\t\t\t\tdata : 'WebSocketTransport operationRetry() FINAL FAILED.'\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tthis._logger.error(`WebSocketTransport operationRetry() -- _operation.retry end up [retry: ${this._operation_attempts}]. FINAL FAILED`);\r\n\r\n\t\t\t// \r\n\t\t\tthis._operation.stop();\r\n\t\t\t// \r\n\t\t\tthis._wstState = WST_STATE_FINAL_FAIL;\r\n\t\t\t// 当尝试完所有重试，仍未 ok，则向上层触发 failed，携带 event:{code: 500}\r\n\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\tcode   : 500,\r\n\t\t\t\treason : 'WebSocketTransport FINAL FAILED'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = WebSocketTransport;\r\n","const RetryOperation = require('./retry_operation.js');\r\n\r\nexports.operation = function (options)\r\n{\r\n\tconst timeouts = exports.timeouts(options);\r\n\r\n\treturn new RetryOperation(timeouts, {\r\n\t\tforever      : options && options.forever,\r\n\t\tunref        : options && options.unref,\r\n\t\tmaxRetryTime : options && options.maxRetryTime\r\n\t});\r\n};\r\n\r\nexports.timeouts = function (options)\r\n{\r\n\tif (options instanceof Array)\r\n\t{\r\n\t\treturn [].concat(options);\r\n\t}\r\n\r\n\tconst opts = {\r\n\t\tretries    : 4,\r\n\t\tfactor     : 2,\r\n\t\tminTimeout : 1 * 1000,\r\n\t\tmaxTimeout : 4 * 1000, // Infinity,\r\n\t\trandomize  : false\r\n\t};\r\n\r\n\tfor (const key in options)\r\n\t{\r\n\t\topts[key] = options[key];\r\n\t}\r\n\r\n\tif (opts.minTimeout > opts.maxTimeout)\r\n\t{\r\n\t\tthrow new Error('minTimeout is greater than maxTimeout');\r\n\t}\r\n\r\n\tconst timeouts = [];\r\n\r\n\tfor (let i = 0; i < opts.retries; i++)\r\n\t{\r\n\t\ttimeouts.push(this.createTimeout(i, opts));\r\n\t}\r\n\r\n\tif (options && options.forever && !timeouts.length)\r\n\t{\r\n\t\ttimeouts.push(this.createTimeout(i, opts));\r\n\t}\r\n\r\n\t// \r\n\tconsole.warn(`retry.js timeouts: ${timeouts.length}`);\r\n\r\n\t// sort the array numerically ascending\r\n\ttimeouts.sort(function (a, b)\r\n\t{\r\n\t\treturn a - b;\r\n\t});\r\n\r\n\treturn timeouts;\r\n};\r\n\r\nexports.createTimeout = function (attempt, opts)\r\n{\r\n\tconst random = (opts.randomize)\r\n\t\t? (Math.random() + 1)\r\n\t\t: 1;\r\n\r\n\tlet timeout = Math.round(random * opts.minTimeout * Math.pow(opts.factor, attempt));\r\n\r\n\ttimeout = Math.min(timeout, opts.maxTimeout);\r\n\r\n\treturn timeout;\r\n};\r\n\r\nexports.wrap = function (obj, options, methods)\r\n{\r\n\tif (options instanceof Array)\r\n\t{\r\n\t\tmethods = options;\r\n\t\toptions = null;\r\n\t}\r\n\r\n\tif (!methods)\r\n\t{\r\n\t\tmethods = [];\r\n\t\tfor (const key in obj)\r\n\t\t{\r\n\t\t\tif (typeof obj[key] === 'function')\r\n\t\t\t{\r\n\t\t\t\tmethods.push(key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let i = 0; i < methods.length; i++)\r\n\t{\r\n\t\tconst method = methods[i];\r\n\t\tconst original = obj[method];\r\n\r\n\t\tobj[method] = function retryWrapper(original)\r\n\t\t{\r\n\t\t\tconst op = exports.operation(options);\r\n\t\t\tconst args = Array.prototype.slice.call(arguments, 1);\r\n\t\t\tconst callback = args.pop();\r\n\r\n\t\t\targs.push(function (err)\r\n\t\t\t{\r\n\t\t\t\tif (op.retry(err))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (err)\r\n\t\t\t\t{\r\n\t\t\t\t\targuments[0] = op.mainError();\r\n\t\t\t\t}\r\n\t\t\t\tcallback.apply(this, arguments);\r\n\t\t\t});\r\n\r\n\t\t\top.attempt(function ()\r\n\t\t\t{\r\n\t\t\t\toriginal.apply(obj, args);\r\n\t\t\t});\r\n\t\t}.bind(obj, original);\r\n\t\tobj[method].options = options;\r\n\t}\r\n};\r\n","function RetryOperation(timeouts, options)\r\n{\r\n\t// Compatibility for the old (timeouts, retryForever) signature\r\n\tif (typeof options === 'boolean')\r\n\t{\r\n\t\toptions = { forever: options };\r\n\t}\r\n\r\n\tthis._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\r\n\tthis._timeouts = timeouts;\r\n\tthis._options = options || {};\r\n\tthis._maxRetryTime = options ? options.maxRetryTime : Infinity;\r\n\tthis._fn = null;\r\n\tthis._errors = [];\r\n\tthis._attempts = 1;\r\n\tthis._operationTimeout = 3000; // 默认定时器超时为 3s //null;\r\n\tthis._operationTimeoutCb = null;\r\n\tthis._timeout = null;\r\n\tthis._operationStart = null;\r\n\r\n\tconsole.warn(`RetryOperation construct() this._timeouts: ${JSON.stringify(this._timeouts)}`);\r\n\r\n\tif (this._options.forever)\r\n\t{\r\n\t\tthis._cachedTimeouts = this._timeouts.slice(0);\r\n\t}\r\n}\r\nmodule.exports = RetryOperation;\r\n\r\nRetryOperation.prototype.reset = function ()\r\n{\r\n\tthis._attempts = 1;\r\n\tthis._timeouts = JSON.parse(JSON.stringify(this._originalTimeouts));\r\n\r\n\tconsole.warn(`RetryOperation reset() this._timeouts: ${JSON.stringify(this._timeouts)}`);\r\n}\r\n\r\nRetryOperation.prototype.stop = function ()\r\n{\r\n\tif (this._timeout)\r\n\t{\r\n\t\tclearTimeout(this._timeout);\r\n\t}\r\n\tthis._timeout = null;\r\n\r\n\tconsole.warn('RetryOperation stop() -- clear the timeouts');\r\n\r\n\tthis._timeouts = [];\r\n\tthis._cachedTimeouts = null;\r\n};\r\n\r\nRetryOperation.prototype.retry = function (err)\r\n{\r\n\tif (this._timeout)\r\n\t{\r\n\t\tclearTimeout(this._timeout);\r\n\t}\r\n\tthis._timeout = null;\r\n\r\n\tif (!err)\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst currentTime = new Date().getTime();\r\n\r\n\tif (err && currentTime - this._operationStart >= this._maxRetryTime)\r\n\t{\r\n\t\tthis._errors.unshift(new Error(`RetryOperation timeout(${this._maxRetryTime}) occurred`));\r\n\r\n\t\tconsole.warn('RetryOperation retry() this._maxRetryTime TIMEOUT!!!');\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tthis._errors.push(err);\r\n\r\n\tlet timeout = this._timeouts.shift();\r\n\r\n\tconsole.warn(`RetryOperation retry() timeout: ${timeout} this._timeouts: ${JSON.stringify(this._timeouts)}`);\r\n\r\n\tif (timeout === undefined)\r\n\t{\r\n\t\tif (this._cachedTimeouts)\r\n\t\t{\r\n\t\t\t// retry forever, only keep last error\r\n\t\t\tthis._errors.splice(this._errors.length - 1, this._errors.length);\r\n\t\t\tthis._timeouts = this._cachedTimeouts.slice(0);\r\n\t\t\ttimeout = this._timeouts.shift();\r\n\t\t}\r\n\t\telse\r\n\t\t{\t\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tconst self = this;\r\n\r\n\tconst timer = setTimeout(function ()\r\n\t{\r\n\t\tself._attempts++;\r\n\r\n\t\tif (self._operationTimeoutCb)\r\n\t\t{\r\n\t\t\tself._timeout = setTimeout(function ()\r\n\t\t\t{\r\n\t\t\t\tself._operationTimeoutCb(self._attempts);\r\n\t\t\t}, self._operationTimeout);\r\n\r\n\t\t\tif (self._options.unref)\r\n\t\t\t{\r\n\t\t\t\tself._timeout.unref();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself._fn(self._attempts);\r\n\t}, timeout);\r\n\r\n\tif (this._options.unref)\r\n\t{\r\n\t\ttimer.unref();\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nRetryOperation.prototype.attempt = function (fn, timeoutOps)\r\n{\r\n\tthis._fn = fn;\r\n\r\n\tif (timeoutOps)\r\n\t{\r\n\t\tif (timeoutOps.timeout)\r\n\t\t{\r\n\t\t\tthis._operationTimeout = timeoutOps.timeout;\r\n\t\t}\r\n\t\tif (timeoutOps.cb)\r\n\t\t{\r\n\t\t\tthis._operationTimeoutCb = timeoutOps.cb;\r\n\t\t}\r\n\t}\r\n\r\n\tconst self = this;\r\n\r\n\tif (this._operationTimeoutCb)\r\n\t{\r\n\t\tthis._timeout = setTimeout(function ()\r\n\t\t{\r\n\t\t\tself._operationTimeoutCb(1);\r\n\t\t}, self._operationTimeout);\r\n\t}\r\n\r\n\tthis._operationStart = new Date().getTime();\r\n\r\n\tthis._fn(this._attempts);\r\n};\r\n\r\nRetryOperation.prototype.try = function (fn)\r\n{\r\n\tconsole.log('Using RetryOperation.try() is deprecated');\r\n\tthis.attempt(fn);\r\n};\r\n\r\nRetryOperation.prototype.start = function (fn)\r\n{\r\n\tconsole.log('Using RetryOperation.start() is deprecated');\r\n\tthis.attempt(fn);\r\n};\r\n\r\nRetryOperation.prototype.start = RetryOperation.prototype.try;\r\n\r\nRetryOperation.prototype.errors = function ()\r\n{\r\n\treturn this._errors;\r\n};\r\n\r\nRetryOperation.prototype.attempts = function ()\r\n{\r\n\treturn this._attempts;\r\n};\r\n\r\nRetryOperation.prototype.mainError = function ()\r\n{\r\n\tif (this._errors.length === 0)\r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet counts = {};\r\n\tlet mainError = null;\r\n\tlet mainErrorCount = 0;\r\n\r\n\tfor (let i = 0; i < this._errors.length; i++)\r\n\t{\r\n\t\tconst error = this._errors[i];\r\n\t\tconst message = error.message;\r\n\t\tconst count = (counts[message] || 0) + 1;\r\n\r\n\t\tcounts[message] = count;\r\n\r\n\t\tif (count >= mainErrorCount)\r\n\t\t{\r\n\t\t\tmainError = error;\r\n\t\t\tmainErrorCount = count;\r\n\t\t}\r\n\t}\r\n\r\n\treturn mainError;\r\n};\r\n","\"use strict\";\r\n\r\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\r\n\r\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\r\n\r\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\r\n\r\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\r\n\r\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\n(function (f) {\r\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\" && typeof module !== \"undefined\") {\r\n    module.exports = f();\r\n  } else if (typeof define === \"function\" && define.amd) {\r\n    define([], f);\r\n  } else {\r\n    var g;\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      g = window;\r\n    } else if (typeof global !== \"undefined\") {\r\n      g = global;\r\n    } else if (typeof self !== \"undefined\") {\r\n      g = self;\r\n    } else {\r\n      g = this;\r\n    }\r\n\r\n    g.debug = f();\r\n  }\r\n})(function () {\r\n  var define, module, exports;\r\n  return function () {\r\n    function r(e, n, t) {\r\n      function o(i, f) {\r\n        if (!n[i]) {\r\n          if (!e[i]) {\r\n            var c = \"function\" == typeof require && require;\r\n            if (!f && c) return c(i, !0);\r\n            if (u) return u(i, !0);\r\n            var a = new Error(\"Cannot find module '\" + i + \"'\");\r\n            throw a.code = \"MODULE_NOT_FOUND\", a;\r\n          }\r\n\r\n          var p = n[i] = {\r\n            exports: {}\r\n          };\r\n          e[i][0].call(p.exports, function (r) {\r\n            var n = e[i][1][r];\r\n            return o(n || r);\r\n          }, p, p.exports, r, e, n, t);\r\n        }\r\n\r\n        return n[i].exports;\r\n      }\r\n\r\n      for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++) {\r\n        o(t[i]);\r\n      }\r\n\r\n      return o;\r\n    }\r\n\r\n    return r;\r\n  }()({\r\n    1: [function (require, module, exports) {\r\n      /**\r\n       * Helpers.\r\n       */\r\n      var s = 1000;\r\n      var m = s * 60;\r\n      var h = m * 60;\r\n      var d = h * 24;\r\n      var w = d * 7;\r\n      var y = d * 365.25;\r\n      /**\r\n       * Parse or format the given `val`.\r\n       *\r\n       * Options:\r\n       *\r\n       *  - `long` verbose formatting [false]\r\n       *\r\n       * @param {String|Number} val\r\n       * @param {Object} [options]\r\n       * @throws {Error} throw an error if val is not a non-empty string or a number\r\n       * @return {String|Number}\r\n       * @api public\r\n       */\r\n\r\n      module.exports = function (val, options) {\r\n        options = options || {};\r\n\r\n        var type = _typeof(val);\r\n\r\n        if (type === 'string' && val.length > 0) {\r\n          return parse(val);\r\n        } else if (type === 'number' && isNaN(val) === false) {\r\n          return options.long ? fmtLong(val) : fmtShort(val);\r\n        }\r\n\r\n        throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\r\n      };\r\n      /**\r\n       * Parse the given `str` and return milliseconds.\r\n       *\r\n       * @param {String} str\r\n       * @return {Number}\r\n       * @api private\r\n       */\r\n\r\n\r\n      function parse(str) {\r\n        str = String(str);\r\n\r\n        if (str.length > 100) {\r\n          return;\r\n        }\r\n\r\n        var match = /^((?:\\d+)?\\-?\\d?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\r\n\r\n        if (!match) {\r\n          return;\r\n        }\r\n\r\n        var n = parseFloat(match[1]);\r\n        var type = (match[2] || 'ms').toLowerCase();\r\n\r\n        switch (type) {\r\n          case 'years':\r\n          case 'year':\r\n          case 'yrs':\r\n          case 'yr':\r\n          case 'y':\r\n            return n * y;\r\n\r\n          case 'weeks':\r\n          case 'week':\r\n          case 'w':\r\n            return n * w;\r\n\r\n          case 'days':\r\n          case 'day':\r\n          case 'd':\r\n            return n * d;\r\n\r\n          case 'hours':\r\n          case 'hour':\r\n          case 'hrs':\r\n          case 'hr':\r\n          case 'h':\r\n            return n * h;\r\n\r\n          case 'minutes':\r\n          case 'minute':\r\n          case 'mins':\r\n          case 'min':\r\n          case 'm':\r\n            return n * m;\r\n\r\n          case 'seconds':\r\n          case 'second':\r\n          case 'secs':\r\n          case 'sec':\r\n          case 's':\r\n            return n * s;\r\n\r\n          case 'milliseconds':\r\n          case 'millisecond':\r\n          case 'msecs':\r\n          case 'msec':\r\n          case 'ms':\r\n            return n;\r\n\r\n          default:\r\n            return undefined;\r\n        }\r\n      }\r\n      /**\r\n       * Short format for `ms`.\r\n       *\r\n       * @param {Number} ms\r\n       * @return {String}\r\n       * @api private\r\n       */\r\n\r\n\r\n      function fmtShort(ms) {\r\n        var msAbs = Math.abs(ms);\r\n\r\n        if (msAbs >= d) {\r\n          return Math.round(ms / d) + 'd';\r\n        }\r\n\r\n        if (msAbs >= h) {\r\n          return Math.round(ms / h) + 'h';\r\n        }\r\n\r\n        if (msAbs >= m) {\r\n          return Math.round(ms / m) + 'm';\r\n        }\r\n\r\n        if (msAbs >= s) {\r\n          return Math.round(ms / s) + 's';\r\n        }\r\n\r\n        return ms + 'ms';\r\n      }\r\n      /**\r\n       * Long format for `ms`.\r\n       *\r\n       * @param {Number} ms\r\n       * @return {String}\r\n       * @api private\r\n       */\r\n\r\n\r\n      function fmtLong(ms) {\r\n        var msAbs = Math.abs(ms);\r\n\r\n        if (msAbs >= d) {\r\n          return plural(ms, msAbs, d, 'day');\r\n        }\r\n\r\n        if (msAbs >= h) {\r\n          return plural(ms, msAbs, h, 'hour');\r\n        }\r\n\r\n        if (msAbs >= m) {\r\n          return plural(ms, msAbs, m, 'minute');\r\n        }\r\n\r\n        if (msAbs >= s) {\r\n          return plural(ms, msAbs, s, 'second');\r\n        }\r\n\r\n        return ms + ' ms';\r\n      }\r\n      /**\r\n       * Pluralization helper.\r\n       */\r\n\r\n\r\n      function plural(ms, msAbs, n, name) {\r\n        var isPlural = msAbs >= n * 1.5;\r\n        return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\r\n      }\r\n    }, {}],\r\n    2: [function (require, module, exports) {\r\n      // shim for using process in browser\r\n      var process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\r\n      // don't break things.  But we need to wrap it in a try catch in case it is\r\n      // wrapped in strict mode code which doesn't define any globals.  It's inside a\r\n      // function because try/catches deoptimize in certain engines.\r\n\r\n      var cachedSetTimeout;\r\n      var cachedClearTimeout;\r\n\r\n      function defaultSetTimout() {\r\n        throw new Error('setTimeout has not been defined');\r\n      }\r\n\r\n      function defaultClearTimeout() {\r\n        throw new Error('clearTimeout has not been defined');\r\n      }\r\n\r\n      (function () {\r\n        try {\r\n          if (typeof setTimeout === 'function') {\r\n            cachedSetTimeout = setTimeout;\r\n          } else {\r\n            cachedSetTimeout = defaultSetTimout;\r\n          }\r\n        } catch (e) {\r\n          cachedSetTimeout = defaultSetTimout;\r\n        }\r\n\r\n        try {\r\n          if (typeof clearTimeout === 'function') {\r\n            cachedClearTimeout = clearTimeout;\r\n          } else {\r\n            cachedClearTimeout = defaultClearTimeout;\r\n          }\r\n        } catch (e) {\r\n          cachedClearTimeout = defaultClearTimeout;\r\n        }\r\n      })();\r\n\r\n      function runTimeout(fun) {\r\n        if (cachedSetTimeout === setTimeout) {\r\n          //normal enviroments in sane situations\r\n          return setTimeout(fun, 0);\r\n        } // if setTimeout wasn't available but was latter defined\r\n\r\n\r\n        if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\r\n          cachedSetTimeout = setTimeout;\r\n          return setTimeout(fun, 0);\r\n        }\r\n\r\n        try {\r\n          // when when somebody has screwed with setTimeout but no I.E. maddness\r\n          return cachedSetTimeout(fun, 0);\r\n        } catch (e) {\r\n          try {\r\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\r\n            return cachedSetTimeout.call(null, fun, 0);\r\n          } catch (e) {\r\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\r\n            return cachedSetTimeout.call(this, fun, 0);\r\n          }\r\n        }\r\n      }\r\n\r\n      function runClearTimeout(marker) {\r\n        if (cachedClearTimeout === clearTimeout) {\r\n          //normal enviroments in sane situations\r\n          return clearTimeout(marker);\r\n        } // if clearTimeout wasn't available but was latter defined\r\n\r\n\r\n        if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\r\n          cachedClearTimeout = clearTimeout;\r\n          return clearTimeout(marker);\r\n        }\r\n\r\n        try {\r\n          // when when somebody has screwed with setTimeout but no I.E. maddness\r\n          return cachedClearTimeout(marker);\r\n        } catch (e) {\r\n          try {\r\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\r\n            return cachedClearTimeout.call(null, marker);\r\n          } catch (e) {\r\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\r\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\r\n            return cachedClearTimeout.call(this, marker);\r\n          }\r\n        }\r\n      }\r\n\r\n      var queue = [];\r\n      var draining = false;\r\n      var currentQueue;\r\n      var queueIndex = -1;\r\n\r\n      function cleanUpNextTick() {\r\n        if (!draining || !currentQueue) {\r\n          return;\r\n        }\r\n\r\n        draining = false;\r\n\r\n        if (currentQueue.length) {\r\n          queue = currentQueue.concat(queue);\r\n        } else {\r\n          queueIndex = -1;\r\n        }\r\n\r\n        if (queue.length) {\r\n          drainQueue();\r\n        }\r\n      }\r\n\r\n      function drainQueue() {\r\n        if (draining) {\r\n          return;\r\n        }\r\n\r\n        var timeout = runTimeout(cleanUpNextTick);\r\n        draining = true;\r\n        var len = queue.length;\r\n\r\n        while (len) {\r\n          currentQueue = queue;\r\n          queue = [];\r\n\r\n          while (++queueIndex < len) {\r\n            if (currentQueue) {\r\n              currentQueue[queueIndex].run();\r\n            }\r\n          }\r\n\r\n          queueIndex = -1;\r\n          len = queue.length;\r\n        }\r\n\r\n        currentQueue = null;\r\n        draining = false;\r\n        runClearTimeout(timeout);\r\n      }\r\n\r\n      process.nextTick = function (fun) {\r\n        var args = new Array(arguments.length - 1);\r\n\r\n        if (arguments.length > 1) {\r\n          for (var i = 1; i < arguments.length; i++) {\r\n            args[i - 1] = arguments[i];\r\n          }\r\n        }\r\n\r\n        queue.push(new Item(fun, args));\r\n\r\n        if (queue.length === 1 && !draining) {\r\n          runTimeout(drainQueue);\r\n        }\r\n      }; // v8 likes predictible objects\r\n\r\n\r\n      function Item(fun, array) {\r\n        this.fun = fun;\r\n        this.array = array;\r\n      }\r\n\r\n      Item.prototype.run = function () {\r\n        this.fun.apply(null, this.array);\r\n      };\r\n\r\n      process.title = 'browser';\r\n      process.browser = true;\r\n      process.env = {};\r\n      process.argv = [];\r\n      process.version = ''; // empty string to avoid regexp issues\r\n\r\n      process.versions = {};\r\n\r\n      function noop() {}\r\n\r\n      process.on = noop;\r\n      process.addListener = noop;\r\n      process.once = noop;\r\n      process.off = noop;\r\n      process.removeListener = noop;\r\n      process.removeAllListeners = noop;\r\n      process.emit = noop;\r\n      process.prependListener = noop;\r\n      process.prependOnceListener = noop;\r\n\r\n      process.listeners = function (name) {\r\n        return [];\r\n      };\r\n\r\n      process.binding = function (name) {\r\n        throw new Error('process.binding is not supported');\r\n      };\r\n\r\n      process.cwd = function () {\r\n        return '/';\r\n      };\r\n\r\n      process.chdir = function (dir) {\r\n        throw new Error('process.chdir is not supported');\r\n      };\r\n\r\n      process.umask = function () {\r\n        return 0;\r\n      };\r\n    }, {}],\r\n    3: [function (require, module, exports) {\r\n      /**\r\n       * This is the common logic for both the Node.js and web browser\r\n       * implementations of `debug()`.\r\n       */\r\n      function setup(env) {\r\n        createDebug.debug = createDebug;\r\n        createDebug.default = createDebug;\r\n        createDebug.coerce = coerce;\r\n        createDebug.disable = disable;\r\n        createDebug.enable = enable;\r\n        createDebug.enabled = enabled;\r\n        createDebug.humanize = require('ms');\r\n        Object.keys(env).forEach(function (key) {\r\n          createDebug[key] = env[key];\r\n        });\r\n        /**\r\n        * Active `debug` instances.\r\n        */\r\n\r\n        createDebug.instances = [];\r\n        /**\r\n        * The currently active debug mode names, and names to skip.\r\n        */\r\n\r\n        createDebug.names = [];\r\n        createDebug.skips = [];\r\n        /**\r\n        * Map of special \"%n\" handling functions, for the debug \"format\" argument.\r\n        *\r\n        * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\r\n        */\r\n\r\n        createDebug.formatters = {};\r\n        /**\r\n        * Selects a color for a debug namespace\r\n        * @param {String} namespace The namespace string for the for the debug instance to be colored\r\n        * @return {Number|String} An ANSI color code for the given namespace\r\n        * @api private\r\n        */\r\n\r\n        function selectColor(namespace) {\r\n          var hash = 0;\r\n\r\n          for (var i = 0; i < namespace.length; i++) {\r\n            hash = (hash << 5) - hash + namespace.charCodeAt(i);\r\n            hash |= 0; // Convert to 32bit integer\r\n          }\r\n\r\n          return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\r\n        }\r\n\r\n        createDebug.selectColor = selectColor;\r\n        /**\r\n        * Create a debugger with the given `namespace`.\r\n        *\r\n        * @param {String} namespace\r\n        * @return {Function}\r\n        * @api public\r\n        */\r\n\r\n        function createDebug(namespace) {\r\n          var prevTime;\r\n\r\n          function debug() {\r\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n              args[_key] = arguments[_key];\r\n            }\r\n\r\n            // Disabled?\r\n            if (!debug.enabled) {\r\n              return;\r\n            }\r\n\r\n            var self = debug; // Set `diff` timestamp\r\n\r\n            var curr = Number(new Date());\r\n            var ms = curr - (prevTime || curr);\r\n            self.diff = ms;\r\n            self.prev = prevTime;\r\n            self.curr = curr;\r\n            prevTime = curr;\r\n            args[0] = createDebug.coerce(args[0]);\r\n\r\n            if (typeof args[0] !== 'string') {\r\n              // Anything else let's inspect with %O\r\n              args.unshift('%O');\r\n            } // Apply any `formatters` transformations\r\n\r\n\r\n            var index = 0;\r\n            args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\r\n              // If we encounter an escaped % then don't increase the array index\r\n              if (match === '%%') {\r\n                return match;\r\n              }\r\n\r\n              index++;\r\n              var formatter = createDebug.formatters[format];\r\n\r\n              if (typeof formatter === 'function') {\r\n                var val = args[index];\r\n                match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\r\n\r\n                args.splice(index, 1);\r\n                index--;\r\n              }\r\n\r\n              return match;\r\n            }); // Apply env-specific formatting (colors, etc.)\r\n\r\n            createDebug.formatArgs.call(self, args);\r\n            var logFn = self.log || createDebug.log;\r\n            logFn.apply(self, args);\r\n          }\r\n\r\n          debug.namespace = namespace;\r\n          debug.enabled = createDebug.enabled(namespace);\r\n          debug.useColors = createDebug.useColors();\r\n          debug.color = selectColor(namespace);\r\n          debug.destroy = destroy;\r\n          debug.extend = extend; // Debug.formatArgs = formatArgs;\r\n          // debug.rawLog = rawLog;\r\n          // env-specific initialization logic for debug instances\r\n\r\n          if (typeof createDebug.init === 'function') {\r\n            createDebug.init(debug);\r\n          }\r\n\r\n          createDebug.instances.push(debug);\r\n          return debug;\r\n        }\r\n\r\n        function destroy() {\r\n          var index = createDebug.instances.indexOf(this);\r\n\r\n          if (index !== -1) {\r\n            createDebug.instances.splice(index, 1);\r\n            return true;\r\n          }\r\n\r\n          return false;\r\n        }\r\n\r\n        function extend(namespace, delimiter) {\r\n          var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\r\n          newDebug.log = this.log;\r\n          return newDebug;\r\n        }\r\n        /**\r\n        * Enables a debug mode by namespaces. This can include modes\r\n        * separated by a colon and wildcards.\r\n        *\r\n        * @param {String} namespaces\r\n        * @api public\r\n        */\r\n\r\n\r\n        function enable(namespaces) {\r\n          createDebug.save(namespaces);\r\n          createDebug.names = [];\r\n          createDebug.skips = [];\r\n          var i;\r\n          var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\r\n          var len = split.length;\r\n\r\n          for (i = 0; i < len; i++) {\r\n            if (!split[i]) {\r\n              // ignore empty strings\r\n              continue;\r\n            }\r\n\r\n            namespaces = split[i].replace(/\\*/g, '.*?');\r\n\r\n            if (namespaces[0] === '-') {\r\n              createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\r\n            } else {\r\n              createDebug.names.push(new RegExp('^' + namespaces + '$'));\r\n            }\r\n          }\r\n\r\n          for (i = 0; i < createDebug.instances.length; i++) {\r\n            var instance = createDebug.instances[i];\r\n            instance.enabled = createDebug.enabled(instance.namespace);\r\n          }\r\n        }\r\n        /**\r\n        * Disable debug output.\r\n        *\r\n        * @return {String} namespaces\r\n        * @api public\r\n        */\r\n\r\n\r\n        function disable() {\r\n          var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\r\n            return '-' + namespace;\r\n          }))).join(',');\r\n          createDebug.enable('');\r\n          return namespaces;\r\n        }\r\n        /**\r\n        * Returns true if the given mode name is enabled, false otherwise.\r\n        *\r\n        * @param {String} name\r\n        * @return {Boolean}\r\n        * @api public\r\n        */\r\n\r\n\r\n        function enabled(name) {\r\n          if (name[name.length - 1] === '*') {\r\n            return true;\r\n          }\r\n\r\n          var i;\r\n          var len;\r\n\r\n          for (i = 0, len = createDebug.skips.length; i < len; i++) {\r\n            if (createDebug.skips[i].test(name)) {\r\n              return false;\r\n            }\r\n          }\r\n\r\n          for (i = 0, len = createDebug.names.length; i < len; i++) {\r\n            if (createDebug.names[i].test(name)) {\r\n              return true;\r\n            }\r\n          }\r\n\r\n          return false;\r\n        }\r\n        /**\r\n        * Convert regexp to namespace\r\n        *\r\n        * @param {RegExp} regxep\r\n        * @return {String} namespace\r\n        * @api private\r\n        */\r\n\r\n\r\n        function toNamespace(regexp) {\r\n          return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\r\n        }\r\n        /**\r\n        * Coerce `val`.\r\n        *\r\n        * @param {Mixed} val\r\n        * @return {Mixed}\r\n        * @api private\r\n        */\r\n\r\n\r\n        function coerce(val) {\r\n          if (val instanceof Error) {\r\n            return val.stack || val.message;\r\n          }\r\n\r\n          return val;\r\n        }\r\n\r\n        createDebug.enable(createDebug.load());\r\n        return createDebug;\r\n      }\r\n\r\n      module.exports = setup;\r\n    }, {\r\n      \"ms\": 1\r\n    }],\r\n    4: [function (require, module, exports) {\r\n      (function (process) {\r\n        /* eslint-env browser */\r\n\r\n        /**\r\n         * This is the web browser implementation of `debug()`.\r\n         */\r\n        exports.log = log;\r\n        exports.formatArgs = formatArgs;\r\n        exports.save = save;\r\n        exports.load = load;\r\n        exports.useColors = useColors;\r\n        exports.storage = localstorage();\r\n        /**\r\n         * Colors.\r\n         */\r\n\r\n        exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\r\n        /**\r\n         * Currently only WebKit-based Web Inspectors, Firefox >= v31,\r\n         * and the Firebug extension (any Firefox version) are known\r\n         * to support \"%c\" CSS customizations.\r\n         *\r\n         * TODO: add a `localStorage` variable to explicitly enable/disable colors\r\n         */\r\n        // eslint-disable-next-line complexity\r\n\r\n        function useColors() {\r\n          // NB: In an Electron preload script, document will be defined but not fully\r\n          // initialized. Since we know we're in Chrome, we'll just detect this case\r\n          // explicitly\r\n          if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\r\n            return true;\r\n          } // Internet Explorer and Edge do not support colors.\r\n\r\n\r\n          if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\r\n            return false;\r\n          } // Is webkit? http://stackoverflow.com/a/16459606/376773\r\n          // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\r\n\r\n\r\n          return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\r\n          typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\r\n          // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\r\n          typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\r\n          typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\r\n        }\r\n        /**\r\n         * Colorize log arguments if enabled.\r\n         *\r\n         * @api public\r\n         */\r\n\r\n\r\n        function formatArgs(args) {\r\n          args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\r\n\r\n          if (!this.useColors) {\r\n            return;\r\n          }\r\n\r\n          var c = 'color: ' + this.color;\r\n          args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\r\n          // arguments passed either before or after the %c, so we need to\r\n          // figure out the correct index to insert the CSS into\r\n\r\n          var index = 0;\r\n          var lastC = 0;\r\n          args[0].replace(/%[a-zA-Z%]/g, function (match) {\r\n            if (match === '%%') {\r\n              return;\r\n            }\r\n\r\n            index++;\r\n\r\n            if (match === '%c') {\r\n              // We only are interested in the *last* %c\r\n              // (the user may have provided their own)\r\n              lastC = index;\r\n            }\r\n          });\r\n          args.splice(lastC, 0, c);\r\n        }\r\n        /**\r\n         * Invokes `console.log()` when available.\r\n         * No-op when `console.log` is not a \"function\".\r\n         *\r\n         * @api public\r\n         */\r\n\r\n\r\n        function log() {\r\n          var _console;\r\n\r\n          // This hackery is required for IE8/9, where\r\n          // the `console.log` function doesn't have 'apply'\r\n          return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\r\n        }\r\n        /**\r\n         * Save `namespaces`.\r\n         *\r\n         * @param {String} namespaces\r\n         * @api private\r\n         */\r\n\r\n\r\n        function save(namespaces) {\r\n          try {\r\n            if (namespaces) {\r\n              exports.storage.setItem('debug', namespaces);\r\n            } else {\r\n              exports.storage.removeItem('debug');\r\n            }\r\n          } catch (error) {// Swallow\r\n            // XXX (@Qix-) should we be logging these?\r\n          }\r\n        }\r\n        /**\r\n         * Load `namespaces`.\r\n         *\r\n         * @return {String} returns the previously persisted debug modes\r\n         * @api private\r\n         */\r\n\r\n\r\n        function load() {\r\n          var r;\r\n\r\n          try {\r\n            r = exports.storage.getItem('debug');\r\n          } catch (error) {} // Swallow\r\n          // XXX (@Qix-) should we be logging these?\r\n          // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\r\n\r\n\r\n          if (!r && typeof process !== 'undefined' && 'env' in process) {\r\n            r = process.env.DEBUG;\r\n          }\r\n\r\n          return r;\r\n        }\r\n        /**\r\n         * Localstorage attempts to return the localstorage.\r\n         *\r\n         * This is necessary because safari throws\r\n         * when a user disables cookies/localstorage\r\n         * and you attempt to access it.\r\n         *\r\n         * @return {LocalStorage}\r\n         * @api private\r\n         */\r\n\r\n\r\n        function localstorage() {\r\n          try {\r\n            // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\r\n            // The Browser also has localStorage in the global context.\r\n            return localStorage;\r\n          } catch (error) {// Swallow\r\n            // XXX (@Qix-) should we be logging these?\r\n          }\r\n        }\r\n\r\n        module.exports = require('./common')(exports);\r\n        var formatters = module.exports.formatters;\r\n        /**\r\n         * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\r\n         */\r\n\r\n        formatters.j = function (v) {\r\n          try {\r\n            return JSON.stringify(v);\r\n          } catch (error) {\r\n            return '[UnexpectedJSONParseError]: ' + error.message;\r\n          }\r\n        };\r\n      }).call(this, require('_process'));\r\n    }, {\r\n      \"./common\": 3,\r\n      \"_process\": 2\r\n    }]\r\n  }, {}, [4])(4);\r\n});\r\n","// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\nvar R = typeof Reflect === 'object' ? Reflect : null\r\nvar ReflectApply = R && typeof R.apply === 'function'\r\n  ? R.apply\r\n  : function ReflectApply(target, receiver, args) {\r\n    return Function.prototype.apply.call(target, receiver, args);\r\n  }\r\n\r\nvar ReflectOwnKeys\r\nif (R && typeof R.ownKeys === 'function') {\r\n  ReflectOwnKeys = R.ownKeys\r\n} else if (Object.getOwnPropertySymbols) {\r\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\r\n    return Object.getOwnPropertyNames(target)\r\n      .concat(Object.getOwnPropertySymbols(target));\r\n  };\r\n} else {\r\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\r\n    return Object.getOwnPropertyNames(target);\r\n  };\r\n}\r\n\r\nfunction ProcessEmitWarning(warning) {\r\n  if (console && console.warn) console.warn(warning);\r\n}\r\n\r\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\r\n  return value !== value;\r\n}\r\n\r\nfunction EventEmitter() {\r\n  EventEmitter.init.call(this);\r\n}\r\nmodule.exports = EventEmitter;\r\n\r\n// Backwards-compat with node 0.10.x\r\nEventEmitter.EventEmitter = EventEmitter;\r\n\r\nEventEmitter.prototype._events = undefined;\r\nEventEmitter.prototype._eventsCount = 0;\r\nEventEmitter.prototype._maxListeners = undefined;\r\n\r\n// By default EventEmitters will print a warning if more than 10 listeners are\r\n// added to it. This is a useful default which helps finding memory leaks.\r\nvar defaultMaxListeners = 10;\r\n\r\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\r\n  enumerable: true,\r\n  get: function() {\r\n    return defaultMaxListeners;\r\n  },\r\n  set: function(arg) {\r\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\r\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\r\n    }\r\n    defaultMaxListeners = arg;\r\n  }\r\n});\r\n\r\nEventEmitter.init = function() {\r\n\r\n  if (this._events === undefined ||\r\n      this._events === Object.getPrototypeOf(this)._events) {\r\n    this._events = Object.create(null);\r\n    this._eventsCount = 0;\r\n  }\r\n\r\n  this._maxListeners = this._maxListeners || undefined;\r\n};\r\n\r\n// Obviously not all Emitters should be limited to 10. This function allows\r\n// that to be increased. Set to zero for unlimited.\r\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\r\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\r\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\r\n  }\r\n  this._maxListeners = n;\r\n  return this;\r\n};\r\n\r\nfunction $getMaxListeners(that) {\r\n  if (that._maxListeners === undefined)\r\n    return EventEmitter.defaultMaxListeners;\r\n  return that._maxListeners;\r\n}\r\n\r\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\r\n  return $getMaxListeners(this);\r\n};\r\n\r\nEventEmitter.prototype.emit = function emit(type) {\r\n  var args = [];\r\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\r\n  var doError = (type === 'error');\r\n\r\n  var events = this._events;\r\n  if (events !== undefined)\r\n    doError = (doError && events.error === undefined);\r\n  else if (!doError)\r\n    return false;\r\n\r\n  // If there is no 'error' event listener then throw.\r\n  if (doError) {\r\n    var er;\r\n    if (args.length > 0)\r\n      er = args[0];\r\n    if (er instanceof Error) {\r\n      // Note: The comments on the `throw` lines are intentional, they show\r\n      // up in Node's output if this results in an unhandled exception.\r\n      throw er; // Unhandled 'error' event\r\n    }\r\n    // At least give some kind of context to the user\r\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\r\n    err.context = er;\r\n    throw err; // Unhandled 'error' event\r\n  }\r\n\r\n  var handler = events[type];\r\n\r\n  if (handler === undefined)\r\n    return false;\r\n\r\n  if (typeof handler === 'function') {\r\n    ReflectApply(handler, this, args);\r\n  } else {\r\n    var len = handler.length;\r\n    var listeners = arrayClone(handler, len);\r\n    for (var i = 0; i < len; ++i)\r\n      ReflectApply(listeners[i], this, args);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction _addListener(target, type, listener, prepend) {\r\n  var m;\r\n  var events;\r\n  var existing;\r\n\r\n  if (typeof listener !== 'function') {\r\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\r\n  }\r\n\r\n  events = target._events;\r\n  if (events === undefined) {\r\n    events = target._events = Object.create(null);\r\n    target._eventsCount = 0;\r\n  } else {\r\n    // To avoid recursion in the case that type === \"newListener\"! Before\r\n    // adding it to the listeners, first emit \"newListener\".\r\n    if (events.newListener !== undefined) {\r\n      target.emit('newListener', type,\r\n                  listener.listener ? listener.listener : listener);\r\n\r\n      // Re-assign `events` because a newListener handler could have caused the\r\n      // this._events to be assigned to a new object\r\n      events = target._events;\r\n    }\r\n    existing = events[type];\r\n  }\r\n\r\n  if (existing === undefined) {\r\n    // Optimize the case of one listener. Don't need the extra array object.\r\n    existing = events[type] = listener;\r\n    ++target._eventsCount;\r\n  } else {\r\n    if (typeof existing === 'function') {\r\n      // Adding the second element, need to change to array.\r\n      existing = events[type] =\r\n        prepend ? [listener, existing] : [existing, listener];\r\n      // If we've already got an array, just append.\r\n    } else if (prepend) {\r\n      existing.unshift(listener);\r\n    } else {\r\n      existing.push(listener);\r\n    }\r\n\r\n    // Check for listener leak\r\n    m = $getMaxListeners(target);\r\n    if (m > 0 && existing.length > m && !existing.warned) {\r\n      existing.warned = true;\r\n      // No error code for this since it is a Warning\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\r\n                          existing.length + ' ' + String(type) + ' listeners ' +\r\n                          'added. Use emitter.setMaxListeners() to ' +\r\n                          'increase limit');\r\n      w.name = 'MaxListenersExceededWarning';\r\n      w.emitter = target;\r\n      w.type = type;\r\n      w.count = existing.length;\r\n      ProcessEmitWarning(w);\r\n    }\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nEventEmitter.prototype.addListener = function addListener(type, listener) {\r\n  return _addListener(this, type, listener, false);\r\n};\r\n\r\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\r\n\r\nEventEmitter.prototype.prependListener =\r\n    function prependListener(type, listener) {\r\n      return _addListener(this, type, listener, true);\r\n    };\r\n\r\nfunction onceWrapper() {\r\n  var args = [];\r\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\r\n  if (!this.fired) {\r\n    this.target.removeListener(this.type, this.wrapFn);\r\n    this.fired = true;\r\n    ReflectApply(this.listener, this.target, args);\r\n  }\r\n}\r\n\r\nfunction _onceWrap(target, type, listener) {\r\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\r\n  var wrapped = onceWrapper.bind(state);\r\n  wrapped.listener = listener;\r\n  state.wrapFn = wrapped;\r\n  return wrapped;\r\n}\r\n\r\nEventEmitter.prototype.once = function once(type, listener) {\r\n  if (typeof listener !== 'function') {\r\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\r\n  }\r\n  this.on(type, _onceWrap(this, type, listener));\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.prependOnceListener =\r\n    function prependOnceListener(type, listener) {\r\n      if (typeof listener !== 'function') {\r\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\r\n      }\r\n      this.prependListener(type, _onceWrap(this, type, listener));\r\n      return this;\r\n    };\r\n\r\n// Emits a 'removeListener' event if and only if the listener was removed.\r\nEventEmitter.prototype.removeListener =\r\n    function removeListener(type, listener) {\r\n      var list, events, position, i, originalListener;\r\n\r\n      if (typeof listener !== 'function') {\r\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\r\n      }\r\n\r\n      events = this._events;\r\n      if (events === undefined)\r\n        return this;\r\n\r\n      list = events[type];\r\n      if (list === undefined)\r\n        return this;\r\n\r\n      if (list === listener || list.listener === listener) {\r\n        if (--this._eventsCount === 0)\r\n          this._events = Object.create(null);\r\n        else {\r\n          delete events[type];\r\n          if (events.removeListener)\r\n            this.emit('removeListener', type, list.listener || listener);\r\n        }\r\n      } else if (typeof list !== 'function') {\r\n        position = -1;\r\n\r\n        for (i = list.length - 1; i >= 0; i--) {\r\n          if (list[i] === listener || list[i].listener === listener) {\r\n            originalListener = list[i].listener;\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0)\r\n          return this;\r\n\r\n        if (position === 0)\r\n          list.shift();\r\n        else {\r\n          spliceOne(list, position);\r\n        }\r\n\r\n        if (list.length === 1)\r\n          events[type] = list[0];\r\n\r\n        if (events.removeListener !== undefined)\r\n          this.emit('removeListener', type, originalListener || listener);\r\n      }\r\n\r\n      return this;\r\n    };\r\n\r\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\r\n\r\nEventEmitter.prototype.removeAllListeners =\r\n    function removeAllListeners(type) {\r\n      var listeners, events, i;\r\n\r\n      events = this._events;\r\n      if (events === undefined)\r\n        return this;\r\n\r\n      // not listening for removeListener, no need to emit\r\n      if (events.removeListener === undefined) {\r\n        if (arguments.length === 0) {\r\n          this._events = Object.create(null);\r\n          this._eventsCount = 0;\r\n        } else if (events[type] !== undefined) {\r\n          if (--this._eventsCount === 0)\r\n            this._events = Object.create(null);\r\n          else\r\n            delete events[type];\r\n        }\r\n        return this;\r\n      }\r\n\r\n      // emit removeListener for all listeners on all events\r\n      if (arguments.length === 0) {\r\n        var keys = Object.keys(events);\r\n        var key;\r\n        for (i = 0; i < keys.length; ++i) {\r\n          key = keys[i];\r\n          if (key === 'removeListener') continue;\r\n          this.removeAllListeners(key);\r\n        }\r\n        this.removeAllListeners('removeListener');\r\n        this._events = Object.create(null);\r\n        this._eventsCount = 0;\r\n        return this;\r\n      }\r\n\r\n      listeners = events[type];\r\n\r\n      if (typeof listeners === 'function') {\r\n        this.removeListener(type, listeners);\r\n      } else if (listeners !== undefined) {\r\n        // LIFO order\r\n        for (i = listeners.length - 1; i >= 0; i--) {\r\n          this.removeListener(type, listeners[i]);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    };\r\n\r\nfunction _listeners(target, type, unwrap) {\r\n  var events = target._events;\r\n\r\n  if (events === undefined)\r\n    return [];\r\n\r\n  var evlistener = events[type];\r\n  if (evlistener === undefined)\r\n    return [];\r\n\r\n  if (typeof evlistener === 'function')\r\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\r\n\r\n  return unwrap ?\r\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\r\n}\r\n\r\nEventEmitter.prototype.listeners = function listeners(type) {\r\n  return _listeners(this, type, true);\r\n};\r\n\r\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\r\n  return _listeners(this, type, false);\r\n};\r\n\r\nEventEmitter.listenerCount = function(emitter, type) {\r\n  if (typeof emitter.listenerCount === 'function') {\r\n    return emitter.listenerCount(type);\r\n  } else {\r\n    return listenerCount.call(emitter, type);\r\n  }\r\n};\r\n\r\nEventEmitter.prototype.listenerCount = listenerCount;\r\nfunction listenerCount(type) {\r\n  var events = this._events;\r\n\r\n  if (events !== undefined) {\r\n    var evlistener = events[type];\r\n\r\n    if (typeof evlistener === 'function') {\r\n      return 1;\r\n    } else if (evlistener !== undefined) {\r\n      return evlistener.length;\r\n    }\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nEventEmitter.prototype.eventNames = function eventNames() {\r\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\r\n};\r\n\r\nfunction arrayClone(arr, n) {\r\n  var copy = new Array(n);\r\n  for (var i = 0; i < n; ++i)\r\n    copy[i] = arr[i];\r\n  return copy;\r\n}\r\n\r\nfunction spliceOne(list, index) {\r\n  for (; index + 1 < list.length; index++)\r\n    list[index] = list[index + 1];\r\n  list.pop();\r\n}\r\n\r\nfunction unwrapListeners(arr) {\r\n  var ret = new Array(arr.length);\r\n  for (var i = 0; i < ret.length; ++i) {\r\n    ret[i] = arr[i].listener || arr[i];\r\n  }\r\n  return ret;\r\n}\r\n","/**\r\n * Copyright (c) 2014-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nvar regeneratorRuntime = (function (exports) {\r\n  \"use strict\";\r\n\r\n  var Op = Object.prototype;\r\n  var hasOwn = Op.hasOwnProperty;\r\n  var undefined; // More compressible than void 0.\r\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n  function wrap(innerFn, outerFn, self, tryLocsList) {\r\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n    var generator = Object.create(protoGenerator.prototype);\r\n    var context = new Context(tryLocsList || []);\r\n\r\n    // The ._invoke method unifies the implementations of the .next,\r\n    // .throw, and .return methods.\r\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\r\n\r\n    return generator;\r\n  }\r\n  exports.wrap = wrap;\r\n\r\n  // Try/catch helper to minimize deoptimizations. Returns a completion\r\n  // record like context.tryEntries[i].completion. This interface could\r\n  // have been (and was previously) designed to take a closure to be\r\n  // invoked without arguments, but in all the cases we care about we\r\n  // already have an existing method we want to call, so there's no need\r\n  // to create a new function object. We can even get away with assuming\r\n  // the method takes exactly one argument, since that happens to be true\r\n  // in every case, so we don't have to touch the arguments object. The\r\n  // only additional allocation required is the completion record, which\r\n  // has a stable shape and so hopefully should be cheap to allocate.\r\n  function tryCatch(fn, obj, arg) {\r\n    try {\r\n      return { type: \"normal\", arg: fn.call(obj, arg) };\r\n    } catch (err) {\r\n      return { type: \"throw\", arg: err };\r\n    }\r\n  }\r\n\r\n  var GenStateSuspendedStart = \"suspendedStart\";\r\n  var GenStateSuspendedYield = \"suspendedYield\";\r\n  var GenStateExecuting = \"executing\";\r\n  var GenStateCompleted = \"completed\";\r\n\r\n  // Returning this object from the innerFn has the same effect as\r\n  // breaking out of the dispatch switch statement.\r\n  var ContinueSentinel = {};\r\n\r\n  // Dummy constructor functions that we use as the .constructor and\r\n  // .constructor.prototype properties for functions that return Generator\r\n  // objects. For full spec compliance, you may wish to configure your\r\n  // minifier not to mangle the names of these two functions.\r\n  function Generator() {}\r\n  function GeneratorFunction() {}\r\n  function GeneratorFunctionPrototype() {}\r\n\r\n  // This is a polyfill for %IteratorPrototype% for environments that\r\n  // don't natively support it.\r\n  var IteratorPrototype = {};\r\n  IteratorPrototype[iteratorSymbol] = function () {\r\n    return this;\r\n  };\r\n\r\n  var getProto = Object.getPrototypeOf;\r\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n  if (NativeIteratorPrototype &&\r\n      NativeIteratorPrototype !== Op &&\r\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n    // This environment has a native %IteratorPrototype%; use it instead\r\n    // of the polyfill.\r\n    IteratorPrototype = NativeIteratorPrototype;\r\n  }\r\n\r\n  var Gp = GeneratorFunctionPrototype.prototype =\r\n    Generator.prototype = Object.create(IteratorPrototype);\r\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\r\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\r\n  GeneratorFunctionPrototype[toStringTagSymbol] =\r\n    GeneratorFunction.displayName = \"GeneratorFunction\";\r\n\r\n  // Helper for defining the .next, .throw, and .return methods of the\r\n  // Iterator interface in terms of a single ._invoke method.\r\n  function defineIteratorMethods(prototype) {\r\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n      prototype[method] = function(arg) {\r\n        return this._invoke(method, arg);\r\n      };\r\n    });\r\n  }\r\n\r\n  exports.isGeneratorFunction = function(genFun) {\r\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n    return ctor\r\n      ? ctor === GeneratorFunction ||\r\n        // For the native GeneratorFunction constructor, the best we can\r\n        // do is to check its .name property.\r\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n      : false;\r\n  };\r\n\r\n  exports.mark = function(genFun) {\r\n    if (Object.setPrototypeOf) {\r\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n    } else {\r\n      genFun.__proto__ = GeneratorFunctionPrototype;\r\n      if (!(toStringTagSymbol in genFun)) {\r\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\r\n      }\r\n    }\r\n    genFun.prototype = Object.create(Gp);\r\n    return genFun;\r\n  };\r\n\r\n  // Within the body of any async function, `await x` is transformed to\r\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n  // meant to be awaited.\r\n  exports.awrap = function(arg) {\r\n    return { __await: arg };\r\n  };\r\n\r\n  function AsyncIterator(generator) {\r\n    function invoke(method, arg, resolve, reject) {\r\n      var record = tryCatch(generator[method], generator, arg);\r\n      if (record.type === \"throw\") {\r\n        reject(record.arg);\r\n      } else {\r\n        var result = record.arg;\r\n        var value = result.value;\r\n        if (value &&\r\n            typeof value === \"object\" &&\r\n            hasOwn.call(value, \"__await\")) {\r\n          return Promise.resolve(value.__await).then(function(value) {\r\n            invoke(\"next\", value, resolve, reject);\r\n          }, function(err) {\r\n            invoke(\"throw\", err, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return Promise.resolve(value).then(function(unwrapped) {\r\n          // When a yielded Promise is resolved, its final value becomes\r\n          // the .value of the Promise<{value,done}> result for the\r\n          // current iteration.\r\n          result.value = unwrapped;\r\n          resolve(result);\r\n        }, function(error) {\r\n          // If a rejected Promise was yielded, throw the rejection back\r\n          // into the async generator function so it can be handled there.\r\n          return invoke(\"throw\", error, resolve, reject);\r\n        });\r\n      }\r\n    }\r\n\r\n    var previousPromise;\r\n\r\n    function enqueue(method, arg) {\r\n      function callInvokeWithMethodAndArg() {\r\n        return new Promise(function(resolve, reject) {\r\n          invoke(method, arg, resolve, reject);\r\n        });\r\n      }\r\n\r\n      return previousPromise =\r\n        // If enqueue has been called before, then we want to wait until\r\n        // all previous Promises have been resolved before calling invoke,\r\n        // so that results are always delivered in the correct order. If\r\n        // enqueue has not been called before, then it is important to\r\n        // call invoke immediately, without waiting on a callback to fire,\r\n        // so that the async generator function has the opportunity to do\r\n        // any necessary setup in a predictable way. This predictability\r\n        // is why the Promise constructor synchronously invokes its\r\n        // executor callback, and why async functions synchronously\r\n        // execute code before the first await. Since we implement simple\r\n        // async functions in terms of async generators, it is especially\r\n        // important to get this right, even though it requires care.\r\n        previousPromise ? previousPromise.then(\r\n          callInvokeWithMethodAndArg,\r\n          // Avoid propagating failures to Promises returned by later\r\n          // invocations of the iterator.\r\n          callInvokeWithMethodAndArg\r\n        ) : callInvokeWithMethodAndArg();\r\n    }\r\n\r\n    // Define the unified helper method that is used to implement .next,\r\n    // .throw, and .return (see defineIteratorMethods).\r\n    this._invoke = enqueue;\r\n  }\r\n\r\n  defineIteratorMethods(AsyncIterator.prototype);\r\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\r\n    return this;\r\n  };\r\n  exports.AsyncIterator = AsyncIterator;\r\n\r\n  // Note that simple async functions are implemented on top of\r\n  // AsyncIterator objects; they just return a Promise for the value of\r\n  // the final result produced by the iterator.\r\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\r\n    var iter = new AsyncIterator(\r\n      wrap(innerFn, outerFn, self, tryLocsList)\r\n    );\r\n\r\n    return exports.isGeneratorFunction(outerFn)\r\n      ? iter // If outerFn is a generator, return the full iterator.\r\n      : iter.next().then(function(result) {\r\n          return result.done ? result.value : iter.next();\r\n        });\r\n  };\r\n\r\n  function makeInvokeMethod(innerFn, self, context) {\r\n    var state = GenStateSuspendedStart;\r\n\r\n    return function invoke(method, arg) {\r\n      if (state === GenStateExecuting) {\r\n        throw new Error(\"Generator is already running\");\r\n      }\r\n\r\n      if (state === GenStateCompleted) {\r\n        if (method === \"throw\") {\r\n          throw arg;\r\n        }\r\n\r\n        // Be forgiving, per 25.3.3.3.3 of the spec:\r\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n        return doneResult();\r\n      }\r\n\r\n      context.method = method;\r\n      context.arg = arg;\r\n\r\n      while (true) {\r\n        var delegate = context.delegate;\r\n        if (delegate) {\r\n          var delegateResult = maybeInvokeDelegate(delegate, context);\r\n          if (delegateResult) {\r\n            if (delegateResult === ContinueSentinel) continue;\r\n            return delegateResult;\r\n          }\r\n        }\r\n\r\n        if (context.method === \"next\") {\r\n          // Setting context._sent for legacy support of Babel's\r\n          // function.sent implementation.\r\n          context.sent = context._sent = context.arg;\r\n\r\n        } else if (context.method === \"throw\") {\r\n          if (state === GenStateSuspendedStart) {\r\n            state = GenStateCompleted;\r\n            throw context.arg;\r\n          }\r\n\r\n          context.dispatchException(context.arg);\r\n\r\n        } else if (context.method === \"return\") {\r\n          context.abrupt(\"return\", context.arg);\r\n        }\r\n\r\n        state = GenStateExecuting;\r\n\r\n        var record = tryCatch(innerFn, self, context);\r\n        if (record.type === \"normal\") {\r\n          // If an exception is thrown from innerFn, we leave state ===\r\n          // GenStateExecuting and loop back for another invocation.\r\n          state = context.done\r\n            ? GenStateCompleted\r\n            : GenStateSuspendedYield;\r\n\r\n          if (record.arg === ContinueSentinel) {\r\n            continue;\r\n          }\r\n\r\n          return {\r\n            value: record.arg,\r\n            done: context.done\r\n          };\r\n\r\n        } else if (record.type === \"throw\") {\r\n          state = GenStateCompleted;\r\n          // Dispatch the exception by looping back around to the\r\n          // context.dispatchException(context.arg) call above.\r\n          context.method = \"throw\";\r\n          context.arg = record.arg;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Call delegate.iterator[context.method](context.arg) and handle the\r\n  // result, either by returning a { value, done } result from the\r\n  // delegate iterator, or by modifying context.method and context.arg,\r\n  // setting context.delegate to null, and returning the ContinueSentinel.\r\n  function maybeInvokeDelegate(delegate, context) {\r\n    var method = delegate.iterator[context.method];\r\n    if (method === undefined) {\r\n      // A .throw or .return when the delegate iterator has no .throw\r\n      // method always terminates the yield* loop.\r\n      context.delegate = null;\r\n\r\n      if (context.method === \"throw\") {\r\n        if (delegate.iterator.return) {\r\n          // If the delegate iterator has a return method, give it a\r\n          // chance to clean up.\r\n          context.method = \"return\";\r\n          context.arg = undefined;\r\n          maybeInvokeDelegate(delegate, context);\r\n\r\n          if (context.method === \"throw\") {\r\n            // If maybeInvokeDelegate(context) changed context.method from\r\n            // \"return\" to \"throw\", let that override the TypeError below.\r\n            return ContinueSentinel;\r\n          }\r\n        }\r\n\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\r\n          \"The iterator does not provide a 'throw' method\");\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n    if (record.type === \"throw\") {\r\n      context.method = \"throw\";\r\n      context.arg = record.arg;\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var info = record.arg;\r\n\r\n    if (! info) {\r\n      context.method = \"throw\";\r\n      context.arg = new TypeError(\"iterator result is not an object\");\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    if (info.done) {\r\n      // Assign the result of the finished delegate to the temporary\r\n      // variable specified by delegate.resultName (see delegateYield).\r\n      context[delegate.resultName] = info.value;\r\n\r\n      // Resume execution at the desired location (see delegateYield).\r\n      context.next = delegate.nextLoc;\r\n\r\n      // If context.method was \"throw\" but the delegate handled the\r\n      // exception, let the outer generator proceed normally. If\r\n      // context.method was \"next\", forget context.arg since it has been\r\n      // \"consumed\" by the delegate iterator. If context.method was\r\n      // \"return\", allow the original .return call to continue in the\r\n      // outer generator.\r\n      if (context.method !== \"return\") {\r\n        context.method = \"next\";\r\n        context.arg = undefined;\r\n      }\r\n\r\n    } else {\r\n      // Re-yield the result returned by the delegate method.\r\n      return info;\r\n    }\r\n\r\n    // The delegate iterator is finished, so forget it and continue with\r\n    // the outer generator.\r\n    context.delegate = null;\r\n    return ContinueSentinel;\r\n  }\r\n\r\n  // Define Generator.prototype.{next,throw,return} in terms of the\r\n  // unified ._invoke helper method.\r\n  defineIteratorMethods(Gp);\r\n\r\n  Gp[toStringTagSymbol] = \"Generator\";\r\n\r\n  // A Generator should always return itself as the iterator object when the\r\n  // @@iterator function is called on it. Some browsers' implementations of the\r\n  // iterator prototype chain incorrectly implement this, causing the Generator\r\n  // object to not be returned from this call. This ensures that doesn't happen.\r\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n  Gp[iteratorSymbol] = function() {\r\n    return this;\r\n  };\r\n\r\n  Gp.toString = function() {\r\n    return \"[object Generator]\";\r\n  };\r\n\r\n  function pushTryEntry(locs) {\r\n    var entry = { tryLoc: locs[0] };\r\n\r\n    if (1 in locs) {\r\n      entry.catchLoc = locs[1];\r\n    }\r\n\r\n    if (2 in locs) {\r\n      entry.finallyLoc = locs[2];\r\n      entry.afterLoc = locs[3];\r\n    }\r\n\r\n    this.tryEntries.push(entry);\r\n  }\r\n\r\n  function resetTryEntry(entry) {\r\n    var record = entry.completion || {};\r\n    record.type = \"normal\";\r\n    delete record.arg;\r\n    entry.completion = record;\r\n  }\r\n\r\n  function Context(tryLocsList) {\r\n    // The root entry object (effectively a try statement without a catch\r\n    // or a finally block) gives us a place to store values thrown from\r\n    // locations where there is no enclosing try statement.\r\n    this.tryEntries = [{ tryLoc: \"root\" }];\r\n    tryLocsList.forEach(pushTryEntry, this);\r\n    this.reset(true);\r\n  }\r\n\r\n  exports.keys = function(object) {\r\n    var keys = [];\r\n    for (var key in object) {\r\n      keys.push(key);\r\n    }\r\n    keys.reverse();\r\n\r\n    // Rather than returning an object with a next method, we keep\r\n    // things simple and return the next function itself.\r\n    return function next() {\r\n      while (keys.length) {\r\n        var key = keys.pop();\r\n        if (key in object) {\r\n          next.value = key;\r\n          next.done = false;\r\n          return next;\r\n        }\r\n      }\r\n\r\n      // To avoid creating an additional object, we just hang the .value\r\n      // and .done properties off the next function object itself. This\r\n      // also ensures that the minifier will not anonymize the function.\r\n      next.done = true;\r\n      return next;\r\n    };\r\n  };\r\n\r\n  function values(iterable) {\r\n    if (iterable) {\r\n      var iteratorMethod = iterable[iteratorSymbol];\r\n      if (iteratorMethod) {\r\n        return iteratorMethod.call(iterable);\r\n      }\r\n\r\n      if (typeof iterable.next === \"function\") {\r\n        return iterable;\r\n      }\r\n\r\n      if (!isNaN(iterable.length)) {\r\n        var i = -1, next = function next() {\r\n          while (++i < iterable.length) {\r\n            if (hasOwn.call(iterable, i)) {\r\n              next.value = iterable[i];\r\n              next.done = false;\r\n              return next;\r\n            }\r\n          }\r\n\r\n          next.value = undefined;\r\n          next.done = true;\r\n\r\n          return next;\r\n        };\r\n\r\n        return next.next = next;\r\n      }\r\n    }\r\n\r\n    // Return an iterator with no values.\r\n    return { next: doneResult };\r\n  }\r\n  exports.values = values;\r\n\r\n  function doneResult() {\r\n    return { value: undefined, done: true };\r\n  }\r\n\r\n  Context.prototype = {\r\n    constructor: Context,\r\n\r\n    reset: function(skipTempReset) {\r\n      this.prev = 0;\r\n      this.next = 0;\r\n      // Resetting context._sent for legacy support of Babel's\r\n      // function.sent implementation.\r\n      this.sent = this._sent = undefined;\r\n      this.done = false;\r\n      this.delegate = null;\r\n\r\n      this.method = \"next\";\r\n      this.arg = undefined;\r\n\r\n      this.tryEntries.forEach(resetTryEntry);\r\n\r\n      if (!skipTempReset) {\r\n        for (var name in this) {\r\n          // Not sure about the optimal order of these conditions:\r\n          if (name.charAt(0) === \"t\" &&\r\n              hasOwn.call(this, name) &&\r\n              !isNaN(+name.slice(1))) {\r\n            this[name] = undefined;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function() {\r\n      this.done = true;\r\n\r\n      var rootEntry = this.tryEntries[0];\r\n      var rootRecord = rootEntry.completion;\r\n      if (rootRecord.type === \"throw\") {\r\n        throw rootRecord.arg;\r\n      }\r\n\r\n      return this.rval;\r\n    },\r\n\r\n    dispatchException: function(exception) {\r\n      if (this.done) {\r\n        throw exception;\r\n      }\r\n\r\n      var context = this;\r\n      function handle(loc, caught) {\r\n        record.type = \"throw\";\r\n        record.arg = exception;\r\n        context.next = loc;\r\n\r\n        if (caught) {\r\n          // If the dispatched exception was caught by a catch block,\r\n          // then let that catch block handle the exception normally.\r\n          context.method = \"next\";\r\n          context.arg = undefined;\r\n        }\r\n\r\n        return !! caught;\r\n      }\r\n\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        var record = entry.completion;\r\n\r\n        if (entry.tryLoc === \"root\") {\r\n          // Exception thrown outside of any try block that could handle\r\n          // it, so set the completion value of the entire function to\r\n          // throw the exception.\r\n          return handle(\"end\");\r\n        }\r\n\r\n        if (entry.tryLoc <= this.prev) {\r\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n          if (hasCatch && hasFinally) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            } else if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else if (hasCatch) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            }\r\n\r\n          } else if (hasFinally) {\r\n            if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else {\r\n            throw new Error(\"try statement without catch or finally\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    abrupt: function(type, arg) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc <= this.prev &&\r\n            hasOwn.call(entry, \"finallyLoc\") &&\r\n            this.prev < entry.finallyLoc) {\r\n          var finallyEntry = entry;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (finallyEntry &&\r\n          (type === \"break\" ||\r\n           type === \"continue\") &&\r\n          finallyEntry.tryLoc <= arg &&\r\n          arg <= finallyEntry.finallyLoc) {\r\n        // Ignore the finally entry if control is not jumping to a\r\n        // location outside the try/catch block.\r\n        finallyEntry = null;\r\n      }\r\n\r\n      var record = finallyEntry ? finallyEntry.completion : {};\r\n      record.type = type;\r\n      record.arg = arg;\r\n\r\n      if (finallyEntry) {\r\n        this.method = \"next\";\r\n        this.next = finallyEntry.finallyLoc;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      return this.complete(record);\r\n    },\r\n\r\n    complete: function(record, afterLoc) {\r\n      if (record.type === \"throw\") {\r\n        throw record.arg;\r\n      }\r\n\r\n      if (record.type === \"break\" ||\r\n          record.type === \"continue\") {\r\n        this.next = record.arg;\r\n      } else if (record.type === \"return\") {\r\n        this.rval = this.arg = record.arg;\r\n        this.method = \"return\";\r\n        this.next = \"end\";\r\n      } else if (record.type === \"normal\" && afterLoc) {\r\n        this.next = afterLoc;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    },\r\n\r\n    finish: function(finallyLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.finallyLoc === finallyLoc) {\r\n          this.complete(entry.completion, entry.afterLoc);\r\n          resetTryEntry(entry);\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n    },\r\n\r\n    \"catch\": function(tryLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc === tryLoc) {\r\n          var record = entry.completion;\r\n          if (record.type === \"throw\") {\r\n            var thrown = record.arg;\r\n            resetTryEntry(entry);\r\n          }\r\n          return thrown;\r\n        }\r\n      }\r\n\r\n      // The context.catch method must only be called with a location\r\n      // argument that corresponds to a known catch block.\r\n      throw new Error(\"illegal catch attempt\");\r\n    },\r\n\r\n    delegateYield: function(iterable, resultName, nextLoc) {\r\n      this.delegate = {\r\n        iterator: values(iterable),\r\n        resultName: resultName,\r\n        nextLoc: nextLoc\r\n      };\r\n\r\n      if (this.method === \"next\") {\r\n        // Deliberately forget the last sent value so that we don't\r\n        // accidentally pass it on to the delegate.\r\n        this.arg = undefined;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n  };\r\n\r\n  // Regardless of whether this script is executing as a CommonJS module\r\n  // or not, return the runtime object so that we can declare the variable\r\n  // regeneratorRuntime in the outer scope, which allows this module to be\r\n  // injected easily by `bin/regenerator --include-runtime script.js`.\r\n  return exports;\r\n\r\n}(\r\n  // If this script is executing as a CommonJS module, use module.exports\r\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n  // object. Either way, the resulting object will be used to initialize\r\n  // the regeneratorRuntime variable at the top of this file.\r\n  typeof module === \"object\" ? module.exports : {}\r\n));\r\n","/**\r\n * Generates a random positive integer.\r\n *\r\n * @returns {Number}\r\n */\r\nexports.generateRandomNumber = function ()\r\n{\r\n\treturn Math.round(Math.random() * 10000000);\r\n};\r\n\r\nexports.guid = function ()\r\n{\r\n\tfunction S4()\r\n\t{\r\n\t\treturn (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n\t}\r\n\r\n\tconst s1 = S4();\r\n\tconst s2 = S4();\r\n\tconst s3 = S4();\r\n\tconst s4 = S4();\r\n\tconst s5 = S4();\r\n\tconst s6 = S4();\r\n\tconst s7 = S4();\r\n\tconst s8 = S4();\r\n\r\n\treturn (`${s1}${s2}-${s3}-${s4}-${s5}-${s1}${s1}${s1}`);\r\n\t//\treturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n};\r\n\r\n// ^((https|http|ftp|rtmp|rtsp|mms)?://)?(([0-9a-z_!~*\\'().&=+$%-]+: )?[0-9a-z_!~*\\'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*\\'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*\\'().;?:@&=+$,%#-]+)+/?)$\r\nexports.isURL = function (url)\r\n{\r\n\tconst strRegex = '^((https|http|ftp|rtmp|rtsp|mms)?://)'\r\n\t\t+ '?(([0-9a-zA-Z_!~*\\'().&=+$%-]+: )?[0-9a-zA-Z_!~*\\'().&=+$%-]+@)?' //ftp的user@ \r\n\t\t+ '(([0-9]{1,3}.){3}[0-9]{1,3}' // IP形式的URL- 199.194.52.184 \r\n\t\t+ '|' // 允许IP和DOMAIN（域名） \r\n\t\t+ '([0-9a-zA-Z_!~*\\'()-]+.)*' // 域名- www. \r\n\t\t+ '([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z].' // 二级域名 \r\n\t\t+ '[a-zA-Z]{2,6})' // first level domain- .com or .museum \r\n\t\t+ '(:[0-9]{1,4})?' // 端口- :80 \r\n\t\t+ '((/?)|' // a slash isn't required if there is no file name \r\n\t\t+ '(/[0-9a-zA-Z_!~*\\'().;?:@&=+$,%#-]+)+/?)$';\r\n\tconst re = new RegExp(strRegex);\r\n\t\r\n\tif (re.test(url))\r\n\t{\r\n\t\treturn (true);\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn (false);\r\n\t}\r\n};\r\n","const { EventEmitter } = require('../thirdparty/events.js');\r\n\r\nimport regeneratorRuntime from '../thirdparty/runtime.js';\r\nconst Logger = require('./Logger');\r\n\r\nclass EnhancedEventEmitter extends EventEmitter\r\n{\r\n\tconstructor(logger)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.setMaxListeners(Infinity);\r\n\r\n\t\tthis._logger = logger || new Logger('EnhancedEventEmitter');\r\n\t\tthis._logger.prefix = '-';\r\n\t}\r\n\r\n\tsafeEmit(event, ...args)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tthis.emit(event, ...args);\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis._logger.error(\r\n\t\t\t\t'safeEmit() | event listener threw an error. event: ',\r\n\t\t\t\tevent, ' error: ', error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync safeEmitAsPromise(event, ...args)\r\n\t{\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tthis.safeEmit(event, ...args, resolve, reject);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = EnhancedEventEmitter;\r\n","const WxWebSocket = require('./WxWebSocket.js');\r\nconst Logger = require('./Logger.js');\r\nconst EnhancedEventEmitter = require('./EnhancedEventEmitter.js');\r\nconst config = require('../config.js');\r\nconst retry = require('../retry/retry.js');\r\n\r\nconst logger = new Logger('IPLocation');\r\n\r\n// 最大重试次数\r\nconst MAX_RETRY = 10;\r\n\r\n// IPLocation 总 timeout\r\nconst IP_FULL_TIMEOUT = 15000; // 15s\r\n\r\n// 状态\r\n// {\r\nconst IPL_STATE_IDLE = 0; // 初始/关闭状态\r\nconst IPL_STATE_STARTING = 1; // 启动中\r\nconst IPL_STATE_ACT = 2; // 已连接/正常启动\r\nconst IPL_STATE_RETRYING = 3; // 重试中\r\n// }\r\n\r\n// 定义 连接失败/断网 的相关retry参数\r\nconst DEFAULT_RETRY_OPTIONS =\r\n{\r\n\tretries    : MAX_RETRY, // 连续重试次数\r\n\tfactor     : 2, // 递增超时放大倍数\r\n\tminTimeout : 1 * 1000, // \r\n\tmaxTimeout : 8 * 1000\r\n};\r\n\r\n// TODO : retry while connect fail or no-response \r\n// 使用 retry 模块实现失败重试\r\n\r\nclass IPLocation extends EnhancedEventEmitter\r\n{\r\n\t/**\r\n\t * @param {Object} [options] - Options for WebSocket-Node.W3CWebSocket and retry.\r\n\t */\r\n\tconstructor(options)\r\n\t{\r\n\t\tsuper(logger);\r\n\t\t\r\n\t\t// Options.\r\n\t\t// @type {Object}\r\n\t\tthis._options = options || {};\r\n\r\n\t\t// 日志追踪用\r\n\t\tthis._logClues = options.logClues;\r\n\r\n\t\t// 用来标识本次会话\r\n\t\tthis._sid = options.sid;\r\n\r\n\t\t// WebSocket instance.\r\n\t\t// @type {WebSocket}\r\n\t\tthis._ws = null;\r\n\r\n\t\tthis._operation = null;\r\n\r\n\t\t// Map of pending sent request objects indexed by request id.\r\n\t\t// @type {Map<Number, Object>}\r\n\t\tthis._sents = new Map();\r\n\r\n\t\t// 用来标识是否调用了 close ?\r\n\t\tthis._stopping = false;\r\n\r\n\t\t// 当前状态\r\n\t\tthis._state = IPL_STATE_IDLE;\r\n\r\n\t\tthis._iplocTimer = null;\r\n\t\t// 是否已 got\r\n\t\tthis._hasGot = false;\r\n\r\n\t\t// 事务是否已正常完成\r\n\t\tthis._isTPFinish = false;\r\n\r\n\t\t// \r\n\t\tthis._randomId = 0;\r\n\t}\r\n\r\n\tasync init(opts)\r\n\t{\r\n\t\tif (this._state !== IPL_STATE_IDLE)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tconst {\r\n\t\t\turl,\r\n\t\t\tappId,\r\n\t\t\tuserId\r\n\t\t} = opts;\r\n\r\n\t\tthis._url = url;\r\n\t\tthis._appId = appId;\r\n\t\tthis._userId = userId;\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tthis._hasGot = false;\r\n\r\n\t\t\t// \r\n\t\t\tthis._stopping = false;\r\n\r\n\t\t\tthis._state = IPL_STATE_STARTING;\r\n\r\n\t\t\t// \r\n\t\t\tlet iplocProc = new Promise((resolve, reject) =>\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tthis.runIploc();\r\n\t\t\t});\r\n\r\n\t\t\tlet iplocTimerPro = new Promise((resolve, reject) =>\r\n\t\t\t{\r\n\t\t\t\tthis._iplocTimer = setTimeout(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\treject({\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'iplocation timeout'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, IP_FULL_TIMEOUT);\r\n\t\t\t});\r\n\r\n\t\t\tPromise.race([ iplocProc, iplocTimerPro ])\r\n\t\t\t\t.then((result) =>\r\n\t\t\t\t{\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.close();\r\n\r\n\t\t\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\t\t\tsid    : this._sid,\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'iplocation FIN failed'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// \r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tonMessage(resp)\r\n\t{\r\n\t\t// 标记为已 got，如此则超时定时到后，执行 resolve，否则将执行 reject\r\n\t\tthis._hasGot = true;\r\n\r\n\t\t// 清除定时器\r\n\t\tclearTimeout(this._iplocTimer);\r\n\r\n\t\t// \r\n\t\tconst sent = this._sents.get(1);\r\n\r\n\t\tif (!sent)\r\n\t\t{\r\n\t\t\tlogger.error(\r\n\t\t\t\t'IPLocation onMessage received response does not match any sent request [id:%s]',\r\n\t\t\t\t1);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsent.resolve(resp);\r\n\t}\r\n\r\n\tasync request(opts)\r\n\t{\r\n\t\tconst {\r\n\t\t\thost,\r\n\t\t\tappId,\r\n\t\t\tuserId,\r\n\t\t\tsid\r\n\t\t} = opts;\r\n\r\n\t\t// \r\n\t\ttry\r\n\t\t{\r\n\t\t\tif (Boolean(this._ws) && this._state === IPL_STATE_ACT)\r\n\t\t\t{\r\n\t\t\t\t// \r\n\t\t\t\tconst iplocationData = {\r\n\t\t\t\t\teType        : 1,\r\n\t\t\t\t\tsSEQID       : '111111111',\r\n\t\t\t\t\tmProtocolMsg : {\r\n\t\t\t\t\t\tsVersion     : 'Test_4.2.0.777',\r\n\t\t\t\t\t\tbLoadBalance : false,\r\n\t\t\t\t\t\tbReConnect   : false,\r\n\t\t\t\t\t\tbVipUser     : false,\r\n\t\t\t\t\t\tsIDentify    : '7B4FCDBC0914E7182B8EC357F07498F1',\r\n\t\t\t\t\t\tsSecret      : 'c052cd055acfabc5',\r\n\t\t\t\t\t\tsVerifyCode  : 'abcd',\r\n\t\t\t\t\t\tsAppID       : appId,\r\n\t\t\t\t\t\tnUserID      : parseInt(userId),\r\n\t\t\t\t\t\tsClientVer   : 'miniapp_1.0',\r\n\t\t\t\t\t\tsConnectID   : sid,\r\n\t\t\t\t\t\tmIpAddrMsg   : {\r\n\t\t\t\t\t\t\tbFec  : false,\r\n\t\t\t\t\t\t\tsIp   : host,\r\n\t\t\t\t\t\t\tnPort : 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlogger.debug(`IPLocation request() ws.send: ${JSON.stringify(iplocationData)}`);\r\n\r\n\t\t\t\tthis._ws.send({ msg: JSON.stringify(iplocationData) });\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tlogger.error('IPLocation request() ws.send failed. error: ', error);\r\n\r\n\t\t\treturn Promise.reject(new Error('WebSocket send failed'));\r\n\t\t}\r\n\r\n\t\t// \r\n\t\t// 因借用了 sents ，如下代码中 id、method 等字段是对 sents 做了妥协（其实这两字段对于 IPLoc 的请求交互是没有实际用处的）\r\n\t\t// \r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tconst requestId = 1;\r\n\t\t\tconst method = 'request';\r\n\t\t\tconst timeout = 1500 * (15 + (0.1 * this._sents.size));\r\n\t\t\tconst sent =\r\n\t\t\t{\r\n\t\t\t\tid      : requestId, // 此字段固定为1\r\n\t\t\t\tmethod  : method,\r\n\t\t\t\tresolve : (data2) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this._sents.delete(1))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tclearTimeout(sent.timer);\r\n\t\t\t\t\t\r\n\t\t\t\t\tlogger.debug('IPLocation request[method: ', method, '] resolve. response: ', data2);\r\n\r\n\t\t\t\t\tresolve(data2);\r\n\t\t\t\t},\r\n\t\t\t\treject : (error) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlogger.debug(`IPLocation request[method: ${method}] reject.`);\r\n\r\n\t\t\t\t\tif (!this._sents.delete(requestId))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tclearTimeout(sent.timer);\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t},\r\n\t\t\t\ttimer : setTimeout(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlogger.error('IPLocation request[method: %s] reject.', method);\r\n\r\n\t\t\t\t\tif (!this._sents.delete(requestId))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\treject(new Error('Request Timeout.'));\r\n\t\t\t\t}, timeout),\r\n\t\t\t\tclose : () =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlogger.error('IPLocation request[method: %s] close.', method);\r\n\r\n\t\t\t\t\tclearTimeout(sent.timer);\r\n\t\t\t\t\treject(new Error('Peer Closed'));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Add sent stuff to the map.\r\n\t\t\tthis._sents.set(requestId, sent);\r\n\t\t});\r\n\t}\r\n\r\n\t// 如果当前为非人为主观断开，则会尝试一定次数的重试\r\n\t// 若需要重试，则在连续重试N次仍未成功连接，则向上层报 \"最终失败\"\r\n\t// 若无需重试，则直接向上层报 \"close\"\r\n\tonWsClose(opts)\r\n\t{\r\n\t\t// \r\n\t\tif (this._hasGot)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// \r\n\t\tconst { event, currentAttempt } = opts;\r\n\r\n\t\t// Don't retry if code is 4000 (closed by the server).\r\n\t\t// 4000 -- closed by server\r\n\t\t// 1000 -- normal closure\r\n\t\tif (event.code !== 4000 && event.code !== 1000)\r\n\t\t{\r\n\t\t\tif (this._stopping) // 上层主动关闭，故不再尝试重连，且通知上层\r\n\t\t\t{\r\n\t\t\t\tlogger.debug(`IPLocation onWsClose() -- [event.code:${event.code}] [this._state: ${this._state}]`);\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis._operation.stop();\r\n\r\n\t\t\t\t/* 2019.7.18 在此wxwebsocket已断开，此处无需再执行closeTransport\r\n\t\t\t\tthis.closeTransport();\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tthis._state = IPL_STATE_IDLE;\r\n\r\n\t\t\t\tthis.safeEmit('close', {\r\n\t\t\t\t\tsid : this._sid\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (this._state !== IPL_STATE_ACT) // 尝试重连\r\n\t\t\t{\r\n\t\t\t\tthis._state = IPL_STATE_RETRYING; // 设定为：当前正在重试\r\n\r\n\t\t\t\tif (this._operation.retry(true))\r\n\t\t\t\t{\r\n\t\t\t\t\tlogger.debug(`IPLocation onWsClose() -- [event.code: ${event.code}]. retrying.`);\r\n\r\n\t\t\t\t\t// 通知上层：当前正在尝试自动重连\r\n\t\t\t\t\tthis.safeEmit('auto-reconnecting', {\r\n\t\t\t\t\t\tsid : this._sid\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlogger.error(`IPLocation onWsClose() -- [event.code: ${event.code}]. FINAL FAILED.`);\r\n\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis._operation.stop();\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis._state = IPL_STATE_IDLE;\r\n\t\t\t\t\t// 当尝试完所有重试，仍未 ok，则向上层触发 failed，携带 event:{code: 500}\r\n\t\t\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\t\t\tsid    : this._sid,\r\n\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\treason : 'iplocation FIN failed'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 如果当前已连接，则应重新建立连接??\r\n\t\t\telse if (this._state === IPL_STATE_ACT)\r\n\t\t\t{\r\n\t\t\t\tlogger.debug(`IPLocation onWsClose() -- [event.code: ${event.code}] [this._wstState: IPL_STATE_ACT]. so FULL-reconnect.`);\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis._operation.stop();\r\n\t\t\t\t// \r\n\t\t\t\tthis._state = IPL_STATE_RETRYING; // 设定为：当前正在重试\r\n\r\n\t\t\t\t// 通知上层：当前正在尝试自动重连\r\n\t\t\t\tthis.safeEmit('auto-reconnecting', {\r\n\t\t\t\t\tsid : this._sid\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.runIploc();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlogger.debug(`IPLocation onWsClose() -- [event.code: ${event.code}] [this._wstState: IPL_STATE_ACT]. so FULL-reconnect.`);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlogger.debug(`IPLocation onWsClose() -- [event.code: ${event.code}]. this._state: ${this._state}. stop.`);\r\n\r\n\t\t\t// \r\n\t\t\tthis._operation.stop();\r\n\r\n\t\t\t// \r\n\t\t\t/* 2019.7.18 在此wxwebsocket已断开，此处无需再执行closeTransport\r\n\t\t\tthis.closeTransport();\r\n\t\t\t*/\r\n\r\n\t\t\tthis._state = IPL_STATE_IDLE;\r\n\r\n\t\t\t// 此种情况下，才直接向上层触发 'close' 事件\r\n\t\t\t// Emit 'close' event.\r\n\t\t\tthis.safeEmit('close', {\r\n\t\t\t\tsid : this._sid\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tasync runIploc()\r\n\t{\r\n\t\tthis._operation =\r\n\t\t\tretry.operation(this._options.retry || DEFAULT_RETRY_OPTIONS);\r\n\r\n\t\tif (!this._operation)\r\n\t\t{\r\n\t\t\tlogger.error('IPLocation runIploc() Internal error.');\r\n\r\n\t\t\tthrow new Error('Internal error');\r\n\t\t}\r\n\r\n\t\tlogger.debug(`IPLocation runIploc attempt connect to : ${this._url}`);\r\n\r\n\t\tthis._operation.attempt((currentAttempt) =>\r\n\t\t{\r\n\t\t\t// \r\n\t\t\tthis.closeTransport();\r\n\t\t\t// \r\n\r\n\t\t\t// 如果上层调用了 close\r\n\t\t\tif (this._stopping)\r\n\t\t\t{\r\n\t\t\t\tthis._operation.stop();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlogger.debug(`IPLocation runIploc attempt connect to : ${this._url} currentAttempt: ${currentAttempt}`);\r\n\r\n\t\t\t// \r\n\t\t\tthis._randomId = Math.round(Math.random() * 10000000);\r\n\r\n\t\t\t// \r\n\t\t\tthis._ws = new WxWebSocket(this._randomId, logger);\r\n\r\n\t\t\tif (Boolean(this._ws))\r\n\t\t\t{\r\n\t\t\t\t// 监听 wx websocket 模块事件\r\n\t\t\t\tthis._ws.on('open', async () =>\r\n\t\t\t\t{\r\n\t\t\t\t\t// 若此前调用了 close 主动关闭，则此处直接 return\r\n\t\t\t\t\tif (this._stopping)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlogger.debug('IPLocation event[open] -- open after stopping.');\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis._state = IPL_STATE_ACT;\r\n\t\t\t\t\t// \r\n\r\n\t\t\t\t\tlogger.debug(`IPLocation ws event[open] -- this._state: ${this._state}`);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// \r\n\t\t\t\t\tconst iplocRes = await this.request({\r\n\t\t\t\t\t\thost   : 'stech.3ttech.cn', // 这一参数在 小程序方案中并没有实际意义\r\n\t\t\t\t\t\tappId  : this._appId,\r\n\t\t\t\t\t\tuserId : this._userId,\r\n\t\t\t\t\t\tsid    : this.sid\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// \r\n\t\t\t\t\tlogger.warn(`IPLocation -- result: ${JSON.stringify(iplocRes)}`);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// \r\n\t\t\t\t\t// miniappHome 为本 miniapp 的归属au\r\n\t\t\t\t\tconst miniappHome = (iplocRes.mProtocolMsg.mIpAddrMsg.sDomain);\r\n\r\n\t\t\t\t\tlet auAccess = config.miniauHost;\r\n\r\n\t\t\t\t\t// 两种方案：\r\n\t\t\t\t\t// 1. 小程序访问服务器的入口 为 wss://xxx.xxx.xxx/miniappau-${miniappHome} -- 注：其中 miniappHome 要进行转置，确保格式合乎 url 规范\r\n\t\t\t\t\t// xxx.xxx.xxx 上部署有 nginx，根据 url path 中的 ${miniappHome}，执行 proxy\r\n\t\t\t\t\t// 2. 小程序直接访问 miniappHome\r\n\t\t\t\t\tif (miniappHome != null && miniappHome !== '' && typeof miniappHome !== 'undefined')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 1. 方案1 auAccess = `${config.miniauHost}-${miniappHome}`;\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\t// 2. 方案2 \r\n\t\t\t\t\t\tauAccess = `${miniappHome}`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlogger.error(`IPLocation -- error: miniappHome: ${miniappHome}`);\r\n\r\n\t\t\t\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\t\t\t\tsid    : this._sid,\r\n\t\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\t\treason : `miniappHome: ${miniappHome}`\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// 事务已完成\r\n\t\t\t\t\tthis._isTPFinish = true;\r\n\r\n\t\t\t\t\tthis.safeEmit('ok', {\r\n\t\t\t\t\t\tsid : this._sid,\r\n\t\t\t\t\t\tauAccess\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// \r\n\t\t\t\tthis._ws.on('message', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tconst resp = JSON.parse(event.data);\r\n\r\n\t\t\t\t\t// \r\n\t\t\t\t\tthis.onMessage(resp);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._ws.on('error', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlogger.error('IPLocation ws event[error] -- this._state: ', this._state, ' event: ', event);\r\n\r\n\t\t\t\t\t//\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._ws.on('close', (event) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.onWsClose({\r\n\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\tcurrentAttempt\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlogger.debug(`IPLocation runIploc() [currentAttempt: ${currentAttempt}]. try to connect: ${this._url}`);\r\n\r\n\t\t\t\t// connect server\r\n\t\t\t\tthis._ws.connect({\r\n\t\t\t\t\turl     : this._url,\r\n\t\t\t\t\tsuccess : (res) => {},\r\n\t\t\t\t\tfail    : (res) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlogger.error('IPLocation ws.connect failed. error: ', res);\r\n\r\n\t\t\t\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\t\t\t\tsid    : this._sid,\r\n\t\t\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\t\t\treason : 'ws.connect failed'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlogger.error('IPLocation WebSocket create failed.');\r\n\r\n\t\t\t\tthis.safeEmit('failed', {\r\n\t\t\t\t\tsid    : this._sid,\r\n\t\t\t\t\tcode   : 500,\r\n\t\t\t\t\treason : 'WebSocket create failed'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcloseTransport()\r\n\t{\r\n\t\t// Close every pending sent.\r\n\t\tfor (const sent of this._sents.values())\r\n\t\t{\r\n\t\t\tsent.close();\r\n\t\t}\r\n\r\n\t\tconst code = 1000;\r\n\t\tconst reason = 'close connection';\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tif (Boolean(this._ws))\r\n\t\t\t{\r\n\t\t\t\tthis._ws.close({\r\n\t\t\t\t\tcode,\r\n\t\t\t\t\treason\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tlogger.error(`IPLocation closeTransport() failed. Closing the WebSocket error: ${JSON.stringify(error)}`);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclose()\r\n\t{\r\n\t\t// Don't wait for the WebSocket 'close' event, do it now.\r\n\t\tthis._stopping = true;\r\n\r\n\t\tlogger.debug('IPLocation close()');\r\n\r\n\t\tif (this._state === IPL_STATE_IDLE)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.closeTransport();\r\n\r\n\t\t// \r\n\t\tthis._operation.stop();\r\n\t\t// \r\n\t\tthis._state = IPL_STATE_IDLE;\r\n\t}\r\n}\r\n\r\nmodule.exports = IPLocation;\r\n","const debug = require('../thirdparty/debug.js');\r\n\r\nconst APP_NAME = 'tttminiappsdk';\r\n\r\nconst LOG_NONE = 0;\r\nconst LOG_ERROR = 1;\r\nconst LOG_WARN = 2;\r\nconst LOG_INFO = 3;\r\nconst LOG_DEBUG = 4;\r\nconst LOG_TRACE = 5;\r\n\r\nclass Logger\r\n{\r\n\tconstructor(prefix)\r\n\t{\r\n\t\t// \r\n\t\tthis._appId = '';\r\n\t\tthis._roomId = '';\r\n\t\tthis._userId = '';\r\n\t\tthis._logClues = '';\r\n\t\tthis._prefix = '';\r\n\r\n\t\tthis._logLevel = LOG_DEBUG;\r\n\r\n\t\t// \r\n\t\tif (prefix)\r\n\t\t{\r\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\r\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\r\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\r\n\r\n\t\t\t// \r\n\t\t\tthis._prefix = prefix;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._debug = debug(APP_NAME);\r\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\r\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\r\n\t\t}\r\n\r\n\t\t/* eslint-disable no-console */\r\n\t\t// this._debug.log = console.info.bind(console);\r\n\t\t// this._warn.log = console.warn.bind(console);\r\n\t\t// this._error.log = console.error.bind(console);\r\n\t\t/* eslint-enable no-console */\r\n\t\t// \r\n\t\tthis._debug = this._logDebug;\r\n\t\tthis._warn = this._logWarn;\r\n\t\tthis._error = this._logError;\r\n\t}\r\n\r\n\tset logLevel(logLevel)\r\n\t{\r\n\t\tswitch (logLevel) {\r\n\t\t\tcase 'LOG_NONE':\r\n\t\t\t\tthis._logLevel = LOG_NONE;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LOG_ERROR':\r\n\t\t\t\tthis._logLevel = LOG_ERROR;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LOG_WARN':\r\n\t\t\t\tthis._logLevel = LOG_WARN;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LOG_INFO':\r\n\t\t\t\tthis._logLevel = LOG_INFO;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LOG_DEBUG':\r\n\t\t\t\tthis._logLevel = LOG_DEBUG;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'LOG_TRACE':\r\n\t\t\t\tthis._logLevel = LOG_TRACE;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis._logLevel = LOG_DEBUG;\r\n\t\t}\r\n\t}\r\n\r\n\tget debug()\r\n\t{\r\n\t\treturn this._debug;\r\n\t}\r\n\r\n\tget warn()\r\n\t{\r\n\t\treturn this._warn;\r\n\t}\r\n\r\n\tget error()\r\n\t{\r\n\t\treturn this._error;\r\n\t}\r\n\r\n\tset prefix(prefix)\r\n\t{\r\n\t\tif (!prefix)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._prefix = prefix;\r\n\t}\r\n\r\n\tsetParameters(opts)\r\n\t{\r\n\t\tconst {\r\n\t\t\tappId,\r\n\t\t\troomId,\r\n\t\t\tuserId,\r\n\t\t\tlogClues\r\n\t\t} = opts;\r\n\r\n\t\t// \r\n\t\tthis._appId = appId;\r\n\t\tthis._roomId = roomId;\r\n\t\tthis._userId = userId;\r\n\t\tthis._logClues = logClues;\r\n\t}\r\n\r\n\t// \r\n\t_logDebug(...args)\r\n\t{\r\n\t\tthis.postLog(LOG_DEBUG, ...args);\r\n\t}\r\n\r\n\t_logWarn(...args)\r\n\t{\r\n\t\tthis.postLog(LOG_WARN, ...args);\r\n\t}\r\n\r\n\t_logError(...args)\r\n\t{\r\n\t\tthis.postLog(LOG_ERROR, ...args);\r\n\t}\r\n\r\n\tpostLog(logLevel, ...args)\r\n\t{\r\n\t\t// \r\n\t\tconst appId = this._appId;\r\n\t\tconst roomId = this._roomId;\r\n\t\tconst userId = this._userId;\r\n\r\n\t\tconst preMsg = `appid=${appId}, roomid=${roomId}, userid=${userId} time=${new Date()} logClues=${this._logClues} <${this._prefix}>`;\r\n\t\tlet msg = '';\r\n\r\n\t\t[].slice.apply(args).forEach((element) =>\r\n\t\t{\r\n\t\t\tif (typeof element === 'object')\r\n\t\t\t{\r\n\t\t\t\tconst s = JSON.stringify(element);\r\n\r\n\t\t\t\tmsg = `${msg} ${s}`;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tmsg = `${msg} ${element}`;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\twx.request({\r\n\t\t\turl    : 'https://log.wushuangtech.com:15100',\r\n\t\t\tmethod : 'POST',\r\n\t\t\tdata   : `event=${APP_NAME} ${preMsg} ${msg}`,\r\n\t\t\theader : {\r\n\t\t\t\t'Content-Type' : 'text/plain; charset=utf-8'\r\n\t\t\t},\r\n\t\t\tsuccess(res)\r\n\t\t\t{\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// to logurl2\r\n\t\t// TODO : \r\n\r\n\t\t/*\r\n\t\twx.request({\r\n\t\t\turl    : 'https://api3tclass.3ttech.cn/edu/exception',\r\n\t\t\tmethod : 'POST',\r\n\t\t\tdata   : {\r\n\t\t\t\tmessage : msg,\r\n\t\t\t\ttype    : 'miniappsdk',\r\n\t\t\t\tlevel   : logLevel,\r\n\t\t\t\tclassId : roomId,\r\n\t\t\t\tUID     : userId\r\n\t\t\t},\r\n\t\t\theader : {\r\n\t\t\t\t'content-type' : 'application/x-www-form-urlencoded;charset=UTF-8'\r\n\t\t\t},\r\n\t\t\tsuccess(res)\r\n\t\t\t{\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\t// 同时，输出到控制台\r\n\t\t/* eslint-disable no-console */\r\n\t\tif (logLevel < this._logLevel)\r\n\t\t{\r\n\t\t\tconsole.log(`time=${new Date()} ${msg}`);\r\n\t\t}\r\n\t\t/* eslint-enable no-console */\r\n\t}\r\n}\r\n\r\nmodule.exports = Logger;\r\n","const Logger = require('./Logger.js');\r\nconst EnhancedEventEmitter = require('./EnhancedEventEmitter.js');\r\n\r\n// 状态\r\n// {\r\nconst WX_STATE_IDLE = 0; // 初始/关闭状态\r\nconst WX_STATE_STARTING = 1; // 启动中\r\nconst WX_STATE_ACT = 2; // 已连接/正常启动\r\nconst WX_STATE_STOPING = 3; // 停止中\r\n// }\r\n\r\nclass WxWebSocket extends EnhancedEventEmitter\r\n{\r\n\tconstructor(randomId, logger)\r\n\t{\r\n\t\tsuper(logger);\r\n\r\n\t\t// \r\n\t\tthis._logger = logger || new Logger('WxWebSocket');\r\n\t\tthis._logger.prefix = '-';\r\n\r\n\t\t// 连接状态\r\n\t\tthis._connState = WX_STATE_IDLE;\r\n\r\n\t\t// 是否主动 close ??\r\n\t\tthis._stopping = false;\r\n\r\n\t\t// socket发送的消息队列\r\n\t\t/* 暂不启用该缓存队列\r\n\t\tthis._msgQueue = [];\r\n\t\t*/\r\n\r\n\t\t// 重连定时器 -- 不再此处执行重连（外部已处理）\r\n\t\t// this._connectSocketTimeOut = null;\r\n\r\n\t\tthis._socketTask = null;\r\n\t\t// \r\n  \r\n\t\t// \r\n\t\tthis._randomId = randomId;\r\n\t}\r\n\r\n\t/**\r\n\t * 创建一个 WebSocket 连接\r\n\t * @param {options} \r\n\t *   url          String    是    开发者服务器接口地址，必须是 wss 协议，且域名必须是后台配置的合法域名\r\n\t *   header        Object    否    HTTP Header , header 中不能设置 Referer\r\n\t *   method        String    否    默认是GET，有效值：OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT\r\n\t *   protocols    StringArray    否    子协议数组    1.4.0\r\n\t *   success      Function    否    接口调用成功的回调函数\r\n\t *   fail         Function    否    接口调用失败的回调函数\r\n\t *   complete      Function    否    接口调用结束的回调函数（调用成功、失败都会执行）\r\n\t */\r\n\tasync connect(options)\r\n\t{\r\n\t\tthis._stopping = false;\r\n\r\n\t\t//\r\n\t\tthis._connState = WX_STATE_STARTING;\r\n\r\n\t\t/* 暂不启用该缓存队列\r\n\t\tthis._msgQueue = [];\r\n\t\t*/\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tthis._logger.debug(`WxWebSocket connect() -- wx.connectSocket url: ${options.url}`);\r\n\r\n\t\t\t/* eslint-disable no-undef */\r\n\t\t\tthis._socketTask = wx.connectSocket({\r\n\t\t\t/* eslint-enable no-undef */\r\n\t\t\t\turl    : options.url,\r\n\t\t\t\theader : {\r\n\t\t\t\t\t'content-type' : 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tmethod  : 'GET',\r\n\t\t\t\tsuccess : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 成功回调\r\n\t\t\t\t\t\toptions.success && options.success(res);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._logger.debug('WxWebSocket connect() -- wx.connectSocket call OK.');\r\n\t\t\t\t},\r\n\t\t\t\tfail : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 失败回调\r\n\t\t\t\t\t\toptions.fail && options.fail(res);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._connState = WX_STATE_IDLE;\r\n\r\n\t\t\t\t\tthis._logger.warn('WxWebSocket connect() -- wx.connectSocket call FAIL.');\r\n\t\t\t\t},\r\n\t\t\t\tcomplete : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\toptions.fail && options.fail('EXCEPTION');\r\n\r\n\t\t\tthis._connState = WX_STATE_IDLE;\r\n\r\n\t\t\tthis._logger.warn('WxWebSocket connect() -- wx.connectSocket call EXCEPTION.');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfinally\r\n\t\t{\r\n\t\t\t// \r\n\t\t}\r\n\r\n\t\t// \r\n\t\tif (Boolean(this._socketTask))\r\n\t\t{\r\n\t\t\tthis._socketTask.onClose((r) => this.onSocketClose(r));\r\n\t\t\tthis._socketTask.onMessage((r) => this.onSocketMessage(r));\r\n\t\t\tthis._socketTask.onError((r) => this.onSocketError(r));\r\n\t\t\tthis._socketTask.onOpen((r) => this.onSocketOpen(r));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 通过 WebSocket 连接发送数据\r\n\t * @param {options} \r\n\t *   data    String / ArrayBuffer    是    需要发送的内容\r\n\t *   success    Function    否    接口调用成功的回调函数\r\n\t *   fail    Function    否    接口调用失败的回调函数\r\n\t *   complete    Function    否    接口调用结束的回调函数（调用成功、失败都会执行）\r\n\t */\r\n\tasync send(options)\r\n\t{\r\n\t\tif (!options)\r\n\t\t{\r\n\t\t\tthis._logger.debug('WxWebSocket send() invalid parameters -- options');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._logger.debug(`WxWebSocket send() <<<<<< ${options.msg}`);\r\n\r\n\t\tif (Boolean(this._socketTask) && this._connState === WX_STATE_ACT)\r\n\t\t{\r\n\t\t\tthis._socketTask.send({\r\n\t\t\t\tdata    : options.msg,\r\n\t\t\t\tsuccess : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug('WxWebSocket send() -- call wx socketTask.send OK.');\r\n\r\n\t\t\t\t\tif (options)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.success && options.success(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug('WxWebSocket send() -- call wx socketTask.send FAIL.');\r\n\r\n\t\t\t\t\tif (options)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.fail && options.fail(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._logger.debug(`WxWebSocket send() error -- this._connState: ${this._connState}`);\r\n\r\n\t\t\t/* 暂不启用该缓存队列\r\n\t\t\tthis._msgQueue.push(options.msg);\r\n\t\t\t*/\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 关闭 WebSocket 连接。\r\n\t * @param {opts} \r\n\t *   code    Number    否    一个数字值表示关闭连接的状态号，表示连接被关闭的原因。如果这个参数没有被指定，默认的取值是1000 （表示正常连接关闭）\r\n\t *   reason    String    否    一个可读的字符串，表示连接被关闭的原因。这个字符串必须是不长于123字节的UTF-8 文本（不是字符）\r\n\t *   fail    Function    否    接口调用失败的回调函数\r\n\t *   complete    Function    否    接口调用结束的回调函数（调用成功、失败都会执行）\r\n\t */\r\n\tclose(opts)\r\n\t{\r\n\t\tthis._logger.debug('WxWebSocket close() -- will call closeInner().');\r\n\r\n\t\tthis._stopping = true;\r\n\r\n\t\tthis._connState = WX_STATE_STOPING;\r\n\r\n\t\tthis.closeInner(opts);\r\n\t}\r\n\r\n\tcloseInner(opts)\r\n\t{\r\n\t\t/*\r\n\t\tif (this._connectSocketTimeOut)\r\n\t\t{\r\n\t\t\tclearTimeout(this._connectSocketTimeOut);\r\n\t\t\tthis._connectSocketTimeOut = null;\r\n\t\t}\r\n\t\t*/\r\n\t\tconst {\r\n\t\t\tcode,\r\n\t\t\treason,\r\n\t\t\tsuccess,\r\n\t\t\tfail\r\n\t\t} = opts;\r\n\r\n\t\tif (Boolean(this._socketTask) && (this._connState !== WX_STATE_IDLE))\r\n\t\t{\r\n\t\t\tthis._logger.debug('WxWebSocket closeInner() -- call wx socketTask.close.');\r\n\r\n\t\t\tthis._socketTask.close({\r\n\t\t\t\tcode,\r\n\t\t\t\treason,\r\n\t\t\t\tsuccess,\r\n\t\t\t\tfail\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n\t\t\t\tsuccess : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._logger.debug('WxWebSocket socket closed.');\r\n\t\t\t\t\tif (opts)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\topts.success && opts.success(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail : (res) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (opts)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\topts.fail && opts.fail(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._socketTask = null;\r\n\t\tthis._connState = WX_STATE_IDLE;\r\n\t}\r\n\r\n\t// \r\n\t// 监听WebSocket连接打开事件\r\n\tonSocketOpen(res)\r\n\t{\r\n\t\t// 在尝试连接期间，外部调用了关闭function\r\n\t\tif (this._stopping)\r\n\t\t{\r\n\t\t\tthis._logger.debug('WxWebSocket onSocketOpen() -- this._stopping is ture, will call closeInner().');\r\n\t\t\tthis.closeInner({});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._logger.debug('WxWebSocket onSocketOpen() -- will emit [open].');\r\n\r\n\t\t\tthis._connState = WX_STATE_ACT;\r\n\t\t\t// \r\n\t\t\t/* 暂不启用该缓存队列\r\n\t\t\tfor (let i = 0; i < this._msgQueue.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.send({ msg: this._msgQueue[i] });\r\n\t\t\t}\r\n\t\t\tthis._msgQueue = [];\r\n\t\t\t*/\r\n\r\n\t\t\tthis.safeEmit('open', {\r\n\t\t\t\trandomId : this._randomId\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 监听WebSocket错误\r\n\tonSocketError(res)\r\n\t{\r\n\t\tthis._logger.debug(`WxWebSocket onSocketError() -- this._stopping: ${this._stopping}`);\r\n\r\n\t\tthis._connState = WX_STATE_IDLE;\r\n\r\n\t\t// 在此期间，上层调用了 停止，则不再发送 close 事件\r\n\t\tif (this._stopping)\r\n\t\t{\r\n\t\t\t/*\r\n\t\t\t// code : 1000 对于上层意味着不再尝试重连\r\n\t\t\tconst evt = { wasClean: 'true', code: 1000, reason: res.errMsg };\r\n\r\n\t\t\tthis.safeEmit('close', evt);\r\n\t\t\t*/\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.safeEmit('error', {\r\n\t\t\t\trandomId : this._randomId,\r\n\t\t\t\tres\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 监听WebSocket接受到服务器的消息事件\r\n\tonSocketMessage(event)\r\n\t{\r\n\t\tthis._logger.debug(`WxWebSocket onSocketMessage() >>>>>> message: ${event.data}`);\r\n\r\n\t\tthis.safeEmit('message', {\r\n\t\t\trandomId : this._randomId,\r\n\t\t\tdata     : event.data\r\n\t\t});\r\n\t}\r\n\r\n\t// 监听WebSocket关闭\r\n\tonSocketClose(res)\r\n\t{\r\n\t\t/*\r\n\t\tif (this._connState !== WX_STATE_STOPING)\r\n\t\t{\r\n\t\t\tclearTimeout(this._connectSocketTimeOut);\r\n\t\t\tthis._connectSocketTimeOut = setTimeout(() =>\r\n\t\t\t{\r\n\t\t\t\tthis.connect();\r\n\t\t\t}, 3000);\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\tthis._logger.debug(`WxWebSocket onSocketClose() -- this._stopping: ${this._stopping}`);\r\n\r\n\t\tthis._connState = WX_STATE_IDLE;\r\n\r\n\t\tif (this._stopping)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.safeEmit('close', {\r\n\t\t\trandomId : this._randomId,\r\n\t\t\twasClean : 'true',\r\n\t\t\tcode     : res.code,\r\n\t\t\treason   : res.reason\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = WxWebSocket;\r\n"],"sourceRoot":""}