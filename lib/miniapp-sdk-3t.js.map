{"version":3,"sources":["webpack://miniapp-sdk-3t/webpack/universalModuleDefinition","webpack://miniapp-sdk-3t/webpack/bootstrap","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/array/from.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/get-iterator.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/is-iterable.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/json/stringify.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/map.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/number/is-nan.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/create.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/define-property.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/get-own-property-names.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/get-own-property-symbols.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/keys.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/promise.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/symbol.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/classCallCheck.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/createClass.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/inherits.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/helpers/typeof.js","webpack://miniapp-sdk-3t/./node_modules/babel-runtime/regenerator/index.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/array/from.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/get-iterator.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/is-iterable.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/json/stringify.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/map.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/number/is-nan.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/create.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/define-property.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/get-own-property-names.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/get-own-property-symbols.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/keys.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/promise.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/symbol/index.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/fn/symbol/iterator.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_a-function.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_an-instance.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_an-object.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_array-from-iterable.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_array-includes.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_array-methods.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_array-species-constructor.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_array-species-create.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_classof.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_cof.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_collection-strong.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_collection-to-json.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_collection.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_core.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_create-property.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_ctx.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_defined.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_descriptors.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_dom-create.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_enum-keys.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_export.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_fails.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_for-of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_global.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_has.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_hide.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_html.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_invoke.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iobject.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_is-array-iter.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_is-array.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_is-object.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iter-call.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iter-create.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iter-define.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iter-detect.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iter-step.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_iterators.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_library.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_meta.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_microtask.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_new-promise-capability.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-create.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-dp.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-dps.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-gopd.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-gopn.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-gops.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-gpo.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-keys.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-pie.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_object-sap.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_perform.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_promise-resolve.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_property-desc.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_redefine-all.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_redefine.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_set-collection-from.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_set-collection-of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_set-proto.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_set-species.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_shared-key.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_shared.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_species-constructor.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_string-at.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_task.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_to-absolute-index.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_to-integer.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_to-iobject.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_to-length.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_to-object.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_to-primitive.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_uid.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_user-agent.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_validate-collection.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_wks-define.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_wks-ext.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/_wks.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/core.get-iterator.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/core.is-iterable.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.array.from.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.array.iterator.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.map.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.number.is-nan.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.object.create.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.object.define-property.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.object.get-own-property-names.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.object.keys.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.promise.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.string.iterator.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es6.symbol.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.map.from.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.map.of.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.map.to-json.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.promise.finally.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.promise.try.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://miniapp-sdk-3t/./node_modules/core-js/library/modules/web.dom.iterable.js","webpack://miniapp-sdk-3t/./node_modules/querystring-es3/decode.js","webpack://miniapp-sdk-3t/./node_modules/querystring-es3/encode.js","webpack://miniapp-sdk-3t/./node_modules/querystring-es3/index.js","webpack://miniapp-sdk-3t/./node_modules/regenerator-runtime/runtime-module.js","webpack://miniapp-sdk-3t/./node_modules/regenerator-runtime/runtime.js","webpack://miniapp-sdk-3t/(webpack)/buildin/module.js","webpack://miniapp-sdk-3t/./src/3t-miniapp.js","webpack://miniapp-sdk-3t/./src/config.js","webpack://miniapp-sdk-3t/./src/index.js","webpack://miniapp-sdk-3t/./src/protoo-client/Message.js","webpack://miniapp-sdk-3t/./src/protoo-client/Peer.js","webpack://miniapp-sdk-3t/./src/protoo-client/protoo-client.js","webpack://miniapp-sdk-3t/./src/protoo-client/transports/WebSocketTransport.js","webpack://miniapp-sdk-3t/./src/retry/retry.js","webpack://miniapp-sdk-3t/./src/retry/retry_operation.js","webpack://miniapp-sdk-3t/./src/thirdparty/debug.js","webpack://miniapp-sdk-3t/./src/thirdparty/events.js","webpack://miniapp-sdk-3t/./src/thirdparty/runtime.js","webpack://miniapp-sdk-3t/./src/thirdparty/utils.js","webpack://miniapp-sdk-3t/./src/utils/EnhancedEventEmitter.js","webpack://miniapp-sdk-3t/./src/utils/IPLocation.js","webpack://miniapp-sdk-3t/./src/utils/Logger.js","webpack://miniapp-sdk-3t/./src/utils/WxWebSocket.js"],"names":["protooClient","require","Logger","guid","isURL","config","IPLocation","AUTH_INTERVAL","HB_INTERVAL","ERR_FAILED","ERR_DISCONNECTED","UR_CHAIRMAN","UR_PARTICIPANT","UR_AUDIENCE","C_SDK_STATE_IDLE","C_SDK_STATE_INITING","C_SDK_STATE_INIT","C_SDK_STATE_DESTROY","C_JOIN_STATE_IDLE","C_JOIN_STATE_JOINING","C_JOIN_STATE_ON","C_PUBLISH_STATE_IDLE","C_PUBLISH_STATE_ING","C_PUBLISH_STATE_ON","C_SS_AUTO_CONNECTING","C_SS_CONNECTED","C_SS_JOINED","C_SS_RECONNECTED","C_SS_REJOINED","C_SS_FINAL_FAILED","TTTLog","opts","level","callback","_callback","_logLevel","Client","appId","userId","isTest","_logger","error","parseInt","_isTest","Boolean","_logClues","setParameters","roomId","logClues","debug","_sid","_auAddress","_protooUrl","_suspend","attemptAuth","authInterval","authTimeout","_authOK","_sdkState","_joinState","_publishState","_protooPeer","_appId","_roomId","_role","_iploc","_iplocFin","_userId","_eventObserver","_connectId","_sequenceNo","_hbTimer","_lastHBRecvTick","_mapUsers","_subscribes","code","type","message","set","onSuccess","onFailure","disAppAuth","disIploc","auServer","timestamp","Date","parse","randNum","Math","round","random","wx","getSystemInfo","success","res","version","system","platform","brand","model","fail","complete","onNetworkStatusChange","isConnected","networkType","resumeProcess","suspendProcess","reason","test","authProcPromise","resolve","reject","showLoading","title","mask","doAppAuth","setInterval","authTimerPromise","tttEngine","setTimeout","race","then","hideLoading","clearTimeout","warn","resetEventObserver","doIplocation","miniauHost","initProtoo","catch","event","authUrl","request","url","method","authOK","data","e","sid","on","notifySessionStatus","auAccess","close","init","ipLocationTest","ipLocation","Peer","isRetry","needCB","rejoin","join","clear","stopHBTimer","notifyDisconnected","has","get","uid","err","accept","xxx","yyy","zzz","notification","getTime","userData","onUserEnter","onUserLeave","cid","connectId","isSubscribe","unsubscribe","leave","status","logLevel","notify","sequenceNo","currentTick","clearInterval","role","appData","joinRes","startHBTimer","Error","retry","rtmpHost","peers","pushUrl","push","peer","isUpdate","publishResp","subscribeResp","onSubscribe","rotation","onUnsubscribe","opType","sei","mixerUser","devId","delete","userdata","module","exports","logserverUrl","logserverUrl2","getVersion","logger","Message","raw","object","JSON","Array","isArray","id","response","ok","errorCode","errorReason","randomNum","EnhancedEventEmitter","WebSocketTransport","protooUrl","prefix","_closed","_transport","_connected","_data","_sents","safeEmit","_handleRequest","_handleResponse","_handleNotification","values","sent","closeTransport","reconnect","undefined","createRequest","send","timeout","size","data2","timer","createNotification","emit","createSuccessResponse","String","createErrorResponse","WxWebSocket","WST_FULL_TIMEOUT","MAX_RETRY","WST_STATE_IDLE","WST_STATE_TRYING","WST_STATE_ACT","WST_STATE_RETRYING","WST_STATE_FINAL_FAIL","DEFAULT_RETRY_OPTIONS","retries","factor","minTimeout","maxTimeout","options","_stopping","wstTimer","_wstState","_url","_options","_ws","_operation","_randomId","startTransport","closed","stop","wstProc","operation","attemptConnect","wstTimerPromise","wsTransport","result","msg","wstState","listenerCount","reset","attempt","currentAttempt","commentReason","randomId","onWsOpen","onWsMessage","onWsError","onWsClose","connect","cb","ctr","operationRetry","_attempts","_operation_attempts","RetryOperation","timeouts","forever","unref","maxRetryTime","concat","randomize","key","i","createTimeout","length","console","sort","a","b","pow","min","wrap","obj","methods","original","retryWrapper","op","args","prototype","slice","call","arguments","pop","mainError","apply","bind","_originalTimeouts","_timeouts","_maxRetryTime","Infinity","_fn","_errors","_operationTimeout","_operationTimeoutCb","_timeout","_operationStart","_cachedTimeouts","currentTime","unshift","shift","splice","self","fn","timeoutOps","try","log","start","errors","attempts","counts","mainErrorCount","count","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Object","toString","arr2","_typeof","constructor","f","define","r","n","t","o","c","u","p","s","m","h","d","w","y","val","isNaN","long","fmtLong","fmtShort","str","match","exec","parseFloat","toLowerCase","ms","msAbs","abs","plural","name","isPlural","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","len","run","nextTick","Item","array","browser","env","argv","versions","noop","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","setup","createDebug","default","coerce","disable","enable","enabled","humanize","forEach","instances","names","skips","formatters","selectColor","namespace","hash","charCodeAt","colors","prevTime","_len","_key","curr","Number","diff","prev","index","replace","format","formatter","formatArgs","logFn","useColors","color","destroy","extend","indexOf","delimiter","newDebug","namespaces","save","split","RegExp","substr","instance","map","toNamespace","regexp","substring","stack","load","storage","localstorage","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","$1","lastC","_console","setItem","removeItem","getItem","DEBUG","localStorage","j","v","R","Reflect","ReflectApply","target","receiver","Function","ReflectOwnKeys","ownKeys","ProcessEmitWarning","warning","NumberIsNaN","value","EventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","defineProperty","enumerable","arg","RangeError","setMaxListeners","$getMaxListeners","that","getMaxListeners","doError","events","er","context","handler","arrayClone","_addListener","listener","prepend","existing","newListener","warned","emitter","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","list","position","originalListener","spliceOne","keys","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","eventNames","copy","ret","regeneratorRuntime","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","displayName","defineIteratorMethods","isGeneratorFunction","genFun","ctor","mark","__proto__","awrap","__await","AsyncIterator","invoke","record","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","async","next","done","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","abrupt","return","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reverse","iterable","iteratorMethod","skipTempReset","charAt","rootEntry","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","thrown","delegateYield","generateRandomNumber","S4","s1","s2","s3","s4","s5","s6","s7","s8","strRegex","re","IP_FULL_TIMEOUT","IPL_STATE_IDLE","IPL_STATE_STARTING","IPL_STATE_ACT","IPL_STATE_RETRYING","_state","_iplocTimer","_hasGot","_isTPFinish","iplocProc","runIploc","iplocTimerPro","resp","host","iplocationData","eType","sSEQID","mProtocolMsg","sVersion","bLoadBalance","bReConnect","bVipUser","sIDentify","sSecret","sVerifyCode","sAppID","nUserID","sClientVer","sConnectID","mIpAddrMsg","bFec","sIp","nPort","requestId","iplocRes","miniappHome","sDomain","onMessage","APP_NAME","LOG_NONE","LOG_ERROR","LOG_WARN","LOG_INFO","LOG_DEBUG","LOG_TRACE","_prefix","_debug","_warn","_error","_logDebug","_logWarn","_logError","postLog","preMsg","element","header","WX_STATE_IDLE","WX_STATE_STARTING","WX_STATE_ACT","WX_STATE_STOPING","_connState","_socketTask","connectSocket","onClose","onSocketClose","onSocketMessage","onError","onSocketError","onOpen","onSocketOpen","closeInner","wasClean"],"mappings":"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AA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;;;;;;;;;;;AC/IA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC,WAAW,mBAAO,CAAC,8FAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACRa;AACb,aAAa,mBAAO,CAAC,oEAAW;AAChC,cAAc,mBAAO,CAAC,oEAAW;AACjC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,YAAY,mBAAO,CAAC,kEAAU;AAC9B,WAAW,mBAAO,CAAC,gEAAS;AAC5B,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,YAAY,mBAAO,CAAC,oEAAW;AAC/B,iBAAiB,mBAAO,CAAC,8EAAgB;AACzC,eAAe,mBAAO,CAAC,0EAAc;AACrC,qBAAqB,mBAAO,CAAC,0FAAsB;AACnD,SAAS,mBAAO,CAAC,0EAAc;AAC/B,WAAW,mBAAO,CAAC,kFAAkB;AACrC,kBAAkB,mBAAO,CAAC,8EAAgB;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;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CA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;ACrBA;AACA,UAAU;AACV;;;;;;;;;;;;ACFA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA,WAAW,mBAAO,CAAC,8DAAQ;AAC3B,eAAe,mBAAO,CAAC,0EAAc;AACrC,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,cAAc,mBAAO,CAAC,0EAAc;AACpC;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,kEAAU;AAChC,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpDA,aAAa,mBAAO,CAAC,oEAAW;AAChC,gBAAgB,mBAAO,CAAC,gEAAS;AACjC;AACA;AACA;AACA,aAAa,mBAAO,CAAC,8DAAQ;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;ACpEa;AACb;AACA,gBAAgB,mBAAO,CAAC,4EAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjBA;AACA,eAAe,m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AAC,4EAAe;AACvC,cAAc,mBAAO,CAAC,sEAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,aAAa,mBAAO,CAAC,oEAAW;AAChC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,UAAU,mBAAO,CAAC,4EAAe;AACjC,aAAa,mBAAO,CAAC,oEAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,8DAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnFA,gBAAgB,mBAAO,CAAC,4EAAe;AACvC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC,cAAc,mBAAO,CAAC,sEAAY;AAClC;AACA;AACA;;;;;;;;;;;;ACLA;AACA,gBAAgB,mBAAO,CAAC,4EAAe;AACvC;AACA;AACA,2DAA2D;AAC3D;;;;;;;;;;;;ACLA;AACA,cAAc,mBAAO,CAAC,sEAAY;AAClC;AACA;AACA;;;;;;;;;;;;ACJA;AACA,eAAe,mBAAO,CAAC,0EAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA,aAAa,mBAAO,C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,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA,uBAAuB,mBAAO,CAAC,gFAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E,mBAAO,CAAC,0FAAsB;AAC9B,mBAAO,CAAC,8EAAgB;AACxB,UAAU,mBAAO,CAAC,gEAAS;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gDAAgD,mBAAO,CAAC,8EAAgB;AACxE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;AC7RY;AACb,UAAU,mBAAO,CAAC,0EAAc;;AAEhC;AACA,mBAAO,CAAC,8EAAgB;AACxB,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;;;;;;;AChBY;AACb;AACA,aAAa,mBAAO,CAAC,oEAAW;AAChC,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,kBAAkB,mBAAO,CAAC,8EAAgB;AAC1C,cAAc,mBAAO,CAAC,oEAAW;AACjC,eAAe,mBAAO,CAAC,wEAAa;AACpC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,aAAa,mBAAO,CAAC,kEAAU;AAC/B,aAAa,mBAAO,CAAC,oEAAW;AAChC,qBAAqB,mBAAO,CAAC,0FAAsB;AACnD,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,UAAU,mBAAO,CAAC,8DAAQ;AAC1B,aAAa,mBAAO,CAAC,sEAAY;AACjC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,eAAe,mBAAO,CAAC,0EAAc;AACrC,cAAc,mBAAO,CAAC,wEAAa;AACnC,eAAe,mBAAO,CAAC,0EAAc;AACrC,eAAe,mBAAO,CAAC,0EAAc;AACrC,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,iBAAiB,mBAAO,CAAC,kFAAkB;AAC3C,cAAc,mBAAO,CAAC,kFAAkB;AACxC,cAAc,mBAAO,CAAC,sFAAoB;AAC1C,YAAY,mBAAO,CAAC,8EAAgB;AACpC,UAAU,mBAAO,CAAC,0EAAc;AAChC,YAAY,mBAAO,CAAC,8EAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,8EAAgB;AAC1B,EAAE,mBAAO,CAAC,4EAAe;AACzB,EAAE,mBAAO,CAAC,8EAAgB;;AAE1B,sBAAsB,mBAAO,CAAC,sEAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,gEAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzOA;AACA,mBAAO,CAAC,8FAAwB;;;;;;;;;;;;ACDhC;AACA,mBAAO,CAAC,0FAAsB;;;;;;;;;;;;ACD9B;AACA,cAAc,mBAAO,CAAC,oEAAW;;AAEjC,uCAAuC,SAAS,mBAAO,CAAC,4FAAuB,UAAU;;;;;;;;;;;;;ACHzF;AACa;AACb,cAAc,mBAAO,CAAC,oEAAW;AACjC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,aAAa,mBAAO,CAAC,oEAAW;AAChC,yBAAyB,mBAAO,CAAC,8FAAwB;AACzD,qBAAqB,mBAAO,CAAC,sFAAoB;;AAEjD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;;;;;;ACnBU;AACb;AACA,cAAc,mBAAO,CAAC,oEAAW;AACjC,2BAA2B,mBAAO,CAAC,oGAA2B;AAC9D,cAAc,mBAAO,CAAC,sEAAY;;AAElC,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;;;;;;ACXH,mBAAO,CAAC,4EAAe;;;;;;;;;;;;ACAvB,mBAAO,CAAC,4EAAe;;;;;;;;;;;;ACAvB,mBAAO,CAAC,0FAAsB;AAC9B,aAAa,mBAAO,CAAC,oEAAW;AAChC,WAAW,mBAAO,CAAC,gEAAS;AAC5B,gBAAgB,mBAAO,CAAC,0EAAc;AACtC,oBAAoB,mBAAO,CAAC,8DAAQ;;AAEpC;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpFa;;AAEb,iCAAiC,mBAAO,CAAC,0DAAU;AACnD,qCAAqC,mBAAO,CAAC,0DAAU;;;;;;;;;;;;ACHvD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,cAAc;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,gEAAW;;AAEpC;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,eAAe,cAAc;AAC7B;;;;;;;;;;;;ACttBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA,IAAMA,eAAeC,mBAAOA,CAAC,8EAAR,CAArB;AACA,IAAMC,SAASD,mBAAOA,CAAC,gDAAR,CAAf;;eACwBA,mBAAOA,CAAC,wDAAR,C;IAAhBE,I,YAAAA,I;IAAMC,K,YAAAA,K;;AACd,IAAMC,SAASJ,mBAAOA,CAAC,oCAAR,CAAf;;AAEA,IAAMK,aAAaL,mBAAOA,CAAC,wDAAR,CAAnB;;AAEA;AACA,IAAMM,gBAAgB,IAAtB,C,CAA4B;;AAE5B;AACA,IAAMC,cAAc,IAApB,C,CAA0B;AAC1B;;AAEA;AACA;AAC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","file":"miniapp-sdk-3t.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"miniapp-sdk-3t\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"miniapp-sdk-3t\"] = factory();\n\telse\n\t\troot[\"miniapp-sdk-3t\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/number/is-nan\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-names\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-symbols\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","module.exports = require(\"regenerator-runtime\");\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","require('../../modules/es6.number.is-nan');\nmodule.exports = require('../../modules/_core').Number.isNaN;\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","require('../../modules/es6.object.get-own-property-names');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyNames(it) {\n  return $Object.getOwnPropertyNames(it);\n};\n","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertySymbols;\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function () { /* empty */ };\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","var core = module.exports = { version: '2.6.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = true;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","module.exports = require('./_hide');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","const protooClient = require('./protoo-client/protoo-client.js');\nconst Logger = require('./utils/Logger.js');\nconst { guid, isURL } = require('./thirdparty/utils.js');\nconst config = require('./config.js');\n\nconst IPLocation = require('./utils/IPLocation.js');\n\n// AUTH 重试定时器\nconst AUTH_INTERVAL = 5000; // 5s\n\n// 心跳定时器\nconst HB_INTERVAL = 8000; // 8s\n// \n\n// Error code define\n// {\nconst ERR_FAILED = 'failed';\nconst ERR_DISCONNECTED = 'disconnected';\n// }\n\n// User role 定义\nconst UR_CHAIRMAN = 1; // 主席\nconst UR_PARTICIPANT = 2; // 普通用户\nconst UR_AUDIENCE = 3; // 观众\n// \n\n// SDK state (初始化、websocket连接状态)\n// {\nconst C_SDK_STATE_IDLE = 0; // 尚未初始化/已destroy\nconst C_SDK_STATE_INITING = 1; // 正在初始化中\nconst C_SDK_STATE_INIT = 2; // 成功初始化 -- 已成功连接到webserver\nconst C_SDK_STATE_DESTROY = 3; // 已 destroy\n// }\n\n// join 状态\n// {\nconst C_JOIN_STATE_IDLE = 0; // 空闲/注销\nconst C_JOIN_STATE_JOINING = 1; // join 尝试中\nconst C_JOIN_STATE_ON = 2; // join online\n// }\n\n// publish 状态\n// {\nconst C_PUBLISH_STATE_IDLE = 0; // 空闲\nconst C_PUBLISH_STATE_ING = 1; // 当前已发起 publish 请求，尚未最终确认\nconst C_PUBLISH_STATE_ON = 2; // 当前处于 publish 状态\n// }\n\n// session-status 取值\nconst C_SS_AUTO_CONNECTING = 3000; // 正在重连\nconst C_SS_CONNECTED = 200; // 连接成功\nconst C_SS_JOINED = 210; // join成功\nconst C_SS_RECONNECTED = 300; // 重连成功\nconst C_SS_REJOINED = 310; // rejoin成功 -- 在重连后自动 join ，也属于 rejoin\nconst C_SS_FINAL_FAILED = 1000; // 最终失败\n\n// log -- 将 sdk 内部日志 callback 到 app 层，由 app 层输出\nconst TTTLog = class TTTLog\n{\n\tconstructor(opts)\n\t{\n\t\tconst {\n\t\t\tlevel,\n\t\t\tcallback\n\t\t} = opts;\n\n\t\t// \n\t\tthis._callback = callback;\n\n\t\tthis._logLevel = level;\n\t}\n\n\tsetLogLevel(level)\n\t{\n\t\tthis._logLevel = level;\n\t}\n\n\tset onLog(callback)\n\t{\n\t\tthis._callback = callback;\n\t}\n};\n\n/**\n * TTT Engine core\n * 提供对外接口\n * \n */\nconst Client = class Client\n{\n\t/**\n\t * @param {String} appId  -- app id\n\t * @param {String} userId  -- user id\n\t * @param {String} isTest -- 是否为测试环境 -- 测试环境将使用测试环境IPLocation\n\t */\n\tconstructor(appId, userId, isTest)\n\t{\n\t\tif (!appId || !userId)\n\t\t{\n\t\t\tthis._logger.error('Client constructor() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tuserId = parseInt(userId);\n\n\t\t// \n\t\tthis._isTest = Boolean(isTest);\n\n\t\t// 用于日志追踪\n\t\tthis._logClues = '';\n\t\t\n\t\t// \n\t\tthis._logger = new Logger('3t-miniapp-sdk');\n\t\tthis._logger.setParameters({\n\t\t\tappId,\n\t\t\troomId   : '',\n\t\t\tuserId,\n\t\t\tlogClues : this._logClues\n\t\t});\n\n\t\tthis._logger.debug(`Client constructor() appId: ${appId} userId: ${userId}`);\n\t\t/* eslint-disable no-console */\n\t\t// console.log(`Client constructor() appId: ${appId} userId: ${userId} server: ${server}`);\n\t\t/* eslint-enable no-console */\n\n\t\t// connection id\n\t\tthis._sid = guid();\n\n\t\t// miniapp-au's address -- IP\n\t\t// \n\t\tthis._auAddress = '';\n\n\t\tthis._protooUrl = '';\n\n\t\t// 当前系统行为是否处于 挂起/暂停 状态\n\t\t// 当 网络off 时，挂起行为；当 网络on 时，恢复行为\n\t\tthis._suspend = false;\n\n\t\t// auth尝试 计数\n\t\tthis.attemptAuth = 0; \n\t\t// \n\t\tthis.authInterval = null;\n\n\t\t// \n\t\tthis.authTimeout = null;\n\n\t\t// 是否已完成 appId 认证\n\t\tthis._authOK = false;\n\n\t\t// SDK 库状态\n\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\n\t\t// 当前登录状态\n\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\n\n\t\t// protoo-client Peer instance.\n\t\t// @type {protooClient.Peer}\n\t\tthis._protooPeer = null;\n\n\t\t// mediasoup-client Device instance.\n\t\t// @type {mediasoupClient.Device}\n\t\tthis._appId = '';\n\n\t\tthis._roomId = 0;\n\n\t\tthis._role = UR_PARTICIPANT; // 默认为普通用户\n\n\t\t// IPLocation\n\t\tthis._iploc = null;\n\n\t\t// IPLocation 是否已完成\n\t\tthis._iplocFin = false;\n\n\t\t// mediasoup Transport for sending.\n\t\t// @type {mediasoupClient.Transport}\n\t\tthis._userId = 0;\n\n\t\t// event handler\n\t\t// map :: event --> observer_func\n\t\t// observer_func 被初始化为 {}\n\t\t// 在初始化期间，我们已在 _eventObserver 中初始化了所有支持的 event\n\t\t// 在整个运行生命周期内，不允许对 _eventObserver 进行增删操作\n\t\tthis._eventObserver = new Map();\n\n\t\t// connectId 用于描述当前会话\n\t\t// 注：由 gateway 统一分配\n\t\tthis._connectId = '';\n\n\t\t// 心跳包序列号\n\t\tthis._sequenceNo = 1; // 暂以 1 为起始\n\n\t\t// 定时器句柄\n\t\tthis._hbTimer = null;\n\n\t\t// 最近一次收到心跳包的时戳\n\t\tthis._lastHBRecvTick = 0;\n\n\t\tthis._mapUsers = new Map();\n\n\t\t// \n\t\tthis._subscribes = new Map();\n\t}\n\n\tget sid()\n\t{\n\t\treturn this._sid;\n\t}\n\n\t/**\n\t * 从外部将 小程序 live-player，live-pusher 的媒体传输统计信息，通过日志平台记录下来\n\t * @param {Number} opts.code \n\t * @param {String} opts.type -- 类型 player : 拉流媒体状态；pusher : 推流媒体状态\n\t * @param {String} opts.userId -- 用户ID \n\t */\n\tmediaStat(code, type, userId, message)\n\t{\n\t\tthis._logger.debug(`{code:${code}, userId:${userId}, type:\"${type}\", media-state:${message} }`);\n\t}\n\n\t// \n\t// 内部私有函数\n\tresetEventObserver()\n\t{\n\t\tif (!this._eventObserver)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// session-status : 会话状态（控制层面）\n\t\tthis._eventObserver.set('session-status', () => {});\n\t\t// media-status : 媒体传输状态\n\t\tthis._eventObserver.set('media-status', () => {});\n\t\t// stream-added : 有流加入 -- publish\n\t\tthis._eventObserver.set('stream-added', () => {});\n\t\t// stream-removed : 有流移除 -- unpublish\n\t\tthis._eventObserver.set('stream-removed', () => {});\n\t\t// disconnected : 已断开 -- 上层在收到 'disconnected' 事件后，应调用 destroy\n\t\tthis._eventObserver.set('disconnected', () => {});\n\t\t// kickout : 被踢出\n\t\tthis._eventObserver.set('kickout', () => {});\n\t\tthis._eventObserver.set('update-url', () => {});\n\t\t// error : 有错误发生\n\t\tthis._eventObserver.set('error', () => {});\n\t\t// user-online : 有用户上线\n\t\tthis._eventObserver.set('user-online', () => {});\n\t\t// user-offline : 有用户下线\n\t\tthis._eventObserver.set('user-offline', () => {});\n\t}\n\n\t/**\n\t * 初始化 Client 库，此接口为使用SDK的第一步\n\t * \n\t * @param {String} appId     -- \n\t * @param {String} userId    -- 用户ID -- 外部设定的ID，可以用于日志跟踪\n\t * @param {String} onSuccess -- onSuccess() init调用成功，回调 onSuccess\n\t * @param {String} onFailure -- onFailure(event) -- init调用失败，回调 onFailure，event 为错误信息\n\t * @param {Boolean} disAppAuth -- \n\t * @param {Boolean} disIploc --\n\t * @param {String} auServer --\n\t */\n\tasync init(appId, userId, onSuccess, onFailure, disAppAuth, disIploc, auServer)\n\t{\n\t\tif (!appId || !userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client init() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\t\tuserId = parseInt(userId);\n\n\t\tconst timestamp = Date.parse(new Date());\n\t\tconst randNum = Math.round(Math.random() * 1000000000);\n\n\t\tthis._logClues = `${timestamp}-${randNum}`;\n\n\t\tthis._logger.debug(`Client API init() _logClues: ${this._logClues} parameters -- appId: ${appId} userId: ${userId} disAppAuth: ${disAppAuth} disIploc: ${disIploc} auServer: ${auServer}`);\n\t\t// \n\t\ttry\n\t\t{\n\t\t\t// 获取系统信息\n\t\t\twx.getSystemInfo({\n\t\t\t\tsuccess : (res) =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug(`SYS information: \\n  version  : ${res.version}\\n  system   : ${res.system}\\n  platform : ${res.platform}\\n  brand    : ${res.brand}  model    : ${res.model}`);\n\t\t\t\t},\n\t\t\t\tfail     : () => {},\n\t\t\t\tcomplete : () => {}\n\t\t\t});\n\n\t\t\t// \n\t\t\twx.onNetworkStatusChange((res) =>\n\t\t\t{\n\t\t\t\tthis._logger.debug(`wx.onNetworkStatusChange isConnected: ${res.isConnected} networkType: ${res.networkType}`);\n\t\t\t\t// 如果网络恢复，则 -- 更新 lastHBRecvTick\n\t\t\t\t// TODO : reconnect immediately ??\n\t\t\t\tif (res.isConnected) \n\t\t\t\t{\n\t\t\t\t\t// 网络 on\n\t\t\t\t\t// \n\t\t\t\t\tthis.resumeProcess();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// 网络 off\n\t\t\t\t\t// TODO : 挂起所有行为\n\t\t\t\t\tthis.suspendProcess();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\n\t\t// \n\t\t// 首先判断状态\n\t\tif (this._sdkState !== C_SDK_STATE_IDLE)\n\t\t{\n\t\t\tthis._logger.debug(`Client API init() failed. this._sdkState(${this._sdkState}) !== C_SDK_STATE_IDLE`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : `_sdkState(${C_SDK_STATE_IDLE}) is not C_SDK_STATE_IDLE`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// 判断是否 数字\n\t\tif (!/^\\d+$/.test(userId))\n\t\t{\n\t\t\tthis._logger.debug(`Client API init() failed. userId[${userId}] is not number.`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : `userId[${userId}] is not number`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// appId 验证\n\t\t// \n\t\tconst authProcPromise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (disAppAuth)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twx.showLoading({\n\t\t\t\t\ttitle : 'appId auth',\n\t\t\t\t\tmask  : true\n\t\t\t\t});\n\t\t\t\t/* eslint-enable no-undef */\n\n\t\t\t\tthis.attemptAuth = 0;\n\n\t\t\t\tthis.doAppAuth(appId, resolve, reject);\n\n\t\t\t\t// 启动 auth 重试\n\t\t\t\tthis.authInterval = setInterval(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.doAppAuth(appId, resolve, reject);\n\t\t\t\t}, AUTH_INTERVAL);\n\t\t\t}\n\t\t});\n\n\t\tconst authTimerPromise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst tttEngine = this;\n\n\t\t\tthis.authTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tif (!tttEngine._authOK)\n\t\t\t\t{\n\t\t\t\t\treject({\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'appId auth timeout'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 15000); // 默认超时为 15s\n\t\t});\n\n\t\tPromise.race([ authProcPromise, authTimerPromise ])\n\t\t\t.then(() =>\n\t\t\t{\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twx.hideLoading();\n\t\t\t\t/* eslint-enable no-undef */\n\n\t\t\t\t// \n\t\t\t\tif (Boolean(this.authInterval))\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.authInterval);\n\t\t\t\t}\n\t\t\t\tthis.authInterval = null;\n\n\t\t\t\t// 停止 竞赛定时器\n\t\t\t\tif (Boolean(this.authTimeout))\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.authTimeout);\n\t\t\t\t}\n\t\t\t\tthis.authTimeout = null;\n\n\t\t\t\t// \n\t\t\t\tthis._authOK = true;\n\n\t\t\t\t// 如果认证成功，则......\n\t\t\t\tthis._logger.warn('Client API init() appId auth success');\n\n\t\t\t\t// TODO : 进一步的业务逻辑\n\t\t\t\tthis._appId = appId;\n\t\t\t\tthis._userId = userId;\n\n\t\t\t\t// \n\t\t\t\tthis.resetEventObserver();\n\n\t\t\t\t// 用于测试：外部可以指定是否启用 IPLocation\n\t\t\t\tif (!disIploc)\n\t\t\t\t{\n\t\t\t\t\tthis.doIplocation(appId, userId, onSuccess, onFailure);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// TODO : \n\t\t\t\t\tconst miniauHost = auServer || config.miniauHost;\n\n\t\t\t\t\tthis._protooUrl = `${miniauHost}/?appId=${appId}&sid=${this._sid}&userId=${userId}`;\n\n\t\t\t\t\treturn this.initProtoo(appId, userId, onSuccess, onFailure);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((event) =>\n\t\t\t{\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twx.hideLoading();\n\t\t\t\t/* eslint-enable no-undef */\n\n\t\t\t\t// \n\t\t\t\tif (Boolean(this.authInterval))\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.authInterval);\n\t\t\t\t}\n\t\t\t\tthis.authInterval = null;\n\n\t\t\t\t// 停止 竞赛定时器\n\t\t\t\tif (Boolean(this.authTimeout))\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.authTimeout);\n\t\t\t\t}\n\t\t\t\tthis.authTimeout = null;\n\n\t\t\t\t// \n\t\t\t\tthis._logger.warn(`Client API init() auth failed. event: ${JSON.stringify(event)}`);\n\n\t\t\t\tthis._authOK = false;\n\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 500,\n\t\t\t\t\treason : `appId auth failed -- ${JSON.stringify(event)}`\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t// 内部私有函数 -- 执行 appId auth\n\tdoAppAuth(appId, resolve, reject)\n\t{\n\t\t/* eslint-disable no-undef */\n\t\twx.hideLoading();\n\t\t/* eslint-enable no-undef */\n\t\t\n\t\t/* eslint-disable no-undef */\n\t\twx.showLoading({\n\t\t\ttitle : 'appId auth',\n\t\t\tmask  : true\n\t\t});\n\t\t/* eslint-enable no-undef */\n\n\t\tconst authUrl = `${config.authUrl}?appkey=${appId}`;\n\n\t\tthis.attemptAuth++;\n\n\t\tthis._logger.warn(`Client doAppAuth() appId auth request: ${authUrl} -- attemptAuth: ${this.attemptAuth}`);\n\n\t\tconst tttEngine = this;\n\n\t\twx.request({\n\t\t\turl     : authUrl,\n\t\t\tmethod  : 'GET',\n\t\t\tsuccess : (res) =>\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tlet authOK = false;\n\n\t\t\t\t// \n\t\t\t\tif (Boolean(res) && Boolean(res.data))\n\t\t\t\t{\n\t\t\t\t\ttttEngine._logger.debug(`Client doAppAuth() auth response: ${JSON.stringify(res)} code: ${res.data.code}`);\n\n\t\t\t\t\tauthOK = (res.data.code == 0);\n\t\t\t\t}\n\n\t\t\t\tif (!authOK)\n\t\t\t\t{\n\t\t\t\t\ttttEngine._logger.warn('Client doAppAuth() auth failed.');\n\t\t\t\t\treject();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail : (e) =>\n\t\t\t{\n\n\t\t\t\t// \n\t\t\t\tif (this.attemptAuth >= 3)\n\t\t\t\t{\n\t\t\t\t\t// \n\t\t\t\t\ttttEngine._logger.warn(`Client doAppAuth() auth FINAL FAILED -- wx.request : ${JSON.stringify(e)}`);\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// \n\t\t\t\t\ttttEngine._logger.warn(`Client doAppAuth() auth ${this.attemptAuth} failed -- wx.request : ${JSON.stringify(e)}`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\t// 内部私有函数 -- \n\tdoIplocation(appId, userId, onSuccess, onFailure)\n\t{\n\t\tthis._iploc = new IPLocation({\n\t\t\tlogClues : this._logClues,\n\t\t\tsid      : this._sid\n\t\t});\n\t\t// \n\n\t\tif (Boolean(this._iploc))\n\t\t{\n\t\t\tthis._iplocFin = false;\n\n\t\t\tthis._iploc.on('auto-reconnecting', (event) =>\n\t\t\t{\n\t\t\t\tif (event.sid !== this._sid)\n\t\t\t\t\treturn;\n\n\t\t\t\t// Just a notice. Do not have to do anything.\n\t\t\t\t\n\t\t\t\tthis._logger.debug('Client iplocation auto-reconnecting.');\n\n\t\t\t\t// \n\t\t\t\tthis.notifySessionStatus({\n\t\t\t\t\tcode   : C_SS_AUTO_CONNECTING,\n\t\t\t\t\treason : 'iplocation auto-reconnecting'\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// 彻底失败(内部不再自动重连)\n\t\t\tthis._iploc.on('failed', (event) =>\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tif (event.sid !== this._sid)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tif (this._iplocFin)\n\t\t\t\t\treturn;\n\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twx.hideLoading();\n\t\t\t\t/* eslint-enable no-undef */\n\n\t\t\t\tthis._logger.debug('Client iplocation failed.');\n\t\t\t\t// \n\t\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 500,\n\t\t\t\t\treason : 'iplocation failed'\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis._iploc.on('close', (event) =>\n\t\t\t{\n\t\t\t\tif (event.sid !== this._sid)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tif (this._iplocFin)\n\t\t\t\t\treturn;\n\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twx.hideLoading();\n\t\t\t\t/* eslint-enable no-undef */\n\t\t\t});\n\n\t\t\t// 注：一定要确保 initProtoo 在 this._iploc 'ok' 时才执行\n\t\t\tthis._iploc.on('ok', (event) =>\n\t\t\t{\n\t\t\t\tif (event.sid !== this._sid)\n\t\t\t\t\treturn;\n\n\t\t\t\tthis._iplocFin = true;\n\n\t\t\t\tconst {\n\t\t\t\t\tauAccess\n\t\t\t\t} = event;\n\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twx.hideLoading();\n\t\t\t\t/* eslint-enable no-undef */\n\n\t\t\t\t// \n\t\t\t\tthis._iploc.close();\n\n\t\t\t\t// TODO : \n\t\t\t\t// 使用 config 中定义 的 IP location\n\t\t\t\t// this._protooUrl = `${config.miniauHost}/?appId=${appId}&sid=${this._sid}&userId=${userId}`;\n\n\t\t\t\t// 使用 IP location 分配的 miniapp-au\n\t\t\t\tthis._protooUrl = `wss://${auAccess}/miniappau/?appId=${appId}&sid=${this._sid}&userId=${userId}`;\n\n\t\t\t\treturn this.initProtoo(appId, userId, onSuccess, onFailure);\n\t\t\t});\n\n\t\t\t/* eslint-disable no-undef */\n\t\t\twx.showLoading({\n\t\t\t\ttitle : 'iplocation',\n\t\t\t\tmask  : true\n\t\t\t});\n\t\t\t/* eslint-enable no-undef */\n\n\t\t\t// \n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis._iploc.init({\n\t\t\t\t\turl    : this._isTest ? `${config.ipLocationTest}` : `${config.ipLocation}`,\n\t\t\t\t\tappId  : this._appId,\n\t\t\t\t\tuserId : this._userId\n\t\t\t\t});\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 500,\n\t\t\t\t\treason : 'iplocation invalid'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// \n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : 'iplocation invalid'\n\t\t\t});\n\t\t}\n\t}\n\n\t// 内部私有函数 -- \n\t// 注：一定要确保 initProtoo 在 this._iploc 'ok' 时才执行\n\tinitProtoo(appId, userId, onSuccess, onFailure)\n\t{\n\t\tif (!appId || !userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client initProtoo() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// \n\t\tthis._logger.debug(`Client initProtoo protooUrl: ${this._protooUrl}`);\n\n\t\t// \n\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\t\tthis._sdkState = C_SDK_STATE_INITING;\n\n\t\t/* eslint-disable no-undef */\n\t\twx.showLoading({\n\t\t\ttitle : 'login',\n\t\t\tmask  : true\n\t\t});\n\t\t/* eslint-enable no-undef */\n\n\t\tthis._protooPeer = new protooClient.Peer(this._protooUrl, this._logClues, this._logger);\n\n\t\ttry\n\t\t{\n\t\t\tthis._protooPeer.init();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : error.message\n\t\t\t});\n\n\t\t\tthis._logger.debug('Client API init() failed.');\n\n\t\t\t// eslint-disable no-undef \n\t\t\twx.hideLoading();\n\t\t\t// eslint-enable no-undef \n\n\t\t\treturn;\n\t\t}\n\n\t\t// open -- 连接已建立\n\t\tthis._protooPeer.on('open', (event) =>\n\t\t{\n\t\t\tconst {\n\t\t\t\tisRetry\n\t\t\t} = event;\n\n\t\t\t// \n\t\t\t// \n\t\t\tconst needCB = (this._sdkState === C_SDK_STATE_INITING);\n\n\t\t\t// \n\t\t\tthis._logger.debug(`Client protooClient.Peer event: [open]. isRetry: ${isRetry} this._joinState: ${this._joinState}`);\n\n\t\t\tthis._sdkState = C_SDK_STATE_INIT;\n\n\t\t\t// 通知上层：当前连接成功\n\t\t\tthis.notifySessionStatus({\n\t\t\t\tcode   : isRetry ? C_SS_RECONNECTED : C_SS_CONNECTED, // 连接成功\n\t\t\t\treason : '连接成功'\n\t\t\t});\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\n\t\t\t\tdata : `Client initProtoo() event[open] this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\tthis.resumeProcess();\n\n\t\t\t// 如果本次是重连成功，则若当前已 join ，则应自动 rejoin -- \n\t\t\tif (isRetry)\n\t\t\t{\n\t\t\t\tif (this._joinState === C_JOIN_STATE_ON)\n\t\t\t\t{\n\t\t\t\t\tthis.rejoin();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\t\t\n\t\t\t\t\tthis.join(\n\t\t\t\t\t\tthis._roomId,\n\t\t\t\t\t\tthis._userId,\n\t\t\t\t\t\t() => {},\n\t\t\t\t\t\t() => {},\n\t\t\t\t\t\ttrue);\n\t\t\t\t}\n\n\t\t\t\treturn; // 无需执行后续的动作\n\t\t\t}\n\n\t\t\t// 回调\n\t\t\tif (needCB)\n\t\t\t{\n\t\t\t\tonSuccess({\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// 通知：内部正在进行自动重连\n\t\tthis._protooPeer.on('auto-reconnecting', () =>\n\t\t{\n\t\t\t// 清空本地暂存用户列表\n\t\t\tif (Boolean(this._mapUsers))\n\t\t\t{\n\t\t\t\tthis._mapUsers.clear();\n\t\t\t}\n\n\t\t\t// 停止 ping/pong 定时器\n\t\t\tthis.stopHBTimer();\n\n\t\t\t// 需要更新 joinState，以免在 重连期间 又执行任何其他请求\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\t\t// \n\t\t\tthis._logger.debug('Client protooClient.Peer event: [auto-reconnecting]');\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\n\t\t\t\tdata : `Client initProtoo() event[auto-reconnecting] this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\tthis.notifySessionStatus({\n\t\t\t\tcode   : C_SS_AUTO_CONNECTING, // 正在自动重连 -- 当前网络处于未连接状态，上层调用者应根据实际情况做逻辑处理\n\t\t\t\treason : 'protoo session [auto-reconnecting] -- 异常离线，正在自动重连'\n\t\t\t});\n\t\t\t// \n\n\t\t\t/* eslint-disable no-undef */\n\t\t\twx.showLoading({\n\t\t\t\ttitle : '正在自动重连',\n\t\t\t\tmask  : true\n\t\t\t});\n\t\t\t/* eslint-enable no-undef */\n\n\t\t});\n\n\t\t// 到 服务器 的连接，已彻底失败(内部不再自动重连)\n\t\tthis._protooPeer.on('failed', () =>\n\t\t{\n\t\t\tthis._logger.error('Client protooClient.Peer event: [failed]');\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\n\t\t\t\tdata : `Client initProtoo() event[failed] this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\t// \n\t\t\tconst needCB = (this._sdkState === C_SDK_STATE_INITING);\n\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\t\t/* eslint-disable no-undef */\n\t\t\twx.hideLoading();\n\t\t\t/* eslint-enable no-undef */\n\n\t\t\t// \n\t\t\tif (needCB)\n\t\t\t{\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 503,\n\t\t\t\t\treason : 'websocket connect failed'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Notify \n\t\t\t// \n\t\t\t// TODO : \n\t\t\tthis.notifyDisconnected();\n\t\t});\n\n\t\t// 到 服务器 的连接，已彻底断开(内部不再自动重连)\n\t\tthis._protooPeer.on('disconnected', () =>\n\t\t{\n\t\t\tthis._logger.error('Client protooClient.Peer event: [disconnected]');\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\n\t\t\t\tdata : `Client initProtoo() event[disconnected] this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\t// \n\t\t\tconst needCB = (this._sdkState === C_SDK_STATE_INITING);\n\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\t\tif (needCB)\n\t\t\t{\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 503,\n\t\t\t\t\treason : 'websocket disconnected'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.notifyDisconnected();\n\t\t});\n\n\t\tthis._protooPeer.on('close', (e) =>\n\t\t{\n\t\t\tthis._logger.error(`Client protooClient.Peer event: [close] code: ${e.code} reason: ${e.reason}`);\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `initProtoo-${new Date().getTime()}`,\n\t\t\t\tdata : `Client initProtoo() event[close] this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\tif (this._sdkState === C_SDK_STATE_IDLE)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\t\t\t// \n\t\t\t\n\t\t\tif (e.code === 4100)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('kickout'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._eventObserver.get('kickout')({\n\t\t\t\t\t\t\tuid    : this._userId,\n\t\t\t\t\t\t\treason : e.reason\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (err)\n\t\t\t\t{\n\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [close] -- notify [kickout] EXCEPTION -- ${JSON.stringify(err)}`);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Notify \n\t\t\tthis.notifySessionStatus({\n\t\t\t\tcode   : C_SS_FINAL_FAILED, // 已关闭，不再尝试自动重连\n\t\t\t\treason : 'protoo session [close]'\n\t\t\t});\n\t\t\t\n\t\t\tthis.notifyDisconnected();\n\t\t\t// \n\t\t});\n\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tthis._protooPeer.on('request', async (request, accept, reject) =>\n\t\t{\n\t\t\tthis._logger.debug(\n\t\t\t\t'Client protooClient.Peer event: [request] [method: ',\n\t\t\t\trequest.method,\n\t\t\t\t'] data: ]',\n\t\t\t\trequest.data);\n\n\t\t\tswitch (request.method)\n\t\t\t{\n\t\t\t\tcase 'xxx':\n\t\t\t\t{\n\t\t\t\t\tconst {\n\t\t\t\t\t\txxx,\n\t\t\t\t\t\tyyy,\n\t\t\t\t\t\tzzz\n\t\t\t\t\t} = request.data;\n\n\t\t\t\t\t// We are ready. Answer the protoo request.\n\t\t\t\t\taccept();\n\t\t\t\t\t// or\n\t\t\t\t\t// reject(403, 'some reason');\n\n\t\t\t\t\t// TODO\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\tthis._protooPeer.on('notification', (notification) =>\n\t\t{\n\t\t\tthis._logger.debug(\n\t\t\t\t'Client protooClient.Peer event: [notification] [method: ',\n\t\t\t\tnotification.method, ' data: ', notification.data, ']');\n\n\t\t\t// 更新 lastHBRecvTick\n\t\t\tthis._lastHBRecvTick = new Date().getTime();\n\n\t\t\tswitch (notification.method)\n\t\t\t{\n\t\t\t\tcase 'pong':\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug('Client protooClient.Peer [pong]');\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'user-online':\n\t\t\t\t{\n\t\t\t\t\t// TODO -- 是否考虑 对 notification 的 ACK ??\n\t\t\t\t\tconst userData = notification.data;\n\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [user-online] userData: ${JSON.stringify(userData)}`);\n\n\t\t\t\t\tthis.onUserEnter(userData);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'user-offline':\n\t\t\t\t{\n\t\t\t\t\tconst uid = notification.data.userId;\n\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [user-offline] userId: ${uid}`);\n\n\t\t\t\t\tthis.onUserLeave(uid);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'publish':\n\t\t\t\t{\n\t\t\t\t\tconst cid = notification.data.connectId;\t\t\t\t\t\n\t\t\t\t\tconst uid = notification.data.userId;\n\t\t\t\t\tconst url = notification.data.url;\n\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [publish] userId: ${uid} connectId: ${cid} url: ${url}`);\n\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('stream-added'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis._eventObserver.get('stream-added')({\n\t\t\t\t\t\t\t\tcid,\n\t\t\t\t\t\t\t\tuid\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [notification publish] -- notify [stream-added] EXCEPTION -- ${JSON.stringify(e)}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'unpublish':\n\t\t\t\t{\n\t\t\t\t\tconst uid = notification.data.userId;\n\t\t\t\t\tconst cid = notification.data.connectId;\n\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [unpublish] userId: ${uid}`);\n\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('stream-removed'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis._eventObserver.get('stream-removed')({\n\t\t\t\t\t\t\t\tcid,\n\t\t\t\t\t\t\t\tuid\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [notification unpublish] -- notify [stream-removed] EXCEPTION -- ${JSON.stringify(e)}`);\n\t\t\t\t\t}\t\n\n\t\t\t\t\t// 自动将该路流 unsubscribe 掉\n\t\t\t\t\tif (this.isSubscribe(uid))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.unsubscribe({\n\t\t\t\t\t\t\tuserId    : uid,\n\t\t\t\t\t\t\tonSuccess : () => {},\n\t\t\t\t\t\t\tonFailure : () => {}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcase 'kickout':\n\t\t\t\t{\n\t\t\t\t\tconst uid = notification.data.userId;\n\t\t\t\t\tconst reason = notification.data.reason;\n\n\t\t\t\t\tthis._logger.debug(`Client protooClient.Peer [kickout] userId: ${uid} reason: ${reason}`);\n\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('kickout'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis._eventObserver.get('kickout')({\n\t\t\t\t\t\t\t\tuid,\n\t\t\t\t\t\t\t\treason\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._logger.warn(`Client protooClient.Peer event: [notification kickout] -- notify [kickout] EXCEPTION -- ${JSON.stringify(e)}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tthis._logger.error(\n\t\t\t\t\t\t'Client unknown protoo notification.method [%s]', notification.method);\n\t\t\t\t}\n\t\t\t}\n\t\t}); \n\t}\n\n\t// 内部私有函数\n\t// 恢复所有行为\n\tresumeProcess()\n\t{\n\t\tthis._lastHBRecvTick = new Date().getTime();\n\n\t\t// TODO : 恢复所有行为\n\n\t\tthis._suspend = false;\n\n\t\t// \n\t\tif (Boolean(this._protooPeer))\n\t\t{\n\t\t\tthis._protooPeer.resumeProcess();\n\t\t}\n\t}\n\n\t// 内部私有函数\n\t// 挂起所有行为\n\tsuspendProcess()\n\t{\n\t\tthis._suspend = true;\n\n\t\t// \n\t\tif (Boolean(this._protooPeer))\n\t\t{\n\t\t\tthis._protooPeer.suspendProcess();\n\t\t}\n\t}\n\n\t/**\n\t * TTT Engine 销毁\n\t */\n\tdestroy()\n\t{\n\t\tthis.resetEventObserver();\n\t\t// \n\t\tthis._logger.debug(`Client API destroy() ${this._logClues} this._sdkState: ${this._sdkState}`);\n\n\t\tif (this._joinState !== C_JOIN_STATE_IDLE)\n\t\t{\n\t\t\tthis.leave(() => {}, () => {});\n\t\t}\n\n\t\t// 停止 heartbeat 定时器\n\t\tthis.stopHBTimer();\n\n\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\n\t\t/* eslint-disable no-undef */\n\t\twx.hideLoading();\n\t\t/* eslint-enable no-undef */\n\n\t\t// Close protoo Peer\n\t\tif (Boolean(this._protooPeer))\n\t\t\tthis._protooPeer.close();\n\t\tthis._protooPeer = null;\n\n\t\t// \n\t\tif (Boolean(this._iploc))\n\t\t\tthis._iploc.close();\n\t\tthis._iploc = null;\n\t}\n\n\t// 内部私有函数\n\tnotifySessionStatus(e)\n\t{\n\t\tif (!e)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tcode,\n\t\t\treason\n\t\t} = e;\n\n\t\t// \n\t\ttry\n\t\t{\n\t\t\tthis._logger.debug(`Client notifySessionStatus() -- code: ${code} reason: ${reason}`);\n\n\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('session-status'))\n\t\t\t{\n\t\t\t\tthis._eventObserver.get('session-status')({\n\t\t\t\t\tcode, // 正在重连\n\t\t\t\t\tuid    : this._userId,\n\t\t\t\t\tcid    : this._connectId,\n\t\t\t\t\tstatus : reason\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tthis._logger.warn(`Client notifySessionStatus() -- notify [session-status] EXCEPTION -- ${JSON.stringify(err)}`);\n\t\t}\n\t}\n\n\t// 内部私有函数\n\t// 向上层通知\n\tnotifyDisconnected()\n\t{\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis._logger.debug('Client notifyDisconnected() -- event[disconnected]');\n\n\t\t\t\t// 向上层调用者通知：disconnected\n\t\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('disconnected'))\n\t\t\t\t{\n\t\t\t\t\tthis._eventObserver.get('disconnected')();\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tthis._logger.warn(`Client notifyDisconnected() -- notify [disconnected] EXCEPTION -- ${JSON.stringify(e)}`);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * \n\t * @param {String} logLevel -- 取值范围\n\t *                             'LOG_NONE','LOG_ERROR','LOG_WARN','LOG_INFO','LOG_DEBUG','LOG_TRACE'\n\t */\n\tsetLogLevel(logLevel)\n\t{\n\t\tif (!this._logger)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._logger.logLevel = logLevel;\n\t}\n\n\t// \n\t// 注：要确保 -- on 一定要在 join 之前调用，以免 join 成功后，下层触发的 事件 不能及时投递给上层\n\t// on bind 事件监听回调函数\n\t// \n\t// 可监听如下事件（以及其所携带参数）：\n\t// 'session-status' -- { cid: connectId; uid: userId; status: String }\n\t// 'media-status'   -- { cid: connectId; uid: userId; status: object }\n\t// 'stream-added'   -- { cid: connectId; uid: userId }\n\t// 'stream-removed' -- { cid: connectId; uid: userId }\n\t// 'disconnected'   -- { uid: userId; reason: 说明 }\n\t// 'kickout'        -- { uid: userId; reason: *** }\n\t// 'update-url'     -- { cid: connectId; uid: userId; url: 更新后的 url }\n\t// 'error'          -- { cid: connectId; uid: userId; code: 错误码; reason: 详细说明 }\n\t// 'user-online'    -- { userId: 用户ID; role: 用户角色; ueType: 终端类型(小程序为9) }\n\t// 'user-offline'   -- userId: 用户ID\n\t// \n\t/**\n\t * \n\t * @param {String} event      -- 事件名\n\t * @param {Function} callback -- 响应函数名 \n\t */\n\ton(event, callback)\n\t{\n\t\t// \n\t\tif (!(this._eventObserver) || !event || typeof event !== 'string' || !callback || typeof callback !== 'function')\n\t\t{\n\t\t\tthis._logger.debug(`Client API on() failed. parameters invalid. [event: ${event}]`);\n\n\t\t\treturn -1;\n\t\t}\n\t\t\n\t\t// 在初始化期间，我们已在 _eventObserver 中初始化了所有支持的 event\n\t\t// 若 _eventObserver MAP 中无此节点，则表明我们不支持，直接返回\n\t\t// \n\t\tif (!this._eventObserver.has(event))\n\t\t{\n\t\t\tthis._logger.debug(`Client API on() failed. unsupported [event: ${event}]`);\n\n\t\t\treturn -2;\n\t\t}\n\n\t\tthis._logger.debug(`Client API on() success. [event: ${event}]`);\n\n\t\tthis._eventObserver.set(event, callback);\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * 停止监控指定事件 -- 该事件再发生时，将不再向应用层通知\n\t * \n\t * @param event -- 事件名\n\t */\n\toff(event)\n\t{\n\t\tif (!(this._eventObserver) || !event || typeof event !== 'string')\n\t\t{\n\t\t\tthis._logger.debug(`Client API off() failed. parameters invalid. [event: ${event}]`);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._eventObserver.has(event))\n\t\t{\n\t\t\tthis._logger.debug(`Client API off() failed. unsupported [event: ${event}]`);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._logger.debug(`Client API off() success. [event: ${event}]`);\n\n\t\tthis._eventObserver.set(event, () => {});\n\n\t\treturn;\n\t}\n\n\t// 内部私有函数 -- 启动心跳定时器\n\tstartHBTimer()\n\t{\n\t\tthis.stopHBTimer();\n\n\t\t// \n\t\tPromise.resolve()\n\t\t\t.then(async () =>\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tthis._lastHBRecvTick = new Date().getTime();\n\t\t\t\t\n\t\t\t\t// Start the timer for heartbeat\n\t\t\t\tthis._hbTimer = setInterval(() =>\n\t\t\t\t{\n\t\t\t\t\t// \n\t\t\t\t\tif (this._suspend)\n\t\t\t\t\t{\n\t\t\t\t\t\t// 如果已 挂起 ，则 不再执行心跳；也不再执行 超时判断\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._joinState === C_JOIN_STATE_ON)\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis._protooPeer.notify('ping', {\n\t\t\t\t\t\t\tsequenceNo : (this._sequenceNo++)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// \n\t\t\t\t\tconst currentTick = new Date().getTime();\n\n\t\t\t\t\t// \n\t\t\t\t\tif (currentTick - this._lastHBRecvTick >= (HB_INTERVAL * 12))\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis._logger.error(`Client startHBTimer() no response. currentTick: ${currentTick} this._lastHBRecvTick: ${this._lastHBRecvTick}`);\n\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis.stopHBTimer();\n\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\t\t\t\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\t\t\t\t\t/* 不再执行 reconnect\n\t\t\t\t\t\t// TODO : ;\n\t\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis._protooPeer.reconnect({\n\t\t\t\t\t\t\t\treason : 'hb timeout -- reconnect'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\t*/\n\n\t\t\t\t\t\tthis.notifySessionStatus({\n\t\t\t\t\t\t\tcode   : C_SS_FINAL_FAILED,\n\t\t\t\t\t\t\treason : '超时未收到任何消息，彻底断开'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.notifyDisconnected();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// \n\t\t\t\t}, HB_INTERVAL);\n\t\t\t})\n\t\t\t.catch((error) =>\n\t\t\t{\n\t\t\t\tthis._logger.error('Client startHBTimer() failed');\n\t\t\t});\n\t}\n\t\n\t// 内部私有函数 -- \n\tstopHBTimer()\n\t{\n\t\t// 如果定时器已经启动，则先关闭\n\t\tif (Boolean(this._hbTimer))\n\t\t{\n\t\t\tclearInterval(this._hbTimer);\n\t\t\tthis._hbTimer = null;\n\t\t}\n\t}\n\n\t/**\n\t * 设置用户角色，目前仅支持在 join 前设置用户角色；且在用户已登录系统期间，不可更换\n\t * \n\t * @param {Int} role -- 用户角色\n\t *                           > 取值范围：\n\t *                           UR_CHAIRMAN = 1; // 主席\n\t *                           UR_PARTICIPANT = 2; // 普通用户\n\t *                           UR_AUDIENCE = 3; // 观众\n\t * @param {Function} onSuccess -- 成功时回调\n\t * @param {Function} onFailure -- 失败时回调\n\t */\n\tasync setRole(role, onSuccess, onFailure)\n\t{\n\t\tif (!role || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client setRole() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API setRole() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (role !== UR_CHAIRMAN && role !== UR_PARTICIPANT && role !== UR_AUDIENCE)\n\t\t{\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : `Invalid role: ${role}`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tthis._role = role;\n\n\t\tthis._logger.debug(`Client API setRole() userRole: ${this._role}`);\n\n\t\t// \n\t\tonSuccess();\n\n\t\treturn;\n\t}\n\n\t// 适用场景：本端已 join 期间，断链，重连成功\n\tasync rejoin()\n\t{\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API rejoin() system suspend!!!');\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._logger.debug(`Client rejoin [this._appId:${this._appId} this._roomId:${this._roomId} this._userId:${this._userId}]`);\n\t\t// \n\t\ttry\n\t\t{\n\t\t\t// 状态 : Joining\n\t\t\t// ???\n\t\t\tthis._joinState = C_JOIN_STATE_JOINING;\n\t\t\tthis._logger.warn(`Client rejoin this._joinState: ${this._joinState}`);\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `rejoin-${new Date().getTime()}`,\n\t\t\t\tdata : `Client rejoin() this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\t// Join now into the room.\n\t\t\t// NOTE: Don't send our RTP capabilities if we don't want to consume.\n\t\t\t\n\t\t\tconst joinRes = await this._protooPeer.request(\n\t\t\t\t'rejoin',\n\t\t\t\t{\n\t\t\t\t\tappId     : this._appId,\n\t\t\t\t\troomId    : this._roomId,\n\t\t\t\t\tuserId    : this._userId,\n\t\t\t\t\tconnectId : this._connectId,\n\t\t\t\t\trole      : this._role,\n\t\t\t\t\tappData   : '',\n\t\t\t\t\tlogClues  : this._logClues\n\t\t\t\t});\n\n\t\t\t// TODO : \n\t\t\t// peers\n\t\t\tconst {\n\t\t\t\tcode,\n\t\t\t\treason\n\t\t\t} = joinRes;\n\n\t\t\tif (code == 404) // 该用户在服务器端并不存在，故可直接 join\n\t\t\t{\n\t\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\t\n\t\t\t\tthis.join(\n\t\t\t\t\tthis._roomId,\n\t\t\t\t\tthis._userId,\n\t\t\t\t\t() => {},\n\t\t\t\t\t() => {},\n\t\t\t\t\ttrue);\n\t\t\t}\n\t\t\telse if (code == 200) // 成功\n\t\t\t{\n\t\t\t\t// 状态\n\t\t\t\tthis._joinState = C_JOIN_STATE_ON;\n\t\n\t\t\t\t// 进入 C_JOIN_STATE_ON 状态，向服务器请求 更新当前room内的发布流，以便本端及时订阅\n\t\t\t\tthis._protooPeer.request('update-media', {});\n\n\t\t\t\tthis.notifySessionStatus({\n\t\t\t\t\tcode   : C_SS_REJOINED, // rejoin 成功\n\t\t\t\t\treason : 'rejoin 成功'\n\t\t\t\t});\n\n\t\t\t\t// \n\t\t\t\tthis.startHBTimer();\n\t\t\t}\n\t\t\telse // 失败\n\t\t\t{\n\t\t\t\tthrow new Error({\n\t\t\t\t\tcode,\n\t\t\t\t\treason\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client rejoin failed. error: ', error);\n\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\t\t// \n\t\t\tthis.notifySessionStatus({\n\t\t\t\tcode   : C_SS_FINAL_FAILED, // \n\t\t\t\treason : `rejoin 失败 -- ${JSON.stringify(error.reason)}`\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis.notifyDisconnected();\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * \n\t * @param {String} roomId      -- 房间号\n\t * @param {String} userId      -- 用户ID\n\t * @param {Function} onSuccess -- 成功后回调\n\t *                                     > onSuccess 函数原型如下：\n\t *                                     onSuccess(opts){}\n\t *                                     其中 opts 参数详细如下：\n\t *                                     opts.connectId -- 该用户对应的 connectId\n\t *                                     opts.pushUrl   -- 该用户的 rtmp push url\n\t *                                     opts.peers     -- 房间内的用户列表\n\t * @param {Function} onFailure -- 失败后回调\n\t *                                     > onFailure 函数原型如下：\n\t *                                     onFailure(opts){}\n\t *                                     其中 opts 参数详细如下：\n\t *                                     opts.code   -- 错误码\n\t *                                     opts.reason -- 详细错误信息\n\t * \n\t */\n\tasync join(roomId, userId, onSuccess, onFailure, retry)\n\t{\n\t\tif (!roomId || !userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client join() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\troomId = parseInt(roomId);\n\t\tuserId = parseInt(userId);\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API join() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\t// 首先判断状态\n\t\tif (this._sdkState !== C_SDK_STATE_INIT)\n\t\t{\n\t\t\tthis._logger.warn('Client API join() failed. no-init.');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'Client is no-init'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// 判断是否 数字\n\t\tif ((!/^\\d+$/.test(userId)) || (!/^\\d+$/.test(roomId)))\n\t\t{\n\t\t\tthis._logger.debug(`Client API join() failed. roomId[${roomId}] or userId[${userId}] is not number.`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : `roomId[${roomId}] or userId[${userId}] is not number`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t//\n\t\tthis._roomId = roomId;\n\t\t// logger 中需要登记 相关信息，用于日志中携带\n\t\tthis._logger.setParameters({\n\t\t\tappId    : this._appId,\n\t\t\troomId   : this._roomId,\n\t\t\tuserId   : this._userId,\n\t\t\tlogClues : this._logClues\n\t\t});\n\n\t\t// \n\t\tif (userId !== this._userId)\n\t\t{\n\t\t\tthis._logger.debug(`Client API join() failed. parameters un-match: userId(${userId}) & this._userId(${this._userId})`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : '3t-miniapp join() Parameter mismatch'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t//\n\t\tthis._roomId = roomId;\n\n\t\tif (this._joinState !== C_JOIN_STATE_IDLE)\n\t\t{\n\t\t\tthis._logger.debug(`Client API join() failed. error-state: this._joinState(${this._joinState})`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : this._joinState === C_JOIN_STATE_ON ? 'User is online.' : 'Join is processing...'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\t// 状态 : Joining\n\t\t\tthis._joinState = C_JOIN_STATE_JOINING;\n\n\t\t\t// \n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `join-${new Date().getTime()}`,\n\t\t\t\tdata : `Client join() this._joinState: ${this._joinState}`\n\t\t\t});\n\t\t\t*/\n\n\t\t\tthis._logger.debug(`Client API join() request. this._joinState: ${this._joinState}`);\n\n\t\t\t// Join now into the room.\n\t\t\t// NOTE: Don't send our RTP capabilities if we don't want to consume.\n\t\t\t\n\t\t\tconst joinRes = await this._protooPeer.request(\n\t\t\t\t'join',\n\t\t\t\t{\n\t\t\t\t\tappId    : this._appId,\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId   : this._userId,\n\t\t\t\t\trole     : this._role,\n\t\t\t\t\tappData  : '',\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\t/* eslint-disable no-undef */\n\t\t\twx.hideLoading();\n\t\t\t/* eslint-enable no-undef */\n\n\t\t\t// 状态\n\t\t\tthis._joinState = C_JOIN_STATE_ON;\n\n\t\t\t// 进入 C_JOIN_STATE_ON 状态，向服务器请求 更新当前room内的发布流，以便本端及时订阅\n\t\t\tthis._protooPeer.request('update-media', {});\n\n\t\t\tthis._logger.debug('Client API join() success. joinRes: ', joinRes);\n\t\t\t// \n\t\t\t// 收到的 response 的 data 内容示例如下：\n\t\t\t// {\n\t\t\t//     \"roomId\":9876000,\n\t\t\t//     \"userId\":9876333,\n\t\t\t//     \"role\":2,\n\t\t\t//     \"uetype\":6,\n\t\t\t//     \"connectId\":\"3d560c8b-a2d0-4539-96d1-c3d2c62e470d\",\n\t\t\t//     \"sessionId\":\"7a617c050c9641f9b66d87c7b2f35c18\",\n\t\t\t//     \"rtmpHost\":{\n\t\t\t//         \"pull\":\"rtmp://pull.3ttech.cn/sdk/3d560c8b-a2d0-4539-96d1-c3d2c62e470d\",\n\t\t\t//         \"push\":\"rtmp://push.3ttech.cn/sdk/3d560c8b-a2d0-4539-96d1-c3d2c62e470d\"\n\t\t\t//     },\n\t\t\t//     \"peers\":[\n\t\t\t//         {\n\t\t\t//             \"userId\":938495,\n\t\t\t//             \"roomId\":9876000,\n\t\t\t//             \"role\":1,\n\t\t\t//             \"connectId\":\"BC83A0BA-15B7-4B77-AE61-BFB8656298D2\",\n\t\t\t//             \"sessionId\":\"7a617c050c9641f9b66d87c7b2f35c18\"\n\t\t\t//         }\n\t\t\t//     ]\n\t\t\t// }\n\n\t\t\tconst {\n\t\t\t\tconnectId,\n\t\t\t\trtmpHost,\n\t\t\t\tpeers\n\t\t\t} = joinRes;\n\n\t\t\t// connectId 取自 join response.\n\t\t\tthis._connectId = connectId;\n\n\t\t\t// \n\t\t\tthis.startHBTimer();\n\t\t\t// \n\n\t\t\t// TODO : with peers ???\n\t\t\t// \n\t\t\tonSuccess({\n\t\t\t\tconnectId : this._connectId,\n\t\t\t\tpushUrl   : rtmpHost.push,\n\t\t\t\tpeers     : peers\n\t\t\t\t// ...\n\t\t\t\t// peers\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis.notifySessionStatus({\n\t\t\t\tcode   : !retry ? C_SS_JOINED : C_SS_REJOINED, // 连接成功\n\t\t\t\treason : 'join 成功'\n\t\t\t});\n\n\t\t\t// \n\t\t\tif (Boolean(this._mapUsers))\n\t\t\t{\n\t\t\t\tthis._mapUsers.clear();\n\t\t\t}\n\t\t\t// \n\t\t\tfor (const peer of peers)\n\t\t\t{\n\t\t\t\tthis.onUserEnter(peer);\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API join() failed. error: ', error);\n\n\t\t\tthis._sdkState = C_SDK_STATE_IDLE;\n\t\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : error.message\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis.notifySessionStatus({\n\t\t\t\tcode   : C_SS_FINAL_FAILED,\n\t\t\t\treason : `join 失败 -- ${error.message}`\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis.notifyDisconnected();\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * 用户从系统中注销/退出\n\t * \n\t * @param {Function} onSuccess -- 成功时调用\n\t * @param {Function} onFailure -- 失败时调用\n\t */\n\tasync leave(onSuccess, onFailure)\n\t{\n\t\tif (typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client leave() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API leave() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\t// 首先判断状态\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\t// \n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : 'User is not online'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tawait this._protooPeer.request(\n\t\t\t\t'leave',\n\t\t\t\t{\n\t\t\t\t\troomId    : this._roomId,\n\t\t\t\t\tuserId    : this._userId,\n\t\t\t\t\tconnectId : this._connectId,\n\t\t\t\t\tlogClues  : this._logClues\n\t\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API leave() failed. error: ', error);\n\t\t}\n\t\t//\n\t\tthis._joinState = C_JOIN_STATE_IDLE;\n\n\t\tthis._logger.debug('Client API leave() success.');\n\n\t\tonSuccess();\n\t}\n\n\t/**\n\t * 用户发布自身流\n\t * \n\t * @param {Function} onSuccess -- 成功时调用\n\t *                                     > onSuccess 函数原型如下：\n\t *                                     onSuccess(opts){}\n\t *                                     其中 opts 参数详细如下：\n\t *                                     opts.connectId -- 该用户对应的 connectId\n\t *                                     opts.url       -- 该用户的 rtmp push url\n\t * @param {Function} onFailure -- 失败时调用\n\t *                                     > onFailure 函数原型如下：\n\t *                                     onFailure(opts){}\n\t *                                     其中 opts 参数详细如下：\n\t *                                     opts.code   -- 错误码\n\t *                                     opts.reason -- 详细错误信息\n\t * @param {Boolen} isUpdate    -- 是否为刷新型publish\n\t *                                  -- 场景：当前 客户端 publish 状态下断网重连成功，此时可以 isUpdate = true\n\t */\n\tasync publish(onSuccess, onFailure, isUpdate)\n\t{\n\t\tif (typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client publish() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API publish() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API publish() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\t\t\t// \n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : 'User is not online'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO : 未来再考虑进行状态判断\n\t\t/*\n\t\tif (this._publishState !== C_PUBLISH_STATE_IDLE && !isUpdate)\n\t\t{\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : `当前 publish 状态为 ${this._publishState}`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t*/\n\n\t\t// \n\t\tthis._publishState = C_PUBLISH_STATE_ING;\n\n\t\ttry\n\t\t{\n\t\t\t// request 示例如下：\n\t\t\t// {\n\t\t\t//     \"roomId\":\"1\",\n\t\t\t//     \"userId\":\"9876333\",\n\t\t\t//     \"connectId\":\"06cad4ef-afda-4429-9e8a-c7b63b7c6d77\"\n\t\t\t// }\n\t\t\t// \n\t\t\t// send request to server.\n\t\t\tconst publishResp = await this._protooPeer.request(\n\t\t\t\t'publish',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId   : this._userId,\n\t\t\t\t\tisUpdate : !isUpdate ? false : true,\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\t// 收到的 response 的 data 的内容示例如下：\n\t\t\t// {\n\t\t\t//     \"url\":\"rtmp://push.3ttech.cn/sdk/9876333\"\n\t\t\t// }\n\n\t\t\t// TODO : check the 'code' field. -- 200 is success\n\t\t\t// \n\t\t\t// const code = publishResp.code\n\n\t\t\tconst cid = this._connectId; // TEMP publishResp.connectId;\n\t\t\tconst url = publishResp.url;\n\n\t\t\t// TODO : 未来考虑 isURL 对 url 进行合法判断\n\t\t\tif (cid !== this._connectId/* || !isURL(url)*/)\n\t\t\t{\n\t\t\t\tthis._logger.debug(`Client API publish() failed. Response data invalid: ${cid} ${this._connectId} ${url}`);\n\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 400,\n\t\t\t\t\treason : `Response data invalid: ${cid} ${this._connectId} ${url}`\n\t\t\t\t});\n\n\t\t\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._publishState = C_PUBLISH_STATE_ON;\n\n\t\t\t\tthis._logger.debug('Client API publish() success. publishResp: ', publishResp);\n\n\t\t\t\tonSuccess({\n\t\t\t\t\tconnectId : cid,\n\t\t\t\t\turl       : url\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API publish() failed. error: ', error);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : error.message\n\t\t\t});\n\n\t\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\tasync unpublish(onSuccess, onFailure)\n\t{\n\t\tif (typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client unpublish() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tif (this._publishState !== C_PUBLISH_STATE_ON)\n\t\t{\n\t\t\t//\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : `当前 publish 状态为 ${this._publishState}`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tthis._publishState = C_PUBLISH_STATE_IDLE;\n\n\t\tonSuccess();\n\n\t\t// to server\n\t\t// \n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API unpublish() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\ttry\n\t\t{\n\t\t\tawait this._protooPeer.request(\n\t\t\t\t'unpublish',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId   : this._userId,\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\tthis._logger.debug('Client API unpublish() success.');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API unpublish() failed. error: ', error);\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * 用户订阅指定用户流\n\t * \n\t * @param {String} userId      -- 媒体流源用户ID\n\t * @param {Function} onSuccess -- 成功时调用\n\t *                                     > onSuccess 函数原型如下：\n\t *                                     onSuccess(opts){}\n\t *                                     其中 opts 参数详细如下：\n\t *                                     opts.userId    -- 该用户的 userId\n\t *                                     opts.connectId -- 该用户对应的 connectId\n\t *                                     opts.url       -- 该用户的 rtmp push url\n\t *                                     opts.rotation  -- 视频旋转角度\n\t * @param {Function} onFailure -- 失败时调用\n\t *                                     > onFailure 函数原型如下：\n\t *                                     onFailure(opts){}\n\t *                                     其中 opts 参数详细如下：\n\t *                                     opts.code   -- 错误码\n\t *                                     opts.reason -- 详细错误信息\n\t * @param {Boolen} isUpdate    -- 是否为刷新型 subscribe\n\t *                                  -- 场景：当前 客户端 subscribe 状态下断网重连成功，此时可以 isUpdate = true\t */\n\tasync subscribe(userId, onSuccess, onFailure, isUpdate)\n\t{\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client subscribe() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API subscribe() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API subscribe() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : 'User is not online'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\t// \n\t\t\t// send request to server.\n\t\t\tconst subscribeResp = await this._protooPeer.request(\n\t\t\t\t'subscribe',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId,\n\t\t\t\t\tisUpdate : !isUpdate ? false : true,\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\tconst uid = subscribeResp.userId;\n\t\t\tconst cid = subscribeResp.connectId;\n\t\t\tconst url = subscribeResp.url;\n\n\t\t\t// \n\t\t\t// local store\n\t\t\tthis.onSubscribe(uid, url);\n\n\t\t\tthis._logger.debug(`Client API subscribe() success. subscribeResp: ${subscribeResp} uid: ${uid} cid: ${cid} url: ${url}`);\n\n\t\t\t/*\n\t\t\t// TODO : 未来考虑 isURL 对 url 进行合法判断\n\t\t\tif (!isURL(url))\n\t\t\t{\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 400,\n\t\t\t\t\treason : `Response data invalid: ${url}`\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse \n\t\t\t*/\n\t\t\tonSuccess({\n\t\t\t\tuserId    : uid,\n\t\t\t\tconnectId : cid,\n\t\t\t\turl       : url,\n\t\t\t\trotation  : 0\n\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API subscribe() failed. error: ', error);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : error.message\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * 用户订阅指定用户流\n\t * \n\t * @param {String} userId      -- 媒体流源用户ID\n\t * @param {Function} onSuccess -- 成功时调用\n\t *                                     > onSuccess 函数原型如下：\n\t *                                     onSuccess(){} -- 无参数\n\t * @param {Function} onFailure -- 失败时调用\n\t *                                     > onFailure 函数原型如下：\n\t *                                     onFailure(){} -- 无参数\n\t */\n\tasync unsubscribe(userId, onSuccess, onFailure)\n\t{\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client unsubscribe() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API unsubscribe() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\t// update local store\n\t\tthis.onUnsubscribe(userId);\n\n\t\tonSuccess();\n\n\t\t// to server\n\t\t// \n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API unsubscribe() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tawait this._protooPeer.request(\n\t\t\t\t'unsubscribe',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId   : userId,\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\tthis._logger.debug('Client API unsubscribe() success.');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API unsubscribe() failed. error: ', error);\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// TODO : mute 为本地不再播放指定的远端流 --- 可以采用设置 live-player 标签的方式来处理\n\t/**\n\t * 停止接收指定用户的流\n\t * @param {String} userId   -- 停止接收该用户的流\n\t */\n\tasync mute(userId, onSuccess, onFailure)\n\t{\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client mute() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API mute() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tif (!this.isSubscribe(parseInt(userId)))\n\t\t{\n\t\t\tthis._logger.warn(`Client API mute() I havent subscribe ${userId}`);\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\t// update local store\n\t\t// this.onUnsubscribe(userId);\n\n\t\tonSuccess();\n\n\t\t// to server\n\t\t// \n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API mute() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tawait this._protooPeer.request(\n\t\t\t\t'unsubscribe',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId   : userId,\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\tthis._logger.debug('Client API mute() success.');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API mute() failed. error: ', error);\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\tasync unmute(userId, onSuccess, onFailure)\n\t{\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client unmute() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API unmute() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\t// \n\t\tif (!this.isSubscribe(parseInt(userId)))\n\t\t{\n\t\t\tthis._logger.warn(`Client API unmute() I havent subscribe ${userId}`);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API unmute() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : 'User is not online'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\t// \n\t\t\t// send request to server.\n\t\t\tconst subscribeResp = await this._protooPeer.request(\n\t\t\t\t'subscribe',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId,\n\t\t\t\t\tisUpdate : true,\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\tthis._logger.debug('Client API unmute() success.');\n\n\t\t\tonSuccess();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API unmute() failed. error: ', error);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : error.message\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n     * set sei\n     * @param {String} userId      -- 被操作的 userId\n     * @param {Int} opType         -- 1 : add; 0 : remove\n     * @param {Any} sei            -- video layout，有上层定义，需要符合我们的 SEI 格式\n\t * @param {Function} onSuccess -- 成功时调用\n\t *                                     > onSuccess 函数原型如下：\n\t *                                     onSuccess(){} -- 无参数\n\t * @param {Function} onFailure -- 失败时调用\n\t *                                     > onFailure 函数原型如下：\n\t *                                     onFailure(){} -- 无参数\n     */\n\tasync setSEI(userId, opType, sei, onSuccess, onFailure)\n\t{\n\t\tif (!userId || !sei || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client setSEI() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API setSEI() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// \n\n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API setSEI() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : 'User is not online'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._role !== UR_CHAIRMAN)\n\t\t{\n\t\t\tthis._logger.error('Client API setSEI() failed. You are not master in the room');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 403,\n\t\t\t\treason : 'Not Master. Forbidden.'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst mixerUser = {\n\t\t\troomId : this._roomId,\n\t\t\tuserId : `${userId}`,\n\t\t\tdevId  : `${userId}` // 目前对于小程序而言，以 userId 作为 devId\n\t\t};\n\n\t\tPromise.resolve()\n\t\t\t.then(async () =>\n\t\t\t{\n\t\t\t\t/* TEMP\n\t\t\t\tlet opCode = '';\n\n\t\t\t\tif (opType === 1)\n\t\t\t\t{\n\t\t\t\t\t// add \n\t\t\t\t\tthis._logger.debug('add-mixer-user', mixerUser);\n\t\t\t\t\topCode = 'add-mixer-user';\n\t\t\t\t}\n\t\t\t\telse if (opType === 0)\n\t\t\t\t{\n\t\t\t\t\t// remove\n\t\t\t\t\tthis._logger.debug('del-mixer-user', mixerUser);\n\t\t\t\t\topCode = 'del-mixer-user';\n\t\t\t\t}\n\n\t\t\t\t// \n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tawait this._protooPeer.request(opCode, mixerUser);\n\t\t\t\t}\n\t\t\t\tcatch (error)\n\t\t\t\t{\n\t\t\t\t\tthis._logger.error('Client API setSEI() request [', opCode, '] failed. error: ', error);\n\n\t\t\t\t\tPromise.reject(error);\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t})\n\t\t\t.then(async () =>\n\t\t\t{\n\t\t\t\tthis._logger.debug('set-sei', sei);\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tawait this._protooPeer.request(\n\t\t\t\t\t\t'set-sei',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\t\t\tuserId   : `${userId}`,\t\t\t\t\n\t\t\t\t\t\t\tsei      : sei,\n\t\t\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t\t\t});\n\t\t\t\t\t// \n\n\t\t\t\t\tonSuccess();\n\t\t\t\t}\n\t\t\t\tcatch (error)\n\t\t\t\t{\n\t\t\t\t\tthis._logger.error('Client API setSEI() request [set-sei] failed. error: ', error);\n\n\t\t\t\t\tPromise.reject(error);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) =>\n\t\t\t{\n\t\t\t\tthis._logger.error(`Client API setSEI() failed. error: ${JSON.stringify(error)}`);\n\n\t\t\t\tonFailure({\n\t\t\t\t\tcode   : 1009,\n\t\t\t\t\treason : 'setSEI failed'\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t/**\n     * kickout peer.\n     * @param {string} peerName \n     */\n\tasync kickout(userId, onSuccess, onFailure)\n\t{\n\t\tif (!userId || typeof onSuccess !== 'function' || typeof onFailure !== 'function')\n\t\t{\n\t\t\tthis._logger.error('Client kickout() error. invalid parameters');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('Client API kickout() system suspend!!!');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 400,\n\t\t\t\treason : 'system suspend'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tif (this._role !== UR_CHAIRMAN)\n\t\t{\n\t\t\tthis._logger.warn('Client API kickout() failed. Not Master, forbidden.');\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 403,\n\t\t\t\treason : 'Not Master. Forbidden.'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// to server\n\t\t// \n\t\tif (this._joinState !== C_JOIN_STATE_ON)\n\t\t{\n\t\t\tthis._logger.warn(`Client API kickout() failed. this._joinState(${this._joinState}) !== C_JOIN_STATE_ON`);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 1009,\n\t\t\t\treason : 'User is not online'\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\ttry\n\t\t{\n\t\t\tawait this._protooPeer.request(\n\t\t\t\t'kickout',\n\t\t\t\t{\n\t\t\t\t\troomId   : this._roomId,\n\t\t\t\t\tuserId   : userId,\n\t\t\t\t\treason   : 'Master kickout',\n\t\t\t\t\tlogClues : this._logClues\n\t\t\t\t});\n\n\t\t\tonSuccess();\n\n\t\t\tthis._logger.warn('Client API kickout() success.');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error('Client API kickout() failed. error: ', error);\n\n\t\t\tonFailure({\n\t\t\t\tcode   : 500,\n\t\t\t\treason : error.message\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// 内部私有函数 -- 是否已订阅指定用户(userId)\n\t/**\n\t * @param {Number} userId\n\t */\n\tisSubscribe(userId)\n\t{\n\t\tif (Boolean(this._subscribes))\n\t\t{\n\t\t\treturn this._subscribes.has(userId);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// 内部私有函数 -- 用户(userId)已订阅，url\n\tonSubscribe(userId, url)\n\t{\n\t\tif (Boolean(this._subscribes))\n\t\t{\n\t\t\tthis._subscribes.set(userId, url);\n\t\t}\n\t}\n\n\t// 内部私有函数 -- 用户(userId)已取消订阅\n\tonUnsubscribe(userId)\n\t{\n\t\tif (Boolean(this._subscribes))\n\t\t{\n\t\t\tthis._subscribes.delete(userId);\n\t\t}\n\t}\n\n\t// 内部私有函数 -- 用户已进入房间\n\tonUserEnter(userdata)\n\t{\n\t\tif (Boolean(this._mapUsers))\n\t\t{\n\t\t\tthis._mapUsers.set(userdata.userId, userdata);\n\t\t}\n\n\t\t//\n\t\ttry\n\t\t{\n\t\t\t// 向上层调用者通知：disconnected\n\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('user-online'))\n\t\t\t{\n\t\t\t\tthis._eventObserver.get('user-online')(userdata);\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tthis._logger.warn(`Client onUserEnter -- notify [user-online] EXCEPTION -- ${JSON.stringify(e)}`);\n\t\t}\n\n\t}\n\n\t// 内部私有函数 -- 用户(uerId)已离开房间\n\tonUserLeave(userId)\n\t{\n\t\tif (Boolean(this._mapUsers))\n\t\t{\n\t\t\tthis._mapUsers.delete(userId);\n\t\t}\n\t\t\n\t\t//\n\t\ttry\n\t\t{\n\t\t\t// 向上层调用者通知：disconnected\n\t\t\tif (Boolean(this._eventObserver) && this._eventObserver.has('user-offline'))\n\t\t\t{\n\t\t\t\tthis._eventObserver.get('user-offline')(userId);\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tthis._logger.warn(`Client onUserLeave -- notify [user-offline] EXCEPTION -- ${JSON.stringify(e)}`);\n\t\t}\n\t}\n};\n\nexport {\n\tClient,\n\tTTTLog\n};\n","module.exports = {\n\tlogserverUrl   : 'https://log4websdk.3ttech.cn/webSdk/putInfo',\n\tlogserverUrl2  : 'https://api3tclass.3ttech.cn/edu/exception',\n\t// The authorization server address. server support JSONP callback.\n\tauthUrl        : 'https://apiusercenter.3ttech.cn/authority.php',\n\tminiauHost     : 'wss://stech.3ttech.cn/miniappau',\n\tipLocationTest : 'wss://stech.3ttech.cn/iplocmini/', // 'wss://websdkv2a.3ttech.cn/iplocmini/' // \n\tipLocation     : 'wss://shenzhen1.3ttech.cn/iplocmini/'\n};\n","import { version } from '../package.json';\nimport { Client, TTTLog } from './3t-miniapp.js';\n\nfunction getVersion()\n{\n\treturn version;\n}\n\nexport {\n\tgetVersion,\n\tClient,\n\tTTTLog\n};\n","const Logger = require('../utils/Logger.js');\n\nconst logger = new Logger('Message');\n\nclass Message\n{\n\tstatic parse(raw)\n\t{\n\t\tlet object;\n\t\tconst message = {};\n\n\t\ttry\n\t\t{\n\t\t\tobject = JSON.parse(raw);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('parse() raw: ', raw, ' | invalid JSON: ', error);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof object !== 'object' || Array.isArray(object))\n\t\t{\n\t\t\tlogger.error('parse() raw: ', raw, ' | not an object');\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Request.\n\t\tif (object.request)\n\t\t{\n\t\t\tmessage.request = true;\n\n\t\t\tif (typeof object.method !== 'string')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid method field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof object.id !== 'number')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid id field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmessage.id = object.id;\n\t\t\tmessage.method = object.method;\n\t\t\tmessage.data = object.data || {};\n\t\t}\n\t\t// Response.\n\t\telse if (object.response)\n\t\t{\n\t\t\tmessage.response = true;\n\n\t\t\tif (typeof object.id !== 'number')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid id field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmessage.id = object.id;\n\n\t\t\t// Success.\n\t\t\tif (object.ok)\n\t\t\t{\n\t\t\t\tmessage.ok = true;\n\t\t\t\tmessage.data = object.data || {};\n\t\t\t}\n\t\t\t// Error.\n\t\t\telse\n\t\t\t{\n\t\t\t\tmessage.ok = false;\n\t\t\t\tmessage.errorCode = object.errorCode;\n\t\t\t\tmessage.errorReason = object.errorReason;\n\t\t\t}\n\t\t}\n\t\t// Notification.\n\t\telse if (object.notification)\n\t\t{\n\t\t\tmessage.notification = true;\n\n\t\t\tif (typeof object.method !== 'string')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid method field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmessage.method = object.method;\n\t\t\tmessage.data = object.data || {};\n\t\t}\n\t\t// Invalid.\n\t\telse\n\t\t{\n\t\t\tlogger.error('parse() | missing request/response field');\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn message;\n\t}\n\n\tstatic randomNum()\n\t{\n\t\treturn Math.round(Math.random() * 10000000);\n\t}\n\n\tstatic createRequest(method, data)\n\t{\n\t\tconst request =\n\t\t{\n\t\t\trequest : true,\n\t\t\tid      : Message.randomNum(), // generateRandomNumber(),\n\t\t\tmethod  : method,\n\t\t\tdata    : data || {}\n\t\t};\n\n\t\treturn request;\n\t}\n\n\tstatic createSuccessResponse(request, data)\n\t{\n\t\tconst response =\n\t\t{\n\t\t\tresponse : true,\n\t\t\tid       : request.id,\n\t\t\tok       : true,\n\t\t\tdata     : data || {}\n\t\t};\n\n\t\treturn response;\n\t}\n\n\tstatic createErrorResponse(request, errorCode, errorReason)\n\t{\n\t\tconst response =\n\t\t{\n\t\t\tresponse    : true,\n\t\t\tid          : request.id,\n\t\t\tok          : false,\n\t\t\terrorCode   : errorCode,\n\t\t\terrorReason : errorReason\n\t\t};\n\n\t\treturn response;\n\t}\n\n\tstatic createNotification(method, data)\n\t{\n\t\tconst notification =\n\t\t{\n\t\t\tnotification : true,\n\t\t\tmethod       : method,\n\t\t\tdata         : data || {}\n\t\t};\n\n\t\treturn notification;\n\t}\n}\n\nmodule.exports = Message;\n","const Logger = require('../utils/Logger.js');\nconst EnhancedEventEmitter = require('../utils/EnhancedEventEmitter.js');\nconst Message = require('./Message.js');\nconst WebSocketTransport = require('./transports/WebSocketTransport.js');\n\nimport regeneratorRuntime from '../thirdparty/runtime.js';\nimport { stringify } from 'querystring';\n\nclass Peer extends EnhancedEventEmitter\n{\n\t/**\n\t * @param {String} protooUrl -- url\n\t * @param {String} logClues -- 日志追踪用\n\t *\n\t * @emits open\n\t * @emits {currentAttempt: Number} failed\n\t * @emits disconnected\n\t * @emits close\n\t * @emits {request: protoo.Request, accept: Function, reject: Function} request\n\t * @emits {notification: protoo.Notification} notification\n\t */\n\tconstructor(protooUrl, logClues, logger)\n\t{\n\t\tsuper(logger);\n\n\t\t// \n\t\tthis._logger = logger || new Logger('Peer');\n\t\tthis._logger.prefix = '-';\n\n\t\t// 日志追踪用\n\t\tthis._logClues = logClues;\n\n\t\t// Closed flag.\n\t\t// @type {Boolean}\n\t\tthis._closed = false;\n\n\t\t// Transport.\n\t\t// @type {protoo.Transport}\n\t\tthis._transport = null;\n\n\t\t// Connected flag.\n\t\t// @type {Boolean}\n\t\tthis._connected = false;\n\n\t\t// Custom data object.\n\t\t// @type {Object}\n\t\tthis._data = {};\n\n\t\t// Map of pending sent request objects indexed by request id.\n\t\t// @type {Map<Number, Object>}\n\t\tthis._sents = new Map();\n\n\t\t// \n\t\tthis._protooUrl = protooUrl;\n\t}\n\n\tinit()\n\t{\n\t\tthis._transport = new WebSocketTransport(\n\t\t\tthis._protooUrl,\n\t\t\tthis._logClues,\n\t\t\tthis._logger,\n\t\t\tnull);\n\n\t\tthis._transport.init();\n\n\t\t// ws 已连接\n\t\tthis._transport.on('open', (event) =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tconst {\n\t\t\t\tisRetry\n\t\t\t} = event;\n\t\t\t\n\t\t\tthis._connected = true;\n\n\t\t\tthis.safeEmit('open', {\n\t\t\t\tisRetry\n\t\t\t});\n\t\t});\n\n\t\t// 下层正在尝试重连\n\t\tthis._transport.on('auto-reconnecting', () =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tthis._connected = false;\n\n\t\t\tthis.safeEmit('auto-reconnecting');\n\t\t});\n\n\t\t// ws 连接已失败/断开 -- 得到该事件，表明N次重连彻底失败了\n\t\tthis._transport.on('failed', () =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\t// 无需在此执行 closeTransport -- 在 WebsocketTransport 内部，触发 failed 时，已经执行了close\n\t\t\t// this.closeTransport();\n\t\t\tthis._connected = false;\n\n\t\t\tthis.safeEmit('failed');\n\t\t});\n\n\t\t// ws 连接已断开 -- 且内部不再执行自动重连\n\t\tthis._transport.on('close', (e) =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\t// 无需在此执行 closeTransport -- 在 WebsocketTransport 内部，触发 failed 时，已经执行了close\n\t\t\t// this.closeTransport();\n\t\t\tthis._connected = false;\n\n\t\t\tthis.safeEmit('close', e);\n\t\t});\n\n\t\t// 参数 message 为 Object 类型 -- 已 JSON.parse(raw) 处理\n\t\tthis._transport.on('message', (event) =>\n\t\t{\n\t\t\tconst {\n\t\t\t\tmessage\n\t\t\t} = event;\n\n\t\t\tif (message.request)\n\t\t\t{\n\t\t\t\tthis._handleRequest(message);\n\t\t\t}\n\t\t\telse if (message.response)\n\t\t\t{\n\t\t\t\tthis._handleResponse(message);\n\t\t\t}\n\t\t\telse if (message.notification)\n\t\t\t{\n\t\t\t\tthis._handleNotification(message);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Whether the Peer is closed.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget closed()\n\t{\n\t\treturn this._closed;\n\t}\n\n\t/**\n\t * Whether the Peer is connected.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget connected()\n\t{\n\t\treturn this._connected;\n\t}\n\n\t/**\n\t * App custom data.\n\t *\n\t * @returns {Object}\n\t */\n\tget data()\n\t{\n\t\treturn this._data;\n\t}\n\n\t/**\n\t * Invalid setter.\n\t */\n\tset data(data) // eslint-disable-line no-unused-vars\n\t{\n\t\tthrow new Error('cannot override data object');\n\t}\n\n\t// 内部函数\n\tcloseTransport(e)\n\t{\n\t\tthis._connected = false;\n\n\t\t// Close Transport.\n\t\tthis._transport.close(e);\n\n\t\t// Close every pending sent.\n\t\tfor (const sent of this._sents.values())\n\t\t{\n\t\t\tsent.close();\n\t\t}\n\t}\n\n\t/**\n\t * Close this Peer and its Transport.\n\t */\n\tclose()\n\t{\n\t\tthis._logger.debug('Peer API close() OK');\n\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tthis._closed = true;\n\n\t\tthis.closeTransport({\n\t\t\tcode   : 1000,\n\t\t\treason : 'client close connection normally.'\n\t\t});\n\t}\n\n\t// 恢复所有行为\n\tresumeProcess()\n\t{\n\t\tif (Boolean(this._transport))\n\t\t{\n\t\t\tthis._transport.resumeProcess();\n\t\t}\n\t}\n\n\t// 挂起所有行为\n\tsuspendProcess()\n\t{\n\t\tif (Boolean(this._transport))\n\t\t{\n\t\t\tthis._transport.suspendProcess();\n\t\t}\n\t}\n\n\t// 重连请求\n\treconnect(e)\n\t{\n\t\tif (Boolean(this._transport))\n\t\t{\n\t\t\tthis._transport.reconnect(e);\n\t\t}\n\t}\n\n\t/**\n\t * Send a protoo request to the server-side Room.\n\t *\n\t * @param {String} method\n\t * @param {Object} [data]\n\t *\n\t * @async\n\t * @returns {Object} The response data Object if a success response is received.\n\t */\n\tasync request(method, data = undefined)\n\t{\n\t\tconst request = Message.createRequest(method, data);\n\n\t\tthis._logger.debug(`Peer API request() [method: ${method} request.id: ${request.id}]`);\n\n\t\t// This may throw.\n\t\tthis._transport.send(request);\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst timeout = 1500 * (15 + (0.1 * this._sents.size));\n\t\t\tconst sent =\n\t\t\t{\n\t\t\t\tid      : request.id,\n\t\t\t\tmethod  : request.method,\n\t\t\t\tresolve : (data2) =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug(`Peer API request() request[method: ${method} request.id: ${request.id}] <RESOLVE>`);\n\n\t\t\t\t\tif (!this._sents.delete(request.id))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\t\n\t\t\t\t\tresolve(data2);\n\t\t\t\t},\n\t\t\t\treject : (error) =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug(`Peer API request() request[method: ${method} request.id: ${request.id}] <REJECT>`);\n\n\t\t\t\t\tif (!this._sents.delete(request.id))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\treject(error);\n\t\t\t\t},\n\t\t\t\ttimer : setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug(`Peer API request() request[method: ${method} request.id: ${request.id}] <TIMEOUT>`);\n\n\t\t\t\t\tif (!this._sents.delete(request.id))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\treject(new Error('Request Timeout.'));\n\t\t\t\t}, timeout),\n\t\t\t\tclose : () =>\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\treject(new Error('Peer Closed'));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Add sent stuff to the map.\n\t\t\tthis._sents.set(request.id, sent);\n\t\t});\n\t}\n\n\t/**\n\t * Send a protoo notification to the server-side Room.\n\t *\n\t * @param {String} method\n\t * @param {Object} [data]\n\t *\n\t * @async\n\t */\n\tasync notify(method, data = undefined)\n\t{\n\t\tconst notification = Message.createNotification(method, data);\n\n\t\tthis._logger.debug(`Peer API notify() [method: ${method}]`);\n\n\t\t// This may throw.\n\t\tthis._transport.send(notification);\n\t}\n\n\t_handleRequest(request)\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.emit('request',\n\t\t\t\t// Request.\n\t\t\t\trequest,\n\t\t\t\t// accept() function.\n\t\t\t\t(data) =>\n\t\t\t\t{\n\t\t\t\t\tconst response = Message.createSuccessResponse(request, data);\n\n\t\t\t\t\tthis._transport.send(response)\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t},\n\t\t\t\t// reject() function.\n\t\t\t\t(errorCode, errorReason) =>\n\t\t\t\t{\n\t\t\t\t\tif (errorCode instanceof Error)\n\t\t\t\t\t{\n\t\t\t\t\t\terrorCode = 500;\n\t\t\t\t\t\terrorReason = String(errorCode);\n\t\t\t\t\t}\n\t\t\t\t\telse if (typeof errorCode === 'number' && errorReason instanceof Error)\n\t\t\t\t\t{\n\t\t\t\t\t\terrorReason = String(errorReason);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst response = Message.createErrorResponse(request, errorCode, errorReason);\n\n\t\t\t\t\tthis._transport.send(response)\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconst response = Message.createErrorResponse(request, 500, String(error));\n\n\t\t\tthis._transport.send(response)\n\t\t\t\t.catch(() => {});\n\t\t}\n\t}\n\n\t_handleResponse(response)\n\t{\n\t\tconst sent = this._sents.get(response.id);\n\n\t\tif (!sent)\n\t\t{\n\t\t\tthis._logger.error(\n\t\t\t\t`Peer _handleResponse() response [id: ${response.id}] doesnot match any request`);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.ok)\n\t\t{\n\t\t\tsent.resolve(response.data);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst error = new Error(response.errorReason);\n\n\t\t\terror.code = response.errorCode;\n\t\t\tsent.reject(error);\n\t\t}\n\t}\n\n\t_handleNotification(notification)\n\t{\n\t\tthis.safeEmit('notification', notification);\n\t}\n}\n\nmodule.exports = Peer;\n","const Peer = require('./Peer.js');\nconst WebSocketTransport = require('./transports/WebSocketTransport.js');\n\n/**\n * Expose mediasoup-client version.\n *\n * @type {String}\n */\n// exports.version = version;\n\n/**\n * Expose Peer class.\n *\n * @type {Class}\n */\nexports.Peer = Peer;\n\n/**\n * Expose WebSocketTransport class.\n *\n * @type {Class}\n */\nexports.WebSocketTransport = WebSocketTransport;\n","const WxWebSocket = require('../../utils/WxWebSocket.js');\nconst retry = require('../../retry/retry.js');\nconst Logger = require('../../utils/Logger.js');\nconst EnhancedEventEmitter = require('../../utils/EnhancedEventEmitter.js');\nconst Message = require('../Message.js');\n\nimport regeneratorRuntime from '../../thirdparty/runtime.js';\n\n//\nconst WST_FULL_TIMEOUT = 45000; // 45s\n\n// 最大重试次数\nconst MAX_RETRY = 4;\n\n// 状态\n// {\nconst WST_STATE_IDLE = 0; // 初始/关闭状态\nconst WST_STATE_TRYING = 1; // 启动中\nconst WST_STATE_ACT = 2; // 已连接/正常启动\nconst WST_STATE_RETRYING = 3; // 重试中\nconst WST_STATE_FINAL_FAIL = 4; // 最终失败\n// }\n\n// const WS_SUBPROTOCOL = 'protoo';\n\n// 定义 连接失败/断网 的相关retry参数\nconst DEFAULT_RETRY_OPTIONS =\n{\n\tretries    : MAX_RETRY, // 连续重试次数\n\tfactor     : 2, // 递增超时放大倍数\n\tminTimeout : 1 * 1000, // \n\tmaxTimeout : 4 * 1000\n};\n\nclass WebSocketTransport extends EnhancedEventEmitter\n{\n\t/**\n\t * @param {String} url       -- WebSocket URL.\n\t * @param {String} logClues  -- 日志追踪\n\t * @param {Object} [options] -- Options for WebSocket-Node.W3CWebSocket and retry.\n\t */\n\tconstructor(url, logClues, logger, options)\n\t{\n\t\tsuper(logger);\n\n\t\t// \n\t\tthis._logger = logger || new Logger('WebSocketTransport');\n\t\tthis._logger.prefix ='-';\n\n\t\t// 日志追踪用\n\t\tthis._logClues = logClues;\n\n\t\t// 用来标识是否调用了 close ?\n\t\tthis._stopping = false;\n\n\t\t// 初始链接 的 超时定时器\n\t\tthis.wstTimer = null;\n\n\t\t// 状态\n\t\tthis._wstState = WST_STATE_IDLE;\n\n\t\t// WebSocket URL.\n\t\t// @type {String}\n\t\t// 在 url 后面追加 '日志追踪标识'\n\t\tthis._url = `${url}&logClues=${this._logClues}`;\n\n\t\t// Options.\n\t\t// @type {Object}\n\t\tthis._options = options || {};\n\n\t\t// WebSocket instance.\n\t\t// @type {WebSocket}\n\t\tthis._ws = null;\n\n\t\tthis._operation = null;\n\t\t\n\t\t// 当前是否 挂起/暂停 所有操作\n\t\tthis._suspend = false;\n\n\t\t// \n\t\tthis._randomId = 0;\n\t}\n\n\tinit()\n\t{\n\t\tif (this._wstState !== WST_STATE_IDLE)\n\t\t{\n\t\t\tthis._logger.error(`WebSocketTransport init() -- error: this._wstState(${this._wstState}) !== WST_STATE_IDLE. return`);\n\n\t\t\treturn;\n\t\t}\n\t\ttry\n\t\t{\n\t\t\t// \n\t\t\tthis._stopping = false;\n\n\t\t\tthis._wstState = WST_STATE_TRYING;\n\t\t\t\n\t\t\tthis.startTransport({\n\t\t\t\treason : 'init -- startTransport'\n\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error(`WebSocketTransport init() EXCEPTION!!! -- error: ${JSON.stringify(error)}`);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tget closed()\n\t{\n\t\treturn (this._wstState === WST_STATE_IDLE || this._wstState === WST_STATE_FINAL_FAIL);\n\t}\n\n\tclose(e)\n\t{\n\t\tlet code = 1000;\n\t\tlet reason = 'close -- client close connection normally';\n\n\t\tif (Boolean(e))\n\t\t{\n\t\t\tcode = e.code;\n\t\t\treason = e.reason;\n\t\t}\n\n\t\tthis._logger.debug(`WebSocketTransport close() -- this._randomId: ${this._randomId}`);\n\n\t\tif (this.closed)\n\t\t\treturn;\n\n\t\t// \n\t\tthis._stopping = true;\n\n\t\t// Don't wait for the WebSocket 'close' event, do it now.\n\n\t\tthis.closeTransport({\n\t\t\tcode,\n\t\t\treason\n\t\t});\n\n\t\t// \n\t\tthis._operation.stop();\n\t\t// \n\t\tthis._wstState = WST_STATE_IDLE;\n\t}\n\n\t// 恢复所有行为\n\tresumeProcess()\n\t{\n\t\tthis._suspend = false;\n\t}\n\n\t// 挂起所有行为\n\tsuspendProcess()\n\t{\n\t\tthis._suspend = true;\n\t}\n\n\t// \n\tstartTransport(e)\n\t{\n\t\t// \n\t\t/*\n\t\tif (this._suspend)\n\t\t{\n\t\t\tthis._logger.debug('WebSocketTransport startTransport() system suspend!!!');\n\n\t\t\treturn;\n\t\t}\n\t\t*/\n\n\t\tthis._logger.debug('WebSocketTransport startTransport()');\n\n\t\t// \n\t\tconst wstProc = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tthis._logger.error('WebSocketTransport startTransport() start WebSocket...');\n\n\t\t\tthis._operation = retry.operation(this._options.retry || DEFAULT_RETRY_OPTIONS);\n\t\n\t\t\tif (!this._operation)\n\t\t\t{\n\t\t\t\tthis._logger.error('WebSocketTransport startTransport() Internal error.');\n\t\n\t\t\t\treject('Internal error');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tthis.attemptConnect(e);\n\t\t\t}\n\t\t});\n\n\t\tconst wstTimerPromise = new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst wsTransport = this;\n\n\t\t\tthis.wstTimer = setTimeout(() =>\n\t\t\t{\n\t\t\t\tif (wsTransport._wstState !== WST_STATE_ACT)\n\t\t\t\t{\n\t\t\t\t\twsTransport._logger.debug(`WebSocketTransport wstTimerPromise TIMEOUT -- wsTransport._wstState(${wsTransport._wstState}) !== WST_STATE_ACT. reject(WebSocketTransport init timeout)`);\n\n\t\t\t\t\treject({\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'WebSocketTransport init timeout'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twsTransport._logger.debug('WebSocketTransport wstTimerPromise TIMEOUT -- ignore');\n\t\t\t\t}\n\t\t\t}, WST_FULL_TIMEOUT);\n\t\t});\n\n\t\tPromise.race([ wstProc, wstTimerPromise ])\n\t\t\t.then((result) =>\n\t\t\t{\n\t\t\t})\n\t\t\t.catch((event) =>\n\t\t\t{\n\t\t\t\t// 如果当前已 进入 ACT，则直接 return\n\t\t\t\tif (this._wstState === WST_STATE_ACT)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// {\n\t\t\t\t\tthis.closeTransport({\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'WebSocketTransport FINAL FAILED'\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._operation.stop();\n\t\t\t\t\t// \n\t\t\t\t\tthis._wstState = WST_STATE_FINAL_FAIL;\n\t\t\t\t\t// }\n\n\t\t\t\t\tthis._logger.debug('WebSocketTransport startTransport() -- emit [failed] WebSocketTransport FINAL FAILED');\n\t\t\t\t\t// \n\t\t\t\t\tthis.safeEmit('failed', {\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'WebSocketTransport FINAL FAILED'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t// \n\t}\n\n\t// 内部函数\n\tcloseTransport(opts)\n\t{\n\t\tlet code = 1000;\n\t\tlet reason = 'close connection';\n\n\t\tif (Boolean(opts))\n\t\t{\n\t\t\tcode = opts.code;\n\t\t\treason = opts.reason;\n\t\t}\n\n\t\tif (Boolean(this._ws))\n\t\t{\n\t\t\tthis._logger.debug(`WebSocketTransport closeTransport() -- code: ${code} reason: ${reason}`);\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis._ws.close({\n\t\t\t\t\tcode,\n\t\t\t\t\treason\n\t\t\t\t});\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tthis._logger.error(`WebSocketTransport closeTransport() -- _ws.close EXCEPTION: ${error.message}`);\n\t\t\t}\n\t\t}\n\t}\n\n\t// \n\treconnect(e)\n\t{\n\t\tthis._logger.debug('WebSocketTransport reconnect() -- will reconnect...');\n\t\t// \n\t\tthis._operation.stop();\n\t\t// \n\t\tthis._wstState = WST_STATE_RETRYING; // 设定为：当前正在重试\n\n\t\t// 通知上层：当前正在尝试自动重连\n\t\tthis.safeEmit('auto-reconnecting');\n\n\t\tthis.startTransport(e);\n\t}\n\n\tasync send(message)\n\t{\n\t\tif (this._wstState !== WST_STATE_ACT)\n\t\t{\n\t\t\tthis._logger.warn('WebSocketTransport send() -- error: transport no-connection');\n\t\t\tthrow new Error('transport no-connection');\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tconst msg = JSON.stringify(message);\n\n\t\t\tthis._logger.warn(`WebSocketTransport send() <<<<<< ${msg}`);\n\n\t\t\tif (Boolean(this._ws))\n\t\t\t{\n\t\t\t\tthis._ws.send({ msg });\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.warn(`WebSocketTransport send() -- EXCEPTION: ${error.message}`);\n\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t// 网络状况发生变化时，回调函数\n\t// \n\tonWsOpen()\n\t{\n\t\tif (Boolean(this._operation))\n\t\t{\n\t\t\tthis._operation.stop();\n\t\t}\n\n\t\t// \n\t\t// 如果在此之前调用了 close 主动关闭，则直接 return\n\t\tif (this._stopping)\n\t\t{\n\t\t\tthis._logger.debug(`WebSocketTransport onWsOpen() -- this._randomId: ${this._randomId} -- this._stopping is ture, return.`);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tif (this.wstState === WST_STATE_FINAL_FAIL)\n\t\t{\n\t\t\tthis._logger.warn('WebSocketTransport onWsOpen() -- This has been WST_STATE_FINAL_FAIL, so return.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._logger.debug(`WebSocketTransport onWsOpen() -- this._randomId: ${this._randomId} -- will emit [open]`);\n\n\t\t// \n\t\tconst isRetry = (this._wstState === WST_STATE_RETRYING);\n\n\t\tthis._wstState = WST_STATE_ACT;\n\n\t\t// \n\t\tif (this.wstTimer !== null)\n\t\t{\n\t\t\tclearTimeout(this.wstTimer);\n\t\t\tthis.wstTimer = null;\n\t\t}\n\n\t\t// Emit 'open' event.\n\t\tthis.safeEmit('open', {\n\t\t\tisRetry\n\t\t});\n\t}\n\t\n\tonWsMessage(data)\n\t{\n\t\tif (this._wstState !== WST_STATE_ACT)\n\t\t{\n\t\t\tthis._logger.debug(`WebSocketTransport onWsMessage() -- message: ${data} -- this._wstState(${this._wstState}) !== WST_STATE_ACT, return.`);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = Message.parse(data);\n\n\t\tif (!message)\n\t\t{\n\t\t\tthis._logger.debug('WebSocketTransport onWsMessage() -- message is null, return');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.listenerCount('message') === 0)\n\t\t{\n\t\t\tthis._logger.error('WebSocketTransport onWsMessage() -- no listeners for event [message], ignoring message');\n\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis._logger.warn(`WebSocketTransport onWsMessage() >>>>>> ${JSON.stringify(message)}`);\n\n\t\t// Emit 'message' event.\n\t\tthis.safeEmit('message', { message });\n\t}\n\t\n\t// 暂不对上报\n\tonWsError(event)\n\t{\n\t\tif (this._wstState === WST_STATE_IDLE)\n\t\t\treturn;\n\n\t\tthis._logger.error(`WebSocketTransport onWsError() -- this._wstState: ${this._wstState} error: ${JSON.stringify(event)}`);\n\t}\n\n\t// 如果当前为非人为主观断开，则会尝试一定次数的重试\n\t// 若需要重试，则在连续重试N次仍未成功连接，则向上层报 \"最终失败\"\n\t// 若无需重试，则直接向上层报 \"close\"\n\tonWsClose(opts)\n\t{\n\t\tconst { event } = opts;\n\n\t\t/*\n\t\twx.setStorage({\n\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\tdata : `WebSocketTransport event[onWsClose] currentAttempt: ${currentAttempt} event: ${JSON.stringify(event)}.`\n\t\t});\n\t\t*/\n\n\t\t// 对于 IDEL、FIANL_FAIL 状态， 忽略 onWsClose 事件\n\t\tif (this._wstState === WST_STATE_IDLE || this._wstState === WST_STATE_FINAL_FAIL)\n\t\t{\n\t\t\tthis._logger.warn(`WebSocketTransport onWsClose -- Invalid _wstState(${this._wstState}), so return.`);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tthis._logger.debug(`WebSocketTransport onWsClose() -- this._wstState: ${this._wstState} ${JSON.stringify(event)}`);\n\n\t\t// Don't retry when in the following cases:\n\t\t// 4000 : closed by server\n\t\t// 4100 : 后替前\n\t\t// _stopping : 上层主动关闭，故不再尝试重连，且通知上层\n\t\tif (event.code === 4000 || event.code === 4100 || this._stopping)\n\t\t{\n\t\t\t// \n\t\t\tthis._logger.debug(`WebSocketTransport onWsClose() -- [event: ${JSON.stringify(event)}]. Normally closed. No more attempt to reconnect!`);\n\n\t\t\t// \n\t\t\tif (Boolean(this._operation))\n\t\t\t{\n\t\t\t\tthis._operation.stop();\n\t\t\t}\n\t\t\t// \n\t\t\t// 在向上层投递 close 事件前，首先回收内部资源/置内部状态 -- 以免上层处理 close 事件时再次调入 close()\n\t\t\t/* 2019.7.18 在此wxwebsocket已断开，此处无需再执行closeTransport\n\t\t\tthis.closeTransport({\n\t\t\t\tcode   : 1000,\n\t\t\t\treason : `onWsClose[event: ${event.code}] -- close connection`\n\t\t\t});\n\t\t\t*/\n\n\t\t\tthis._wstState = WST_STATE_FINAL_FAIL;\n\n\t\t\t// 此种情况下，才直接向上层触发 'close' 事件\n\t\t\t// Emit 'close' event.\n\t\t\tthis.safeEmit('close', {\n\t\t\t\tcode   : event.code,\n\t\t\t\treason : this._stopping ? '_stopping' : `Normally closed -- code: ${JSON.stringify(event)}`\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t\t// 尝试重连\n\t\telse\n\t\t{\n\t\t\t// 通知上层：当前正在尝试自动重连\n\t\t\t// 注：对于初始断开，将由此处执行重连；对于连接过程中的连接超时重试，将由 _operation 的超时定时器自动执行 retry\n\t\t\tthis.safeEmit('auto-reconnecting');\n\n\t\t\t// \n\t\t\tif (this._wstState === WST_STATE_ACT)\n\t\t\t{\n\t\t\t\t// 如果之前为 已连接 状态，则说明这是一次 新断开 事件，需要全新开始 attemptConnect\n\t\t\t\tthis._logger.debug('WebSocketTransport onWsClose() -- this._wstState !== WST_STATE_RETRYING, A new beginning...');\n\n\t\t\t\t// 一次全新的重试的开始，则重置 operation ，重启 attempt\n\t\t\t\tif (Boolean(this._operation))\n\t\t\t\t{\n\t\t\t\t\tthis._operation.reset();\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\tthis._wstState = WST_STATE_RETRYING; // 设定为：当前正在重试\n\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.attemptConnect({\n\t\t\t\t\t\treason : 'onWsClose -- retrying'\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t/*\n\t\telse if (this._wstState === WST_STATE_RETRYING) // 如果之前是 retying 状态，则应继续执行 retry\n\t\t{\n\t\t\tthis.operationRetry(event);\n\t\t}\n\t\t*/\n\t}\n\n\tattemptConnect(e)\n\t{\n\t\tif (!this._operation)\n\t\t{\n\t\t\tthis._logger.error('WebSocketTransport attemptConnect() this._operation is null.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._operation.attempt((currentAttempt) =>\n\t\t{\n\t\t\t// \n\t\t\tif (this._stopping)\n\t\t\t{\n\t\t\t\tif (Boolean(this._operation))\n\t\t\t\t{\n\t\t\t\t\tthis._operation.stop();\n\t\t\t\t}\n\n\t\t\t\tthis.closeTransport({\n\t\t\t\t\tcode   : 1000,\n\t\t\t\t\treason : 'attemptConnect _stopping -- client close connection normally'\n\t\t\t\t});\n\n\t\t\t\tthis._logger.debug('WebSocketTransport attemptConnect() -- _stopping is true, has closeTransport.');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// \n\t\t\tconst commentReason = (!e ? '' : e.reason);\n\n\t\t\t// TODO : ??? \n\t\t\t// closeTransport 这件事还有没有必要做 ???\n\t\t\tthis.closeTransport({\n\t\t\t\tcode   : 3000,\n\t\t\t\treason : `Will retry later -- ${commentReason}`\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis._logger.debug(`WebSocketTransport attemptConnect() -- [currentAttempt: ${currentAttempt}]`);\n\n\t\t\t// \n\t\t\tthis._randomId = Math.round(Math.random() * 10000000);\n\n\t\t\tthis._ws = new WxWebSocket(this._randomId, this._logger);\n\n\t\t\tif (Boolean(this._ws))\n\t\t\t{\n\t\t\t\t// 监听 wx websocket 模块事件\n\t\t\t\tthis._ws.on('open', (event) =>\n\t\t\t\t{\n\t\t\t\t\tif (event.randomId !== this._randomId)\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\t/*\n\t\t\t\t\t\twx.setStorage({\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\t\t\t\t\tdata : `WebSocketTransport _ws event[open] randmId un-match ${event.randomId} ${this._randomId}.`\n\t\t\t\t\t\t});\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[open] randmId un-match ${event.randomId} ${this._randomId}.`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis.onWsOpen();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._ws.on('message', (event) =>\n\t\t\t\t{\n\t\t\t\t\tif (event.randomId !== this._randomId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[message] randmId un-match ${event.randomId} ${this._randomId}.`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onWsMessage(event.data);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._ws.on('error', (event) =>\n\t\t\t\t{\n\t\t\t\t\tif (event.randomId !== this._randomId)\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\t/*\n\t\t\t\t\t\twx.setStorage({\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\t\t\t\t\tdata : `WebSocketTransport _ws event[error] randmId un-match ${event.randomId} ${this._randomId}.`\n\t\t\t\t\t\t});\n\t\t\t\t\t\t*/\n\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[error] randmId un-match ${event.randomId} ${this._randomId}.`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis.onWsError(event);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._ws.on('close', (event) =>\n\t\t\t\t{\n\t\t\t\t\tif (event.randomId !== this._randomId)\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\t/*\n\t\t\t\t\t\twx.setStorage({\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\t\t\t\t\tdata : `WebSocketTransport _ws event[close] randmId un-match ${event.randomId} ${this._randomId}.`\n\t\t\t\t\t\t});\n\t\t\t\t\t\t*/\n\n\t\t\t\t\t\tthis._logger.warn(`WebSocketTransport _ws event[close] randmId un-match ${event.randomId} ${this._randomId}.`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// \n\t\t\t\t\t\tthis.onWsClose({ event });\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// connect server\n\t\t\t\tthis._ws.connect({\n\t\t\t\t\turl     : (this._wstState === WST_STATE_RETRYING ? (`${this._url}&retry=true`) : this._url),\n\t\t\t\t\tsuccess : (res) =>\n\t\t\t\t\t{\n\t\t\t\t\t},\n\t\t\t\t\tfail : (res) =>\n\t\t\t\t\t{\n\t\t\t\t\t\t/*\n\t\t\t\t\t\twx.setStorage({\n\t\t\t\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\t\t\t\t\tdata : 'WebSocketTransport _ws.connect fail.'\n\t\t\t\t\t\t});\n\t\t\t\t\t\t*/\n\t\n\t\t\t\t\t\tthis._logger.error(`_ws.connect failed. [currentAttempt: ${currentAttempt}]`);\n\n\t\t\t\t\t\tthrow new Error('_ws.connect failed');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._logger.error(`WebSocket create failed -- _ws is null. [currentAttempt: ${currentAttempt}]`);\n\n\t\t\t\tthrow new Error('WebSocket create failed -- _ws is null');\n\t\t\t}\n\t\t}, {\n\t\t\ttimeout : 10 * 1000, // 8s 超时\n\t\t\tcb      : (ctr) =>\n\t\t\t{\n\t\t\t\tthis._logger.debug(`attemptConnect() _operation.attempt timeout!! [retry: ${ctr}]. _wstState is ${this._wstState}`);\n\n\t\t\t\tif (this._wstState === WST_STATE_ACT)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (this._wstState === WST_STATE_TRYING || this._wstState === WST_STATE_RETRYING)\n\t\t\t\t{\n\t\t\t\t\tthis._logger.error(`attemptConnect() _operation.attempt timeout(10s). [retry: ${ctr}]. continue to retry...`);\n\t\t\t\t\t// \n\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.operationRetry({\n\t\t\t\t\t\t\tcode : 3100\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\toperationRetry(event)\n\t{\n\t\tif (!this._operation)\n\t\t{\n\t\t\tthis._logger.error('WebSocketTransport operationRetry() -- error: this._operation is null.');\n\n\t\t\treturn;\n\t\t}\n\t\t//\n\n\t\tif (this._operation.retry(true))\n\t\t{\n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\t\tdata : `WebSocketTransport operationRetry() ok. event: ${JSON.stringify(event)}.`\n\t\t\t});\n\t\t\t*/\n\n\t\t\tthis._logger.debug(`WebSocketTransport operationRetry() -- _operation.retrying [retry: ${this._operation._attempts}] [event.code: ${event.code}]`);\n\n\t\t\t// 通知上层：当前正在尝试自动重连\n\t\t\tthis.safeEmit('auto-reconnecting');\n\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t/*\n\t\t\twx.setStorage({\n\t\t\t\tkey  : `WebSocketTransport-${new Date().getTime()}`,\n\t\t\t\tdata : 'WebSocketTransport operationRetry() FINAL FAILED.'\n\t\t\t});\n\t\t\t*/\n\t\t\t\n\t\t\tthis._logger.error(`WebSocketTransport operationRetry() -- _operation.retry end up [retry: ${this._operation_attempts}]. FINAL FAILED`);\n\n\t\t\t// \n\t\t\tthis._operation.stop();\n\t\t\t// \n\t\t\tthis._wstState = WST_STATE_FINAL_FAIL;\n\t\t\t// 当尝试完所有重试，仍未 ok，则向上层触发 failed，携带 event:{code: 500}\n\t\t\tthis.safeEmit('failed', {\n\t\t\t\tcode   : 500,\n\t\t\t\treason : 'WebSocketTransport FINAL FAILED'\n\t\t\t});\n\t\t}\n\t}\n}\n\nmodule.exports = WebSocketTransport;\n","const RetryOperation = require('./retry_operation.js');\n\nexports.operation = function (options)\n{\n\tconst timeouts = exports.timeouts(options);\n\n\treturn new RetryOperation(timeouts, {\n\t\tforever      : options && options.forever,\n\t\tunref        : options && options.unref,\n\t\tmaxRetryTime : options && options.maxRetryTime\n\t});\n};\n\nexports.timeouts = function (options)\n{\n\tif (options instanceof Array)\n\t{\n\t\treturn [].concat(options);\n\t}\n\n\tconst opts = {\n\t\tretries    : 4,\n\t\tfactor     : 2,\n\t\tminTimeout : 1 * 1000,\n\t\tmaxTimeout : 4 * 1000, // Infinity,\n\t\trandomize  : false\n\t};\n\n\tfor (const key in options)\n\t{\n\t\topts[key] = options[key];\n\t}\n\n\tif (opts.minTimeout > opts.maxTimeout)\n\t{\n\t\tthrow new Error('minTimeout is greater than maxTimeout');\n\t}\n\n\tconst timeouts = [];\n\n\tfor (let i = 0; i < opts.retries; i++)\n\t{\n\t\ttimeouts.push(this.createTimeout(i, opts));\n\t}\n\n\tif (options && options.forever && !timeouts.length)\n\t{\n\t\ttimeouts.push(this.createTimeout(i, opts));\n\t}\n\n\t// \n\tconsole.warn(`retry.js timeouts: ${timeouts.length}`);\n\n\t// sort the array numerically ascending\n\ttimeouts.sort(function (a, b)\n\t{\n\t\treturn a - b;\n\t});\n\n\treturn timeouts;\n};\n\nexports.createTimeout = function (attempt, opts)\n{\n\tconst random = (opts.randomize)\n\t\t? (Math.random() + 1)\n\t\t: 1;\n\n\tlet timeout = Math.round(random * opts.minTimeout * Math.pow(opts.factor, attempt));\n\n\ttimeout = Math.min(timeout, opts.maxTimeout);\n\n\treturn timeout;\n};\n\nexports.wrap = function (obj, options, methods)\n{\n\tif (options instanceof Array)\n\t{\n\t\tmethods = options;\n\t\toptions = null;\n\t}\n\n\tif (!methods)\n\t{\n\t\tmethods = [];\n\t\tfor (const key in obj)\n\t\t{\n\t\t\tif (typeof obj[key] === 'function')\n\t\t\t{\n\t\t\t\tmethods.push(key);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < methods.length; i++)\n\t{\n\t\tconst method = methods[i];\n\t\tconst original = obj[method];\n\n\t\tobj[method] = function retryWrapper(original)\n\t\t{\n\t\t\tconst op = exports.operation(options);\n\t\t\tconst args = Array.prototype.slice.call(arguments, 1);\n\t\t\tconst callback = args.pop();\n\n\t\t\targs.push(function (err)\n\t\t\t{\n\t\t\t\tif (op.retry(err))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (err)\n\t\t\t\t{\n\t\t\t\t\targuments[0] = op.mainError();\n\t\t\t\t}\n\t\t\t\tcallback.apply(this, arguments);\n\t\t\t});\n\n\t\t\top.attempt(function ()\n\t\t\t{\n\t\t\t\toriginal.apply(obj, args);\n\t\t\t});\n\t\t}.bind(obj, original);\n\t\tobj[method].options = options;\n\t}\n};\n","function RetryOperation(timeouts, options)\n{\n\t// Compatibility for the old (timeouts, retryForever) signature\n\tif (typeof options === 'boolean')\n\t{\n\t\toptions = { forever: options };\n\t}\n\n\tthis._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n\tthis._timeouts = timeouts;\n\tthis._options = options || {};\n\tthis._maxRetryTime = options ? options.maxRetryTime : Infinity;\n\tthis._fn = null;\n\tthis._errors = [];\n\tthis._attempts = 1;\n\tthis._operationTimeout = 3000; // 默认定时器超时为 3s //null;\n\tthis._operationTimeoutCb = null;\n\tthis._timeout = null;\n\tthis._operationStart = null;\n\n\tconsole.warn(`RetryOperation construct() this._timeouts: ${JSON.stringify(this._timeouts)}`);\n\n\tif (this._options.forever)\n\t{\n\t\tthis._cachedTimeouts = this._timeouts.slice(0);\n\t}\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function ()\n{\n\tthis._attempts = 1;\n\tthis._timeouts = JSON.parse(JSON.stringify(this._originalTimeouts));\n\n\tconsole.warn(`RetryOperation reset() this._timeouts: ${JSON.stringify(this._timeouts)}`);\n}\n\nRetryOperation.prototype.stop = function ()\n{\n\tif (this._timeout)\n\t{\n\t\tclearTimeout(this._timeout);\n\t}\n\tthis._timeout = null;\n\n\tconsole.warn('RetryOperation stop() -- clear the timeouts');\n\n\tthis._timeouts = [];\n\tthis._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function (err)\n{\n\tif (this._timeout)\n\t{\n\t\tclearTimeout(this._timeout);\n\t}\n\tthis._timeout = null;\n\n\tif (!err)\n\t{\n\t\treturn false;\n\t}\n\n\tconst currentTime = new Date().getTime();\n\n\tif (err && currentTime - this._operationStart >= this._maxRetryTime)\n\t{\n\t\tthis._errors.unshift(new Error(`RetryOperation timeout(${this._maxRetryTime}) occurred`));\n\n\t\tconsole.warn('RetryOperation retry() this._maxRetryTime TIMEOUT!!!');\n\n\t\treturn false;\n\t}\n\n\tthis._errors.push(err);\n\n\tlet timeout = this._timeouts.shift();\n\n\tconsole.warn(`RetryOperation retry() timeout: ${timeout} this._timeouts: ${JSON.stringify(this._timeouts)}`);\n\n\tif (timeout === undefined)\n\t{\n\t\tif (this._cachedTimeouts)\n\t\t{\n\t\t\t// retry forever, only keep last error\n\t\t\tthis._errors.splice(this._errors.length - 1, this._errors.length);\n\t\t\tthis._timeouts = this._cachedTimeouts.slice(0);\n\t\t\ttimeout = this._timeouts.shift();\n\t\t}\n\t\telse\n\t\t{\t\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tconst self = this;\n\n\tconst timer = setTimeout(function ()\n\t{\n\t\tself._attempts++;\n\n\t\tif (self._operationTimeoutCb)\n\t\t{\n\t\t\tself._timeout = setTimeout(function ()\n\t\t\t{\n\t\t\t\tself._operationTimeoutCb(self._attempts);\n\t\t\t}, self._operationTimeout);\n\n\t\t\tif (self._options.unref)\n\t\t\t{\n\t\t\t\tself._timeout.unref();\n\t\t\t}\n\t\t}\n\n\t\tself._fn(self._attempts);\n\t}, timeout);\n\n\tif (this._options.unref)\n\t{\n\t\ttimer.unref();\n\t}\n\n\treturn true;\n};\n\nRetryOperation.prototype.attempt = function (fn, timeoutOps)\n{\n\tthis._fn = fn;\n\n\tif (timeoutOps)\n\t{\n\t\tif (timeoutOps.timeout)\n\t\t{\n\t\t\tthis._operationTimeout = timeoutOps.timeout;\n\t\t}\n\t\tif (timeoutOps.cb)\n\t\t{\n\t\t\tthis._operationTimeoutCb = timeoutOps.cb;\n\t\t}\n\t}\n\n\tconst self = this;\n\n\tif (this._operationTimeoutCb)\n\t{\n\t\tthis._timeout = setTimeout(function ()\n\t\t{\n\t\t\tself._operationTimeoutCb(1);\n\t\t}, self._operationTimeout);\n\t}\n\n\tthis._operationStart = new Date().getTime();\n\n\tthis._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function (fn)\n{\n\tconsole.log('Using RetryOperation.try() is deprecated');\n\tthis.attempt(fn);\n};\n\nRetryOperation.prototype.start = function (fn)\n{\n\tconsole.log('Using RetryOperation.start() is deprecated');\n\tthis.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function ()\n{\n\treturn this._errors;\n};\n\nRetryOperation.prototype.attempts = function ()\n{\n\treturn this._attempts;\n};\n\nRetryOperation.prototype.mainError = function ()\n{\n\tif (this._errors.length === 0)\n\t{\n\t\treturn null;\n\t}\n\n\tlet counts = {};\n\tlet mainError = null;\n\tlet mainErrorCount = 0;\n\n\tfor (let i = 0; i < this._errors.length; i++)\n\t{\n\t\tconst error = this._errors[i];\n\t\tconst message = error.message;\n\t\tconst count = (counts[message] || 0) + 1;\n\n\t\tcounts[message] = count;\n\n\t\tif (count >= mainErrorCount)\n\t\t{\n\t\t\tmainError = error;\n\t\t\tmainErrorCount = count;\n\t\t}\n\t}\n\n\treturn mainError;\n};\n","\"use strict\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n(function (f) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n\n    g.debug = f();\n  }\n})(function () {\n  var define, module, exports;\n  return function () {\n    function r(e, n, t) {\n      function o(i, f) {\n        if (!n[i]) {\n          if (!e[i]) {\n            var c = \"function\" == typeof require && require;\n            if (!f && c) return c(i, !0);\n            if (u) return u(i, !0);\n            var a = new Error(\"Cannot find module '\" + i + \"'\");\n            throw a.code = \"MODULE_NOT_FOUND\", a;\n          }\n\n          var p = n[i] = {\n            exports: {}\n          };\n          e[i][0].call(p.exports, function (r) {\n            var n = e[i][1][r];\n            return o(n || r);\n          }, p, p.exports, r, e, n, t);\n        }\n\n        return n[i].exports;\n      }\n\n      for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++) {\n        o(t[i]);\n      }\n\n      return o;\n    }\n\n    return r;\n  }()({\n    1: [function (require, module, exports) {\n      /**\n       * Helpers.\n       */\n      var s = 1000;\n      var m = s * 60;\n      var h = m * 60;\n      var d = h * 24;\n      var w = d * 7;\n      var y = d * 365.25;\n      /**\n       * Parse or format the given `val`.\n       *\n       * Options:\n       *\n       *  - `long` verbose formatting [false]\n       *\n       * @param {String|Number} val\n       * @param {Object} [options]\n       * @throws {Error} throw an error if val is not a non-empty string or a number\n       * @return {String|Number}\n       * @api public\n       */\n\n      module.exports = function (val, options) {\n        options = options || {};\n\n        var type = _typeof(val);\n\n        if (type === 'string' && val.length > 0) {\n          return parse(val);\n        } else if (type === 'number' && isNaN(val) === false) {\n          return options.long ? fmtLong(val) : fmtShort(val);\n        }\n\n        throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n      };\n      /**\n       * Parse the given `str` and return milliseconds.\n       *\n       * @param {String} str\n       * @return {Number}\n       * @api private\n       */\n\n\n      function parse(str) {\n        str = String(str);\n\n        if (str.length > 100) {\n          return;\n        }\n\n        var match = /^((?:\\d+)?\\-?\\d?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n\n        if (!match) {\n          return;\n        }\n\n        var n = parseFloat(match[1]);\n        var type = (match[2] || 'ms').toLowerCase();\n\n        switch (type) {\n          case 'years':\n          case 'year':\n          case 'yrs':\n          case 'yr':\n          case 'y':\n            return n * y;\n\n          case 'weeks':\n          case 'week':\n          case 'w':\n            return n * w;\n\n          case 'days':\n          case 'day':\n          case 'd':\n            return n * d;\n\n          case 'hours':\n          case 'hour':\n          case 'hrs':\n          case 'hr':\n          case 'h':\n            return n * h;\n\n          case 'minutes':\n          case 'minute':\n          case 'mins':\n          case 'min':\n          case 'm':\n            return n * m;\n\n          case 'seconds':\n          case 'second':\n          case 'secs':\n          case 'sec':\n          case 's':\n            return n * s;\n\n          case 'milliseconds':\n          case 'millisecond':\n          case 'msecs':\n          case 'msec':\n          case 'ms':\n            return n;\n\n          default:\n            return undefined;\n        }\n      }\n      /**\n       * Short format for `ms`.\n       *\n       * @param {Number} ms\n       * @return {String}\n       * @api private\n       */\n\n\n      function fmtShort(ms) {\n        var msAbs = Math.abs(ms);\n\n        if (msAbs >= d) {\n          return Math.round(ms / d) + 'd';\n        }\n\n        if (msAbs >= h) {\n          return Math.round(ms / h) + 'h';\n        }\n\n        if (msAbs >= m) {\n          return Math.round(ms / m) + 'm';\n        }\n\n        if (msAbs >= s) {\n          return Math.round(ms / s) + 's';\n        }\n\n        return ms + 'ms';\n      }\n      /**\n       * Long format for `ms`.\n       *\n       * @param {Number} ms\n       * @return {String}\n       * @api private\n       */\n\n\n      function fmtLong(ms) {\n        var msAbs = Math.abs(ms);\n\n        if (msAbs >= d) {\n          return plural(ms, msAbs, d, 'day');\n        }\n\n        if (msAbs >= h) {\n          return plural(ms, msAbs, h, 'hour');\n        }\n\n        if (msAbs >= m) {\n          return plural(ms, msAbs, m, 'minute');\n        }\n\n        if (msAbs >= s) {\n          return plural(ms, msAbs, s, 'second');\n        }\n\n        return ms + ' ms';\n      }\n      /**\n       * Pluralization helper.\n       */\n\n\n      function plural(ms, msAbs, n, name) {\n        var isPlural = msAbs >= n * 1.5;\n        return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n      }\n    }, {}],\n    2: [function (require, module, exports) {\n      // shim for using process in browser\n      var process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n      // don't break things.  But we need to wrap it in a try catch in case it is\n      // wrapped in strict mode code which doesn't define any globals.  It's inside a\n      // function because try/catches deoptimize in certain engines.\n\n      var cachedSetTimeout;\n      var cachedClearTimeout;\n\n      function defaultSetTimout() {\n        throw new Error('setTimeout has not been defined');\n      }\n\n      function defaultClearTimeout() {\n        throw new Error('clearTimeout has not been defined');\n      }\n\n      (function () {\n        try {\n          if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n          } else {\n            cachedSetTimeout = defaultSetTimout;\n          }\n        } catch (e) {\n          cachedSetTimeout = defaultSetTimout;\n        }\n\n        try {\n          if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n          } else {\n            cachedClearTimeout = defaultClearTimeout;\n          }\n        } catch (e) {\n          cachedClearTimeout = defaultClearTimeout;\n        }\n      })();\n\n      function runTimeout(fun) {\n        if (cachedSetTimeout === setTimeout) {\n          //normal enviroments in sane situations\n          return setTimeout(fun, 0);\n        } // if setTimeout wasn't available but was latter defined\n\n\n        if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n          cachedSetTimeout = setTimeout;\n          return setTimeout(fun, 0);\n        }\n\n        try {\n          // when when somebody has screwed with setTimeout but no I.E. maddness\n          return cachedSetTimeout(fun, 0);\n        } catch (e) {\n          try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n          } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n          }\n        }\n      }\n\n      function runClearTimeout(marker) {\n        if (cachedClearTimeout === clearTimeout) {\n          //normal enviroments in sane situations\n          return clearTimeout(marker);\n        } // if clearTimeout wasn't available but was latter defined\n\n\n        if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n          cachedClearTimeout = clearTimeout;\n          return clearTimeout(marker);\n        }\n\n        try {\n          // when when somebody has screwed with setTimeout but no I.E. maddness\n          return cachedClearTimeout(marker);\n        } catch (e) {\n          try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n          } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n          }\n        }\n      }\n\n      var queue = [];\n      var draining = false;\n      var currentQueue;\n      var queueIndex = -1;\n\n      function cleanUpNextTick() {\n        if (!draining || !currentQueue) {\n          return;\n        }\n\n        draining = false;\n\n        if (currentQueue.length) {\n          queue = currentQueue.concat(queue);\n        } else {\n          queueIndex = -1;\n        }\n\n        if (queue.length) {\n          drainQueue();\n        }\n      }\n\n      function drainQueue() {\n        if (draining) {\n          return;\n        }\n\n        var timeout = runTimeout(cleanUpNextTick);\n        draining = true;\n        var len = queue.length;\n\n        while (len) {\n          currentQueue = queue;\n          queue = [];\n\n          while (++queueIndex < len) {\n            if (currentQueue) {\n              currentQueue[queueIndex].run();\n            }\n          }\n\n          queueIndex = -1;\n          len = queue.length;\n        }\n\n        currentQueue = null;\n        draining = false;\n        runClearTimeout(timeout);\n      }\n\n      process.nextTick = function (fun) {\n        var args = new Array(arguments.length - 1);\n\n        if (arguments.length > 1) {\n          for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n          }\n        }\n\n        queue.push(new Item(fun, args));\n\n        if (queue.length === 1 && !draining) {\n          runTimeout(drainQueue);\n        }\n      }; // v8 likes predictible objects\n\n\n      function Item(fun, array) {\n        this.fun = fun;\n        this.array = array;\n      }\n\n      Item.prototype.run = function () {\n        this.fun.apply(null, this.array);\n      };\n\n      process.title = 'browser';\n      process.browser = true;\n      process.env = {};\n      process.argv = [];\n      process.version = ''; // empty string to avoid regexp issues\n\n      process.versions = {};\n\n      function noop() {}\n\n      process.on = noop;\n      process.addListener = noop;\n      process.once = noop;\n      process.off = noop;\n      process.removeListener = noop;\n      process.removeAllListeners = noop;\n      process.emit = noop;\n      process.prependListener = noop;\n      process.prependOnceListener = noop;\n\n      process.listeners = function (name) {\n        return [];\n      };\n\n      process.binding = function (name) {\n        throw new Error('process.binding is not supported');\n      };\n\n      process.cwd = function () {\n        return '/';\n      };\n\n      process.chdir = function (dir) {\n        throw new Error('process.chdir is not supported');\n      };\n\n      process.umask = function () {\n        return 0;\n      };\n    }, {}],\n    3: [function (require, module, exports) {\n      /**\n       * This is the common logic for both the Node.js and web browser\n       * implementations of `debug()`.\n       */\n      function setup(env) {\n        createDebug.debug = createDebug;\n        createDebug.default = createDebug;\n        createDebug.coerce = coerce;\n        createDebug.disable = disable;\n        createDebug.enable = enable;\n        createDebug.enabled = enabled;\n        createDebug.humanize = require('ms');\n        Object.keys(env).forEach(function (key) {\n          createDebug[key] = env[key];\n        });\n        /**\n        * Active `debug` instances.\n        */\n\n        createDebug.instances = [];\n        /**\n        * The currently active debug mode names, and names to skip.\n        */\n\n        createDebug.names = [];\n        createDebug.skips = [];\n        /**\n        * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n        *\n        * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n        */\n\n        createDebug.formatters = {};\n        /**\n        * Selects a color for a debug namespace\n        * @param {String} namespace The namespace string for the for the debug instance to be colored\n        * @return {Number|String} An ANSI color code for the given namespace\n        * @api private\n        */\n\n        function selectColor(namespace) {\n          var hash = 0;\n\n          for (var i = 0; i < namespace.length; i++) {\n            hash = (hash << 5) - hash + namespace.charCodeAt(i);\n            hash |= 0; // Convert to 32bit integer\n          }\n\n          return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n        }\n\n        createDebug.selectColor = selectColor;\n        /**\n        * Create a debugger with the given `namespace`.\n        *\n        * @param {String} namespace\n        * @return {Function}\n        * @api public\n        */\n\n        function createDebug(namespace) {\n          var prevTime;\n\n          function debug() {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            // Disabled?\n            if (!debug.enabled) {\n              return;\n            }\n\n            var self = debug; // Set `diff` timestamp\n\n            var curr = Number(new Date());\n            var ms = curr - (prevTime || curr);\n            self.diff = ms;\n            self.prev = prevTime;\n            self.curr = curr;\n            prevTime = curr;\n            args[0] = createDebug.coerce(args[0]);\n\n            if (typeof args[0] !== 'string') {\n              // Anything else let's inspect with %O\n              args.unshift('%O');\n            } // Apply any `formatters` transformations\n\n\n            var index = 0;\n            args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n              // If we encounter an escaped % then don't increase the array index\n              if (match === '%%') {\n                return match;\n              }\n\n              index++;\n              var formatter = createDebug.formatters[format];\n\n              if (typeof formatter === 'function') {\n                var val = args[index];\n                match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n                args.splice(index, 1);\n                index--;\n              }\n\n              return match;\n            }); // Apply env-specific formatting (colors, etc.)\n\n            createDebug.formatArgs.call(self, args);\n            var logFn = self.log || createDebug.log;\n            logFn.apply(self, args);\n          }\n\n          debug.namespace = namespace;\n          debug.enabled = createDebug.enabled(namespace);\n          debug.useColors = createDebug.useColors();\n          debug.color = selectColor(namespace);\n          debug.destroy = destroy;\n          debug.extend = extend; // Debug.formatArgs = formatArgs;\n          // debug.rawLog = rawLog;\n          // env-specific initialization logic for debug instances\n\n          if (typeof createDebug.init === 'function') {\n            createDebug.init(debug);\n          }\n\n          createDebug.instances.push(debug);\n          return debug;\n        }\n\n        function destroy() {\n          var index = createDebug.instances.indexOf(this);\n\n          if (index !== -1) {\n            createDebug.instances.splice(index, 1);\n            return true;\n          }\n\n          return false;\n        }\n\n        function extend(namespace, delimiter) {\n          var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n          newDebug.log = this.log;\n          return newDebug;\n        }\n        /**\n        * Enables a debug mode by namespaces. This can include modes\n        * separated by a colon and wildcards.\n        *\n        * @param {String} namespaces\n        * @api public\n        */\n\n\n        function enable(namespaces) {\n          createDebug.save(namespaces);\n          createDebug.names = [];\n          createDebug.skips = [];\n          var i;\n          var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n          var len = split.length;\n\n          for (i = 0; i < len; i++) {\n            if (!split[i]) {\n              // ignore empty strings\n              continue;\n            }\n\n            namespaces = split[i].replace(/\\*/g, '.*?');\n\n            if (namespaces[0] === '-') {\n              createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n            } else {\n              createDebug.names.push(new RegExp('^' + namespaces + '$'));\n            }\n          }\n\n          for (i = 0; i < createDebug.instances.length; i++) {\n            var instance = createDebug.instances[i];\n            instance.enabled = createDebug.enabled(instance.namespace);\n          }\n        }\n        /**\n        * Disable debug output.\n        *\n        * @return {String} namespaces\n        * @api public\n        */\n\n\n        function disable() {\n          var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\n            return '-' + namespace;\n          }))).join(',');\n          createDebug.enable('');\n          return namespaces;\n        }\n        /**\n        * Returns true if the given mode name is enabled, false otherwise.\n        *\n        * @param {String} name\n        * @return {Boolean}\n        * @api public\n        */\n\n\n        function enabled(name) {\n          if (name[name.length - 1] === '*') {\n            return true;\n          }\n\n          var i;\n          var len;\n\n          for (i = 0, len = createDebug.skips.length; i < len; i++) {\n            if (createDebug.skips[i].test(name)) {\n              return false;\n            }\n          }\n\n          for (i = 0, len = createDebug.names.length; i < len; i++) {\n            if (createDebug.names[i].test(name)) {\n              return true;\n            }\n          }\n\n          return false;\n        }\n        /**\n        * Convert regexp to namespace\n        *\n        * @param {RegExp} regxep\n        * @return {String} namespace\n        * @api private\n        */\n\n\n        function toNamespace(regexp) {\n          return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\n        }\n        /**\n        * Coerce `val`.\n        *\n        * @param {Mixed} val\n        * @return {Mixed}\n        * @api private\n        */\n\n\n        function coerce(val) {\n          if (val instanceof Error) {\n            return val.stack || val.message;\n          }\n\n          return val;\n        }\n\n        createDebug.enable(createDebug.load());\n        return createDebug;\n      }\n\n      module.exports = setup;\n    }, {\n      \"ms\": 1\n    }],\n    4: [function (require, module, exports) {\n      (function (process) {\n        /* eslint-env browser */\n\n        /**\n         * This is the web browser implementation of `debug()`.\n         */\n        exports.log = log;\n        exports.formatArgs = formatArgs;\n        exports.save = save;\n        exports.load = load;\n        exports.useColors = useColors;\n        exports.storage = localstorage();\n        /**\n         * Colors.\n         */\n\n        exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n        /**\n         * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n         * and the Firebug extension (any Firefox version) are known\n         * to support \"%c\" CSS customizations.\n         *\n         * TODO: add a `localStorage` variable to explicitly enable/disable colors\n         */\n        // eslint-disable-next-line complexity\n\n        function useColors() {\n          // NB: In an Electron preload script, document will be defined but not fully\n          // initialized. Since we know we're in Chrome, we'll just detect this case\n          // explicitly\n          if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n            return true;\n          } // Internet Explorer and Edge do not support colors.\n\n\n          if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n            return false;\n          } // Is webkit? http://stackoverflow.com/a/16459606/376773\n          // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n          return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n          typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n          // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n          typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n          typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n        }\n        /**\n         * Colorize log arguments if enabled.\n         *\n         * @api public\n         */\n\n\n        function formatArgs(args) {\n          args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n          if (!this.useColors) {\n            return;\n          }\n\n          var c = 'color: ' + this.color;\n          args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n          // arguments passed either before or after the %c, so we need to\n          // figure out the correct index to insert the CSS into\n\n          var index = 0;\n          var lastC = 0;\n          args[0].replace(/%[a-zA-Z%]/g, function (match) {\n            if (match === '%%') {\n              return;\n            }\n\n            index++;\n\n            if (match === '%c') {\n              // We only are interested in the *last* %c\n              // (the user may have provided their own)\n              lastC = index;\n            }\n          });\n          args.splice(lastC, 0, c);\n        }\n        /**\n         * Invokes `console.log()` when available.\n         * No-op when `console.log` is not a \"function\".\n         *\n         * @api public\n         */\n\n\n        function log() {\n          var _console;\n\n          // This hackery is required for IE8/9, where\n          // the `console.log` function doesn't have 'apply'\n          return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n        }\n        /**\n         * Save `namespaces`.\n         *\n         * @param {String} namespaces\n         * @api private\n         */\n\n\n        function save(namespaces) {\n          try {\n            if (namespaces) {\n              exports.storage.setItem('debug', namespaces);\n            } else {\n              exports.storage.removeItem('debug');\n            }\n          } catch (error) {// Swallow\n            // XXX (@Qix-) should we be logging these?\n          }\n        }\n        /**\n         * Load `namespaces`.\n         *\n         * @return {String} returns the previously persisted debug modes\n         * @api private\n         */\n\n\n        function load() {\n          var r;\n\n          try {\n            r = exports.storage.getItem('debug');\n          } catch (error) {} // Swallow\n          // XXX (@Qix-) should we be logging these?\n          // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n          if (!r && typeof process !== 'undefined' && 'env' in process) {\n            r = process.env.DEBUG;\n          }\n\n          return r;\n        }\n        /**\n         * Localstorage attempts to return the localstorage.\n         *\n         * This is necessary because safari throws\n         * when a user disables cookies/localstorage\n         * and you attempt to access it.\n         *\n         * @return {LocalStorage}\n         * @api private\n         */\n\n\n        function localstorage() {\n          try {\n            // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n            // The Browser also has localStorage in the global context.\n            return localStorage;\n          } catch (error) {// Swallow\n            // XXX (@Qix-) should we be logging these?\n          }\n        }\n\n        module.exports = require('./common')(exports);\n        var formatters = module.exports.formatters;\n        /**\n         * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n         */\n\n        formatters.j = function (v) {\n          try {\n            return JSON.stringify(v);\n          } catch (error) {\n            return '[UnexpectedJSONParseError]: ' + error.message;\n          }\n        };\n      }).call(this, require('_process'));\n    }, {\n      \"./common\": 3,\n      \"_process\": 2\n    }]\n  }, {}, [4])(4);\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar regeneratorRuntime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n","/**\n * Generates a random positive integer.\n *\n * @returns {Number}\n */\nexports.generateRandomNumber = function ()\n{\n\treturn Math.round(Math.random() * 10000000);\n};\n\nexports.guid = function ()\n{\n\tfunction S4()\n\t{\n\t\treturn (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n\t}\n\n\tconst s1 = S4();\n\tconst s2 = S4();\n\tconst s3 = S4();\n\tconst s4 = S4();\n\tconst s5 = S4();\n\tconst s6 = S4();\n\tconst s7 = S4();\n\tconst s8 = S4();\n\n\treturn (`${s1}${s2}-${s3}-${s4}-${s5}-${s1}${s1}${s1}`);\n\t//\treturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n};\n\n// ^((https|http|ftp|rtmp|rtsp|mms)?://)?(([0-9a-z_!~*\\'().&=+$%-]+: )?[0-9a-z_!~*\\'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*\\'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*\\'().;?:@&=+$,%#-]+)+/?)$\nexports.isURL = function (url)\n{\n\tconst strRegex = '^((https|http|ftp|rtmp|rtsp|mms)?://)'\n\t\t+ '?(([0-9a-zA-Z_!~*\\'().&=+$%-]+: )?[0-9a-zA-Z_!~*\\'().&=+$%-]+@)?' //ftp的user@ \n\t\t+ '(([0-9]{1,3}.){3}[0-9]{1,3}' // IP形式的URL- 199.194.52.184 \n\t\t+ '|' // 允许IP和DOMAIN（域名） \n\t\t+ '([0-9a-zA-Z_!~*\\'()-]+.)*' // 域名- www. \n\t\t+ '([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z].' // 二级域名 \n\t\t+ '[a-zA-Z]{2,6})' // first level domain- .com or .museum \n\t\t+ '(:[0-9]{1,4})?' // 端口- :80 \n\t\t+ '((/?)|' // a slash isn't required if there is no file name \n\t\t+ '(/[0-9a-zA-Z_!~*\\'().;?:@&=+$,%#-]+)+/?)$';\n\tconst re = new RegExp(strRegex);\n\t\n\tif (re.test(url))\n\t{\n\t\treturn (true);\n\t}\n\telse\n\t{\n\t\treturn (false);\n\t}\n};\n","const { EventEmitter } = require('../thirdparty/events.js');\n\nimport regeneratorRuntime from '../thirdparty/runtime.js';\nconst Logger = require('./Logger');\n\nclass EnhancedEventEmitter extends EventEmitter\n{\n\tconstructor(logger)\n\t{\n\t\tsuper();\n\t\tthis.setMaxListeners(Infinity);\n\n\t\tthis._logger = logger || new Logger('EnhancedEventEmitter');\n\t\tthis._logger.prefix = '-';\n\t}\n\n\tsafeEmit(event, ...args)\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.emit(event, ...args);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error(\n\t\t\t\t'safeEmit() | event listener threw an error. event: ',\n\t\t\t\tevent, ' error: ', error);\n\t\t}\n\t}\n\n\tasync safeEmitAsPromise(event, ...args)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tthis.safeEmit(event, ...args, resolve, reject);\n\t\t});\n\t}\n}\n\nmodule.exports = EnhancedEventEmitter;\n","const WxWebSocket = require('./WxWebSocket.js');\nconst Logger = require('./Logger.js');\nconst EnhancedEventEmitter = require('./EnhancedEventEmitter.js');\nconst config = require('../config.js');\nconst retry = require('../retry/retry.js');\n\nconst logger = new Logger('IPLocation');\n\n// 最大重试次数\nconst MAX_RETRY = 10;\n\n// IPLocation 总 timeout\nconst IP_FULL_TIMEOUT = 15000; // 15s\n\n// 状态\n// {\nconst IPL_STATE_IDLE = 0; // 初始/关闭状态\nconst IPL_STATE_STARTING = 1; // 启动中\nconst IPL_STATE_ACT = 2; // 已连接/正常启动\nconst IPL_STATE_RETRYING = 3; // 重试中\n// }\n\n// 定义 连接失败/断网 的相关retry参数\nconst DEFAULT_RETRY_OPTIONS =\n{\n\tretries    : MAX_RETRY, // 连续重试次数\n\tfactor     : 2, // 递增超时放大倍数\n\tminTimeout : 1 * 1000, // \n\tmaxTimeout : 8 * 1000\n};\n\n// TODO : retry while connect fail or no-response \n// 使用 retry 模块实现失败重试\n\nclass IPLocation extends EnhancedEventEmitter\n{\n\t/**\n\t * @param {Object} [options] - Options for WebSocket-Node.W3CWebSocket and retry.\n\t */\n\tconstructor(options)\n\t{\n\t\tsuper(logger);\n\t\t\n\t\t// Options.\n\t\t// @type {Object}\n\t\tthis._options = options || {};\n\n\t\t// 日志追踪用\n\t\tthis._logClues = options.logClues;\n\n\t\t// 用来标识本次会话\n\t\tthis._sid = options.sid;\n\n\t\t// WebSocket instance.\n\t\t// @type {WebSocket}\n\t\tthis._ws = null;\n\n\t\tthis._operation = null;\n\n\t\t// Map of pending sent request objects indexed by request id.\n\t\t// @type {Map<Number, Object>}\n\t\tthis._sents = new Map();\n\n\t\t// 用来标识是否调用了 close ?\n\t\tthis._stopping = false;\n\n\t\t// 当前状态\n\t\tthis._state = IPL_STATE_IDLE;\n\n\t\tthis._iplocTimer = null;\n\t\t// 是否已 got\n\t\tthis._hasGot = false;\n\n\t\t// 事务是否已正常完成\n\t\tthis._isTPFinish = false;\n\t}\n\n\tasync init(opts)\n\t{\n\t\tif (this._state !== IPL_STATE_IDLE)\n\t\t\treturn;\n\t\t\n\t\tconst {\n\t\t\turl,\n\t\t\tappId,\n\t\t\tuserId\n\t\t} = opts;\n\n\t\tthis._url = url;\n\t\tthis._appId = appId;\n\t\tthis._userId = userId;\n\n\t\ttry\n\t\t{\n\t\t\tthis._hasGot = false;\n\n\t\t\t// \n\t\t\tthis._stopping = false;\n\n\t\t\tthis._state = IPL_STATE_STARTING;\n\n\t\t\t// \n\t\t\tlet iplocProc = new Promise((resolve, reject) =>\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tthis.runIploc();\n\t\t\t});\n\n\t\t\tlet iplocTimerPro = new Promise((resolve, reject) =>\n\t\t\t{\n\t\t\t\tthis._iplocTimer = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\treject({\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'iplocation timeout'\n\t\t\t\t\t});\n\t\t\t\t}, IP_FULL_TIMEOUT);\n\t\t\t});\n\n\t\t\tPromise.race([ iplocProc, iplocTimerPro ])\n\t\t\t\t.then((result) =>\n\t\t\t\t{\n\t\t\t\t})\n\t\t\t\t.catch((e) =>\n\t\t\t\t{\n\t\t\t\t\tthis.close();\n\n\t\t\t\t\tthis.safeEmit('failed', {\n\t\t\t\t\t\tsid    : this._sid,\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'iplocation FIN failed'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t// \n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tonMessage(resp)\n\t{\n\t\t// 标记为已 got，如此则超时定时到后，执行 resolve，否则将执行 reject\n\t\tthis._hasGot = true;\n\n\t\t// 清除定时器\n\t\tclearTimeout(this._iplocTimer);\n\n\t\t// \n\t\tconst sent = this._sents.get(1);\n\n\t\tif (!sent)\n\t\t{\n\t\t\tlogger.error(\n\t\t\t\t'IPLocation onMessage received response does not match any sent request [id:%s]',\n\t\t\t\t1);\n\n\t\t\treturn;\n\t\t}\n\n\t\tsent.resolve(resp);\n\t}\n\n\tasync request(opts)\n\t{\n\t\tconst {\n\t\t\thost,\n\t\t\tappId,\n\t\t\tuserId,\n\t\t\tsid\n\t\t} = opts;\n\n\t\t// \n\t\ttry\n\t\t{\n\t\t\tif (Boolean(this._ws) && this._state === IPL_STATE_ACT)\n\t\t\t{\n\t\t\t\t// \n\t\t\t\tconst iplocationData = {\n\t\t\t\t\teType        : 1,\n\t\t\t\t\tsSEQID       : '111111111',\n\t\t\t\t\tmProtocolMsg : {\n\t\t\t\t\t\tsVersion     : 'Test_4.2.0.777',\n\t\t\t\t\t\tbLoadBalance : false,\n\t\t\t\t\t\tbReConnect   : false,\n\t\t\t\t\t\tbVipUser     : false,\n\t\t\t\t\t\tsIDentify    : '7B4FCDBC0914E7182B8EC357F07498F1',\n\t\t\t\t\t\tsSecret      : 'c052cd055acfabc5',\n\t\t\t\t\t\tsVerifyCode  : 'abcd',\n\t\t\t\t\t\tsAppID       : appId,\n\t\t\t\t\t\tnUserID      : parseInt(userId),\n\t\t\t\t\t\tsClientVer   : 'miniapp_1.0',\n\t\t\t\t\t\tsConnectID   : sid,\n\t\t\t\t\t\tmIpAddrMsg   : {\n\t\t\t\t\t\t\tbFec  : false,\n\t\t\t\t\t\t\tsIp   : host,\n\t\t\t\t\t\t\tnPort : 0\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tlogger.debug(`IPLocation request() ws.send: ${JSON.stringify(iplocationData)}`);\n\n\t\t\t\tthis._ws.send({ msg: JSON.stringify(iplocationData) });\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('IPLocation request() ws.send failed. error: ', error);\n\n\t\t\treturn Promise.reject(new Error('WebSocket send failed'));\n\t\t}\n\n\t\t// \n\t\t// 因借用了 sents ，如下代码中 id、method 等字段是对 sents 做了妥协（其实这两字段对于 IPLoc 的请求交互是没有实际用处的）\n\t\t// \n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst requestId = 1;\n\t\t\tconst method = 'request';\n\t\t\tconst timeout = 1500 * (15 + (0.1 * this._sents.size));\n\t\t\tconst sent =\n\t\t\t{\n\t\t\t\tid      : requestId, // 此字段固定为1\n\t\t\t\tmethod  : method,\n\t\t\t\tresolve : (data2) =>\n\t\t\t\t{\n\t\t\t\t\tif (!this._sents.delete(1))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\t\n\t\t\t\t\tlogger.debug('IPLocation request[method: ', method, '] resolve. response: ', data2);\n\n\t\t\t\t\tresolve(data2);\n\t\t\t\t},\n\t\t\t\treject : (error) =>\n\t\t\t\t{\n\t\t\t\t\tlogger.debug(`IPLocation request[method: ${method}] reject.`);\n\n\t\t\t\t\tif (!this._sents.delete(requestId))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\treject(error);\n\t\t\t\t},\n\t\t\t\ttimer : setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tlogger.error('IPLocation request[method: %s] reject.', method);\n\n\t\t\t\t\tif (!this._sents.delete(requestId))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\treject(new Error('Request Timeout.'));\n\t\t\t\t}, timeout),\n\t\t\t\tclose : () =>\n\t\t\t\t{\n\t\t\t\t\tlogger.error('IPLocation request[method: %s] close.', method);\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\treject(new Error('Peer Closed'));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Add sent stuff to the map.\n\t\t\tthis._sents.set(requestId, sent);\n\t\t});\n\t}\n\n\t// 如果当前为非人为主观断开，则会尝试一定次数的重试\n\t// 若需要重试，则在连续重试N次仍未成功连接，则向上层报 \"最终失败\"\n\t// 若无需重试，则直接向上层报 \"close\"\n\tonWsClose(opts)\n\t{\n\t\t// \n\t\tif (this._hasGot)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// \n\t\tconst { event, currentAttempt } = opts;\n\n\t\t// Don't retry if code is 4000 (closed by the server).\n\t\t// 4000 -- closed by server\n\t\t// 1000 -- normal closure\n\t\tif (event.code !== 4000 && event.code !== 1000)\n\t\t{\n\t\t\tif (this._stopping) // 上层主动关闭，故不再尝试重连，且通知上层\n\t\t\t{\n\t\t\t\tlogger.debug(`IPLocation onWsClose [event.code:${event.code}] [this._state: ${this._state}]`);\n\n\t\t\t\t// \n\t\t\t\tthis._operation.stop();\n\n\t\t\t\t/* 2019.7.18 在此wxwebsocket已断开，此处无需再执行closeTransport\n\t\t\t\tthis.closeTransport();\n\t\t\t\t*/\n\n\t\t\t\tthis._state = IPL_STATE_IDLE;\n\n\t\t\t\tthis.safeEmit('close', {\n\t\t\t\t\tsid : this._sid\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (this._state !== IPL_STATE_ACT) // 尝试重连\n\t\t\t{\n\t\t\t\tthis._state = IPL_STATE_RETRYING; // 设定为：当前正在重试\n\n\t\t\t\tif (this._operation.retry(true))\n\t\t\t\t{\n\t\t\t\t\tlogger.debug(`IPLocation event: onWsClose() [event.code: ${event.code}]. retrying.`);\n\n\t\t\t\t\t// 通知上层：当前正在尝试自动重连\n\t\t\t\t\tthis.safeEmit('auto-reconnecting', {\n\t\t\t\t\t\tsid : this._sid\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlogger.error(`IPLocation event: onWsClose() [event.code: ${event.code}]. FINAL FAILED.`);\n\n\t\t\t\t\t// \n\t\t\t\t\tthis._operation.stop();\n\t\t\t\t\t// \n\t\t\t\t\tthis._state = IPL_STATE_IDLE;\n\t\t\t\t\t// 当尝试完所有重试，仍未 ok，则向上层触发 failed，携带 event:{code: 500}\n\t\t\t\t\tthis.safeEmit('failed', {\n\t\t\t\t\t\tsid    : this._sid,\n\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\treason : 'iplocation FIN failed'\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 如果当前已连接，则应重新建立连接??\n\t\t\telse if (this._state === IPL_STATE_ACT)\n\t\t\t{\n\t\t\t\tlogger.debug(`IPLocation event: onWsClose() [event.code: ${event.code}] [this._wstState: IPL_STATE_ACT]. so FULL-reconnect.`);\n\n\t\t\t\t// \n\t\t\t\tthis._operation.stop();\n\t\t\t\t// \n\t\t\t\tthis._state = IPL_STATE_RETRYING; // 设定为：当前正在重试\n\n\t\t\t\t// 通知上层：当前正在尝试自动重连\n\t\t\t\tthis.safeEmit('auto-reconnecting', {\n\t\t\t\t\tsid : this._sid\n\t\t\t\t});\n\n\t\t\t\tthis.runIploc();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogger.debug(`IPLocation event: onWsClose() [event.code: ${event.code}] [this._wstState: IPL_STATE_ACT]. so FULL-reconnect.`);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogger.debug(`IPLocation [event.code: ${event.code}]. this._state: ${this._state}. stop.`);\n\n\t\t\t// \n\t\t\tthis._operation.stop();\n\n\t\t\t// \n\t\t\t/* 2019.7.18 在此wxwebsocket已断开，此处无需再执行closeTransport\n\t\t\tthis.closeTransport();\n\t\t\t*/\n\n\t\t\tthis._state = IPL_STATE_IDLE;\n\n\t\t\t// 此种情况下，才直接向上层触发 'close' 事件\n\t\t\t// Emit 'close' event.\n\t\t\tthis.safeEmit('close', {\n\t\t\t\tsid : this._sid\n\t\t\t});\n\t\t}\n\t}\n\n\tasync runIploc()\n\t{\n\t\tthis._operation =\n\t\t\tretry.operation(this._options.retry || DEFAULT_RETRY_OPTIONS);\n\n\t\tif (!this._operation)\n\t\t{\n\t\t\tlogger.error('IPLocation runIploc() Internal error.');\n\n\t\t\tthrow new Error('Internal error');\n\t\t}\n\n\t\tthis._operation.attempt((currentAttempt) =>\n\t\t{\n\t\t\t// \n\t\t\tthis.closeTransport();\n\t\t\t// \n\n\t\t\t// 如果上层调用了 close\n\t\t\tif (this._stopping)\n\t\t\t{\n\t\t\t\tthis._operation.stop();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// \n\t\t\tthis._ws = new WxWebSocket(null);\n\n\t\t\tif (Boolean(this._ws))\n\t\t\t{\n\t\t\t\t// 监听 wx websocket 模块事件\n\t\t\t\tthis._ws.on('open', async () =>\n\t\t\t\t{\n\t\t\t\t\t// 若此前调用了 close 主动关闭，则此处直接 return\n\t\t\t\t\tif (this._stopping)\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.debug('IPLocation event: onWsOpen(). open after stopping.');\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// \n\t\t\t\t\tthis._state = IPL_STATE_ACT;\n\t\t\t\t\t// \n\n\t\t\t\t\tlogger.debug(`IPLocation ws connect open. this._state: ${this._state}`);\n\t\t\t\t\t\n\t\t\t\t\t// \n\t\t\t\t\tconst iplocRes = await this.request({\n\t\t\t\t\t\thost   : 'stech.3ttech.cn',\n\t\t\t\t\t\tappId  : this._appId,\n\t\t\t\t\t\tuserId : this._userId,\n\t\t\t\t\t\tsid    : this.sid\n\t\t\t\t\t});\n\n\t\t\t\t\t// \n\t\t\t\t\tlogger.warn(`IPLocation result: ${JSON.stringify(iplocRes)}`);\n\t\t\t\t\t\n\t\t\t\t\t// \n\t\t\t\t\t// miniappHome 为本 miniapp 的归属au\n\t\t\t\t\tconst miniappHome = (iplocRes.mProtocolMsg.mIpAddrMsg.sDomain);\n\n\t\t\t\t\tlet auAccess = config.miniauHost;\n\n\t\t\t\t\t// 两种方案：\n\t\t\t\t\t// 1. 小程序访问服务器的入口 为 wss://xxx.xxx.xxx/miniappau-${miniappHome} -- 注：其中 miniappHome 要进行转置，确保格式合乎 url 规范\n\t\t\t\t\t// xxx.xxx.xxx 上部署有 nginx，根据 url path 中的 ${miniappHome}，执行 proxy\n\t\t\t\t\t// 2. 小程序直接访问 miniappHome\n\t\t\t\t\tif (miniappHome != null && miniappHome !== '' && typeof miniappHome !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\t// 1. 方案1 auAccess = `${config.miniauHost}-${miniappHome}`;\n\t\t\t\t\t\t// \n\t\t\t\t\t\t// 2. 方案2 \n\t\t\t\t\t\tauAccess = `${miniappHome}`;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error(`IPLocation error -- miniappHome: ${miniappHome}`);\n\n\t\t\t\t\t\tthis.safeEmit('failed', {\n\t\t\t\t\t\t\tsid    : this._sid,\n\t\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\t\treason : `miniappHome: ${miniappHome}`\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t//\n\t\t\t\t\t// 事务已完成\n\t\t\t\t\tthis._isTPFinish = true;\n\n\t\t\t\t\tthis.safeEmit('ok', {\n\t\t\t\t\t\tsid : this._sid,\n\t\t\t\t\t\tauAccess\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// \n\t\t\t\tthis._ws.on('message', (event) =>\n\t\t\t\t{\n\t\t\t\t\tconst resp = JSON.parse(event.data);\n\n\t\t\t\t\t// \n\t\t\t\t\tthis.onMessage(resp);\n\t\t\t\t});\n\n\t\t\t\tthis._ws.on('error', (event) =>\n\t\t\t\t{\n\t\t\t\t\tlogger.error('IPLocation ws connect error. this._state: ', this._state, ' event: ', event);\n\n\t\t\t\t\t//\n\t\t\t\t});\n\n\t\t\t\tthis._ws.on('close', (event) =>\n\t\t\t\t{\n\t\t\t\t\tthis.onWsClose({\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tcurrentAttempt\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tlogger.debug(`IPLocation runIploc() [currentAttempt: ${currentAttempt}]. try to connect: ${this._url}`);\n\n\t\t\t\t// connect server\n\t\t\t\tthis._ws.connect({\n\t\t\t\t\turl     : this._url,\n\t\t\t\t\tsuccess : (res) => {},\n\t\t\t\t\tfail    : (res) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error('IPLocation ws.connect failed. error: ', res);\n\n\t\t\t\t\t\tthis.safeEmit('failed', {\n\t\t\t\t\t\t\tsid    : this._sid,\n\t\t\t\t\t\t\tcode   : 500,\n\t\t\t\t\t\t\treason : 'ws.connect failed'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogger.error('IPLocation WebSocket create failed.');\n\n\t\t\t\tthis.safeEmit('failed', {\n\t\t\t\t\tsid    : this._sid,\n\t\t\t\t\tcode   : 500,\n\t\t\t\t\treason : 'WebSocket create failed'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tcloseTransport()\n\t{\n\t\t// Close every pending sent.\n\t\tfor (const sent of this._sents.values())\n\t\t{\n\t\t\tsent.close();\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tif (Boolean(this._ws))\n\t\t\t\tthis._ws.close();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error(`IPLocation closeTransport() failed. Closing the WebSocket error: ${JSON.stringify(error)}`);\n\t\t}\n\t}\n\t\n\tclose()\n\t{\n\t\t// Don't wait for the WebSocket 'close' event, do it now.\n\t\tthis._stopping = true;\n\n\t\tlogger.debug('IPLocation close()');\n\n\t\tif (this._state === IPL_STATE_IDLE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closeTransport();\n\n\t\t// \n\t\tthis._operation.stop();\n\t\t// \n\t\tthis._state = IPL_STATE_IDLE;\n\t}\n}\n\nmodule.exports = IPLocation;\n","const debug = require('../thirdparty/debug.js');\n\nconst APP_NAME = 'tttminiappsdk';\n\nconst LOG_NONE = 0;\nconst LOG_ERROR = 1;\nconst LOG_WARN = 2;\nconst LOG_INFO = 3;\nconst LOG_DEBUG = 4;\nconst LOG_TRACE = 5;\n\nclass Logger\n{\n\tconstructor(prefix)\n\t{\n\t\t// \n\t\tthis._appId = '';\n\t\tthis._roomId = '';\n\t\tthis._userId = '';\n\t\tthis._logClues = '';\n\t\tthis._prefix = '';\n\n\t\tthis._logLevel = LOG_DEBUG;\n\n\t\t// \n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\n\t\t\t// \n\t\t\tthis._prefix = prefix;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\t// this._debug.log = console.info.bind(console);\n\t\t// this._warn.log = console.warn.bind(console);\n\t\t// this._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t\t// \n\t\tthis._debug = this._logDebug;\n\t\tthis._warn = this._logWarn;\n\t\tthis._error = this._logError;\n\t}\n\n\tset logLevel(logLevel)\n\t{\n\t\tswitch (logLevel) {\n\t\t\tcase 'LOG_NONE':\n\t\t\t\tthis._logLevel = LOG_NONE;\n\t\t\t\tbreak;\n\t\t\tcase 'LOG_ERROR':\n\t\t\t\tthis._logLevel = LOG_ERROR;\n\t\t\t\tbreak;\n\t\t\tcase 'LOG_WARN':\n\t\t\t\tthis._logLevel = LOG_WARN;\n\t\t\t\tbreak;\n\t\t\tcase 'LOG_INFO':\n\t\t\t\tthis._logLevel = LOG_INFO;\n\t\t\t\tbreak;\n\t\t\tcase 'LOG_DEBUG':\n\t\t\t\tthis._logLevel = LOG_DEBUG;\n\t\t\t\tbreak;\n\t\t\tcase 'LOG_TRACE':\n\t\t\t\tthis._logLevel = LOG_TRACE;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis._logLevel = LOG_DEBUG;\n\t\t}\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n\n\tset prefix(prefix)\n\t{\n\t\tif (!prefix)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._prefix = prefix;\n\t}\n\n\tsetParameters(opts)\n\t{\n\t\tconst {\n\t\t\tappId,\n\t\t\troomId,\n\t\t\tuserId,\n\t\t\tlogClues\n\t\t} = opts;\n\n\t\t// \n\t\tthis._appId = appId;\n\t\tthis._roomId = roomId;\n\t\tthis._userId = userId;\n\t\tthis._logClues = logClues;\n\t}\n\n\t// \n\t_logDebug(...args)\n\t{\n\t\tthis.postLog(LOG_DEBUG, ...args);\n\t}\n\n\t_logWarn(...args)\n\t{\n\t\tthis.postLog(LOG_WARN, ...args);\n\t}\n\n\t_logError(...args)\n\t{\n\t\tthis.postLog(LOG_ERROR, ...args);\n\t}\n\n\tpostLog(logLevel, ...args)\n\t{\n\t\t// \n\t\tconst appId = this._appId;\n\t\tconst roomId = this._roomId;\n\t\tconst userId = this._userId;\n\n\t\tconst preMsg = `appid=${appId}, roomid=${roomId}, userid=${userId} time=${new Date()} logClues=${this._logClues} <${this._prefix}>`;\n\t\tlet msg = '';\n\n\t\t[].slice.apply(args).forEach((element) =>\n\t\t{\n\t\t\tif (typeof element === 'object')\n\t\t\t{\n\t\t\t\tconst s = JSON.stringify(element);\n\n\t\t\t\tmsg = `${msg} ${s}`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmsg = `${msg} ${element}`;\n\t\t\t}\n\t\t});\n\n\t\twx.request({\n\t\t\turl    : 'https://log.wushuangtech.com:15100',\n\t\t\tmethod : 'POST',\n\t\t\tdata   : `event=${APP_NAME} ${preMsg} ${msg}`,\n\t\t\theader : {\n\t\t\t\t'Content-Type' : 'text/plain; charset=utf-8'\n\t\t\t},\n\t\t\tsuccess(res)\n\t\t\t{\n\t\t\t}\n\t\t});\n\n\t\t// to logurl2\n\t\t// TODO : \n\n\t\t/*\n\t\twx.request({\n\t\t\turl    : 'https://api3tclass.3ttech.cn/edu/exception',\n\t\t\tmethod : 'POST',\n\t\t\tdata   : {\n\t\t\t\tmessage : msg,\n\t\t\t\ttype    : 'miniappsdk',\n\t\t\t\tlevel   : logLevel,\n\t\t\t\tclassId : roomId,\n\t\t\t\tUID     : userId\n\t\t\t},\n\t\t\theader : {\n\t\t\t\t'content-type' : 'application/x-www-form-urlencoded;charset=UTF-8'\n\t\t\t},\n\t\t\tsuccess(res)\n\t\t\t{\n\t\t\t}\n\t\t});\n\t\t*/\n\n\t\t// 同时，输出到控制台\n\t\t/* eslint-disable no-console */\n\t\tif (logLevel < this._logLevel)\n\t\t{\n\t\t\tconsole.log(`time=${new Date()} ${msg}`);\n\t\t}\n\t\t/* eslint-enable no-console */\n\t}\n}\n\nmodule.exports = Logger;\n","const Logger = require('./Logger.js');\nconst EnhancedEventEmitter = require('./EnhancedEventEmitter.js');\n\n// 状态\n// {\nconst WX_STATE_IDLE = 0; // 初始/关闭状态\nconst WX_STATE_STARTING = 1; // 启动中\nconst WX_STATE_ACT = 2; // 已连接/正常启动\nconst WX_STATE_STOPING = 3; // 停止中\n// }\n\nclass WxWebSocket extends EnhancedEventEmitter\n{\n\tconstructor(randomId, logger)\n\t{\n\t\tsuper(logger);\n\n\t\t// \n\t\tthis._logger = logger || new Logger('WxWebSocket');\n\t\tthis._logger.prefix = '-';\n\n\t\t// 连接状态\n\t\tthis._connState = WX_STATE_IDLE;\n\n\t\t// 是否主动 close ??\n\t\tthis._stopping = false;\n\n\t\t// socket发送的消息队列\n\t\t/* 暂不启用该缓存队列\n\t\tthis._msgQueue = [];\n\t\t*/\n\n\t\t// 重连定时器 -- 不再此处执行重连（外部已处理）\n\t\t// this._connectSocketTimeOut = null;\n\n\t\tthis._socketTask = null;\n\t\t// \n  \n\t\t// \n\t\tthis._randomId = randomId;\n\t}\n\n\t/**\n\t * 创建一个 WebSocket 连接\n\t * @param {options} \n\t *   url          String    是    开发者服务器接口地址，必须是 wss 协议，且域名必须是后台配置的合法域名\n\t *   header        Object    否    HTTP Header , header 中不能设置 Referer\n\t *   method        String    否    默认是GET，有效值：OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT\n\t *   protocols    StringArray    否    子协议数组    1.4.0\n\t *   success      Function    否    接口调用成功的回调函数\n\t *   fail         Function    否    接口调用失败的回调函数\n\t *   complete      Function    否    接口调用结束的回调函数（调用成功、失败都会执行）\n\t */\n\tasync connect(options)\n\t{\n\t\tthis._stopping = false;\n\n\t\t//\n\t\tthis._connState = WX_STATE_STARTING;\n\n\t\t/* 暂不启用该缓存队列\n\t\tthis._msgQueue = [];\n\t\t*/\n\n\t\ttry\n\t\t{\n\t\t\tthis._logger.debug(`WxWebSocket connect() -- wx.connectSocket url: ${options.url}`);\n\n\t\t\t/* eslint-disable no-undef */\n\t\t\tthis._socketTask = wx.connectSocket({\n\t\t\t/* eslint-enable no-undef */\n\t\t\t\turl    : options.url,\n\t\t\t\theader : {\n\t\t\t\t\t'content-type' : 'application/json'\n\t\t\t\t},\n\t\t\t\tmethod  : 'GET',\n\t\t\t\tsuccess : (res) =>\n\t\t\t\t{\n\t\t\t\t\tif (options)\n\t\t\t\t\t{\n\t\t\t\t\t\t// 成功回调\n\t\t\t\t\t\toptions.success && options.success(res);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._logger.debug('WxWebSocket connect() -- wx.connectSocket call OK.');\n\t\t\t\t},\n\t\t\t\tfail : (res) =>\n\t\t\t\t{\n\t\t\t\t\tif (options)\n\t\t\t\t\t{\n\t\t\t\t\t\t// 失败回调\n\t\t\t\t\t\toptions.fail && options.fail(res);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._connState = WX_STATE_IDLE;\n\n\t\t\t\t\tthis._logger.warn('WxWebSocket connect() -- wx.connectSocket call FAIL.');\n\t\t\t\t},\n\t\t\t\tcomplete : (res) =>\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\toptions.fail && options.fail('EXCEPTION');\n\n\t\t\tthis._connState = WX_STATE_IDLE;\n\n\t\t\tthis._logger.warn('WxWebSocket connect() -- wx.connectSocket call EXCEPTION.');\n\n\t\t\treturn;\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\t// \n\t\t}\n\n\t\t// \n\t\tif (Boolean(this._socketTask))\n\t\t{\n\t\t\tthis._socketTask.onClose((r) => this.onSocketClose(r));\n\t\t\tthis._socketTask.onMessage((r) => this.onSocketMessage(r));\n\t\t\tthis._socketTask.onError((r) => this.onSocketError(r));\n\t\t\tthis._socketTask.onOpen((r) => this.onSocketOpen(r));\n\t\t}\n\t}\n\n\t/**\n\t * 通过 WebSocket 连接发送数据\n\t * @param {options} \n\t *   data    String / ArrayBuffer    是    需要发送的内容\n\t *   success    Function    否    接口调用成功的回调函数\n\t *   fail    Function    否    接口调用失败的回调函数\n\t *   complete    Function    否    接口调用结束的回调函数（调用成功、失败都会执行）\n\t */\n\tasync send(options)\n\t{\n\t\tif (!options)\n\t\t{\n\t\t\tthis._logger.debug('WxWebSocket send() invalid parameters -- options');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._logger.debug(`WxWebSocket send() <<<<<< ${options.msg}`);\n\n\t\tif (Boolean(this._socketTask) && this._connState === WX_STATE_ACT)\n\t\t{\n\t\t\tthis._socketTask.send({\n\t\t\t\tdata    : options.msg,\n\t\t\t\tsuccess : (res) =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug('WxWebSocket send() -- call wx socketTask.send OK.');\n\n\t\t\t\t\tif (options)\n\t\t\t\t\t{\n\t\t\t\t\t\toptions.success && options.success(res);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail : (res) =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug('WxWebSocket send() -- call wx socketTask.send FAIL.');\n\n\t\t\t\t\tif (options)\n\t\t\t\t\t{\n\t\t\t\t\t\toptions.fail && options.fail(res);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._logger.debug(`WxWebSocket send() error -- this._connState: ${this._connState}`);\n\n\t\t\t/* 暂不启用该缓存队列\n\t\t\tthis._msgQueue.push(options.msg);\n\t\t\t*/\n\t\t}\n\t}\n\n\t/**\n\t * 关闭 WebSocket 连接。\n\t * @param {opts} \n\t *   code    Number    否    一个数字值表示关闭连接的状态号，表示连接被关闭的原因。如果这个参数没有被指定，默认的取值是1000 （表示正常连接关闭）\n\t *   reason    String    否    一个可读的字符串，表示连接被关闭的原因。这个字符串必须是不长于123字节的UTF-8 文本（不是字符）\n\t *   fail    Function    否    接口调用失败的回调函数\n\t *   complete    Function    否    接口调用结束的回调函数（调用成功、失败都会执行）\n\t */\n\tclose(opts)\n\t{\n\t\tthis._logger.debug('WxWebSocket close() -- will call closeInner().');\n\n\t\tthis._stopping = true;\n\n\t\tthis._connState = WX_STATE_STOPING;\n\n\t\tthis.closeInner(opts);\n\t}\n\n\tcloseInner(opts)\n\t{\n\t\t/*\n\t\tif (this._connectSocketTimeOut)\n\t\t{\n\t\t\tclearTimeout(this._connectSocketTimeOut);\n\t\t\tthis._connectSocketTimeOut = null;\n\t\t}\n\t\t*/\n\t\tconst {\n\t\t\tcode,\n\t\t\treason,\n\t\t\tsuccess,\n\t\t\tfail\n\t\t} = opts;\n\n\t\tif (Boolean(this._socketTask) && (this._connState !== WX_STATE_IDLE))\n\t\t{\n\t\t\tthis._logger.debug('WxWebSocket closeInner() -- call wx socketTask.close.');\n\n\t\t\tthis._socketTask.close({\n\t\t\t\tcode,\n\t\t\t\treason,\n\t\t\t\tsuccess,\n\t\t\t\tfail\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\tsuccess : (res) =>\n\t\t\t\t{\n\t\t\t\t\tthis._logger.debug('WxWebSocket socket closed.');\n\t\t\t\t\tif (opts)\n\t\t\t\t\t{\n\t\t\t\t\t\topts.success && opts.success(res);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail : (res) =>\n\t\t\t\t{\n\t\t\t\t\tif (opts)\n\t\t\t\t\t{\n\t\t\t\t\t\topts.fail && opts.fail(res);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t});\n\t\t}\n\n\t\tthis._socketTask = null;\n\t\tthis._connState = WX_STATE_IDLE;\n\t}\n\n\t// \n\t// 监听WebSocket连接打开事件\n\tonSocketOpen(res)\n\t{\n\t\t// 在尝试连接期间，外部调用了关闭function\n\t\tif (this._stopping)\n\t\t{\n\t\t\tthis._logger.debug('WxWebSocket onSocketOpen() -- this._stopping is ture, will call closeInner().');\n\t\t\tthis.closeInner({});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._logger.debug('WxWebSocket onSocketOpen() -- will emit [open].');\n\n\t\t\tthis._connState = WX_STATE_ACT;\n\t\t\t// \n\t\t\t/* 暂不启用该缓存队列\n\t\t\tfor (let i = 0; i < this._msgQueue.length; i++)\n\t\t\t{\n\t\t\t\tthis.send({ msg: this._msgQueue[i] });\n\t\t\t}\n\t\t\tthis._msgQueue = [];\n\t\t\t*/\n\n\t\t\tthis.safeEmit('open', {\n\t\t\t\trandomId : this._randomId\n\t\t\t});\n\t\t}\n\t}\n\n\t// 监听WebSocket错误\n\tonSocketError(res)\n\t{\n\t\tthis._logger.debug(`WxWebSocket onSocketError() -- this._stopping: ${this._stopping}`);\n\n\t\tthis._connState = WX_STATE_IDLE;\n\n\t\t// 在此期间，上层调用了 停止，则不再发送 close 事件\n\t\tif (this._stopping)\n\t\t{\n\t\t\t/*\n\t\t\t// code : 1000 对于上层意味着不再尝试重连\n\t\t\tconst evt = { wasClean: 'true', code: 1000, reason: res.errMsg };\n\n\t\t\tthis.safeEmit('close', evt);\n\t\t\t*/\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.safeEmit('error', {\n\t\t\t\trandomId : this._randomId,\n\t\t\t\tres\n\t\t\t});\n\t\t}\n\t}\n\n\t// 监听WebSocket接受到服务器的消息事件\n\tonSocketMessage(event)\n\t{\n\t\tthis._logger.debug(`WxWebSocket onSocketMessage() >>>>>> message: ${event.data}`);\n\n\t\tthis.safeEmit('message', {\n\t\t\trandomId : this._randomId,\n\t\t\tdata     : event.data\n\t\t});\n\t}\n\n\t// 监听WebSocket关闭\n\tonSocketClose(res)\n\t{\n\t\t/*\n\t\tif (this._connState !== WX_STATE_STOPING)\n\t\t{\n\t\t\tclearTimeout(this._connectSocketTimeOut);\n\t\t\tthis._connectSocketTimeOut = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.connect();\n\t\t\t}, 3000);\n\t\t}\n\t\t*/\n\n\t\tthis._logger.debug(`WxWebSocket onSocketClose() -- this._stopping: ${this._stopping}`);\n\n\t\tthis._connState = WX_STATE_IDLE;\n\n\t\tif (this._stopping)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.safeEmit('close', {\n\t\t\trandomId : this._randomId,\n\t\t\twasClean : 'true',\n\t\t\tcode     : res.code,\n\t\t\treason   : res.reason\n\t\t});\n\t}\n}\n\nmodule.exports = WxWebSocket;\n"],"sourceRoot":""}